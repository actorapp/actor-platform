package im.actor.apiLanguage.textGen;

/*Generated by MPS */

import jetbrains.mps.textGen.SNodeTextGen;
import org.jetbrains.mps.openapi.model.SNode;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SPropertyOperations;
import jetbrains.mps.smodel.adapter.structure.MetaAdapterFactory;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SLinkOperations;
import jetbrains.mps.internal.collections.runtime.ListSequence;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SNodeOperations;
import im.actor.apiLanguage.behavior.HeaderKey_Behavior;

public class Struct_TextGen extends SNodeTextGen {
  public void doGenerateText(SNode node) {
    this.append("{\"type\":\"struct\",\"content\":{");
    this.appendNewLine();
    this.append("\"name\":\"");
    this.append(SPropertyOperations.getString(node, MetaAdapterFactory.getProperty(0xceab519525ea4f22L, 0x9b92103b95ca8c0cL, 0x110396eaaa4L, 0x110396ec041L, "name")));
    this.append("\",");
    this.appendNewLine();
    if (SLinkOperations.getChildren(node, MetaAdapterFactory.getContainmentLink(0x77fdf769432b4edeL, 0x8171050f8dee73fcL, 0x20977a66b68208d1L, 0xabaabdc394f2893L, "docs")) != null && SLinkOperations.getChildren(node, MetaAdapterFactory.getContainmentLink(0x77fdf769432b4edeL, 0x8171050f8dee73fcL, 0x20977a66b68208d1L, 0xabaabdc394f2893L, "docs")).size() > 0) {
      this.append("\"doc\":[");
      this.appendNewLine();
      Boolean isFirstAttribute = true;
      for (SNode doc : ListSequence.fromList(SLinkOperations.getChildren(node, MetaAdapterFactory.getContainmentLink(0x77fdf769432b4edeL, 0x8171050f8dee73fcL, 0x20977a66b68208d1L, 0xabaabdc394f2893L, "docs")))) {
        if (!(isFirstAttribute)) {
          this.append(",");
        } else {
          isFirstAttribute = false;
        }
        if (SNodeOperations.isInstanceOf(doc, MetaAdapterFactory.getConcept(0x77fdf769432b4edeL, 0x8171050f8dee73fcL, 0xabaabdc394e4634L, "im.actor.apiLanguage.structure.StructDocComment"))) {
          this.append("\"");
          this.append(SPropertyOperations.getString(SNodeOperations.cast(doc, MetaAdapterFactory.getConcept(0x77fdf769432b4edeL, 0x8171050f8dee73fcL, 0xabaabdc394e4634L, "im.actor.apiLanguage.structure.StructDocComment")), MetaAdapterFactory.getProperty(0x77fdf769432b4edeL, 0x8171050f8dee73fcL, 0xabaabdc394e4634L, 0xabaabdc394e4693L, "content")).trim());
          this.append("\"");
        } else {
          SNode docParameter = SNodeOperations.cast(doc, MetaAdapterFactory.getConcept(0x77fdf769432b4edeL, 0x8171050f8dee73fcL, 0xabaabdc394ebffaL, "im.actor.apiLanguage.structure.StructDocParameter"));
          this.append("{\"type\":\"reference\",\"argument\":\"");
          this.append(SPropertyOperations.getString(SLinkOperations.getTarget(docParameter, MetaAdapterFactory.getReferenceLink(0x77fdf769432b4edeL, 0x8171050f8dee73fcL, 0xabaabdc394ebffaL, 0xabaabdc394ec7c3L, "paramter")), MetaAdapterFactory.getProperty(0xceab519525ea4f22L, 0x9b92103b95ca8c0cL, 0x110396eaaa4L, 0x110396ec041L, "name")));
          this.append("\",");
          this.append("\"category\":\"");
          this.append(SPropertyOperations.getString_def(docParameter, MetaAdapterFactory.getProperty(0x77fdf769432b4edeL, 0x8171050f8dee73fcL, 0xabaabdc394ebffaL, 0x2aa6bc7b464747c1L, "category"), "hidden"));
          this.append("\",");
          this.append("\"description\":\"");
          this.appendWithIndent(SPropertyOperations.getString(docParameter, MetaAdapterFactory.getProperty(0x77fdf769432b4edeL, 0x8171050f8dee73fcL, 0xabaabdc394ebffaL, 0xabaabdc394ec61eL, "description")).trim());
          this.append("\"}");
        }
      }
      this.append("],");
    }

    if (SPropertyOperations.getBoolean(node, MetaAdapterFactory.getProperty(0x77fdf769432b4edeL, 0x8171050f8dee73fcL, 0x20977a66b68208d1L, 0x49b8c23369a91f89L, "hasInterface"))) {
      this.append("\"trait\":{");
      this.append("\"name\":\"");
      this.append(SPropertyOperations.getString(SLinkOperations.getTarget(node, MetaAdapterFactory.getReferenceLink(0x77fdf769432b4edeL, 0x8171050f8dee73fcL, 0x20977a66b68208d1L, 0x49b8c23369aa8d4cL, "interface")), MetaAdapterFactory.getProperty(0xceab519525ea4f22L, 0x9b92103b95ca8c0cL, 0x110396eaaa4L, 0x110396ec041L, "name")));
      this.append("\",");
      this.append("\"key\":");
      this.append(HeaderKey_Behavior.call_intValue_4689615199750893375(SLinkOperations.getTarget(node, MetaAdapterFactory.getContainmentLink(0x77fdf769432b4edeL, 0x8171050f8dee73fcL, 0x20977a66b68208d1L, 0x514b58ebb63dd5f5L, "header"))) + "");
      this.append("},");
    }

    if (SPropertyOperations.getBoolean(node, MetaAdapterFactory.getProperty(0x77fdf769432b4edeL, 0x8171050f8dee73fcL, 0x20977a66b68208d1L, 0x2762a3c93a11e7eaL, "isExpandable"))) {
      this.append("\"expandable\":\"true\",");
    }

    this.append("\"attributes\":[");
    this.appendNewLine();
    Boolean isFirstAttribute = true;
    for (SNode attr : ListSequence.fromList(SLinkOperations.getChildren(node, MetaAdapterFactory.getContainmentLink(0x77fdf769432b4edeL, 0x8171050f8dee73fcL, 0x20977a66b69665d2L, 0x20977a66b6966607L, "attributes")))) {
      if (!(isFirstAttribute)) {
        this.append(",");
      } else {
        isFirstAttribute = false;
      }
      this.append("{\"type\":");
      appendNode(SLinkOperations.getTarget(attr, MetaAdapterFactory.getContainmentLink(0x77fdf769432b4edeL, 0x8171050f8dee73fcL, 0x20977a66b68879a3L, 0x20977a66b689e4b7L, "type")));
      this.append(",\"id\":");
      this.append(SPropertyOperations.getInteger(attr, MetaAdapterFactory.getProperty(0x77fdf769432b4edeL, 0x8171050f8dee73fcL, 0x20977a66b68879a3L, 0x20977a66b689e4d5L, "id")) + "");
      this.append(",\"name\":\"");
      this.append(SPropertyOperations.getString(attr, MetaAdapterFactory.getProperty(0xceab519525ea4f22L, 0x9b92103b95ca8c0cL, 0x110396eaaa4L, 0x110396ec041L, "name")));
      this.append("\"");
      if (SPropertyOperations.getBoolean(attr, MetaAdapterFactory.getProperty(0x77fdf769432b4edeL, 0x8171050f8dee73fcL, 0x20977a66b68879a3L, 0x2762a3c93a0145d9L, "isDeprecated"))) {
        this.append(", \"deprecated\":\"true\"");
      }

      this.append("}");
      this.appendNewLine();
    }
    this.append("]}}");
  }
}

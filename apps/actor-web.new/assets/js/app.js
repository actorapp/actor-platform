angular.module('actorWeb', ['ui.router', 'ngMaterial', 'ngStorage', 'luegg.directives']);

var ActorConfig;

ActorConfig = (function() {
  function ActorConfig($stateProvider, $urlRouterProvider) {
    $stateProvider.state('home', {
      url: '/',
      views: {
        'sidebar': {
          templateUrl: 'app/shared/sidebar/sidebarDefaultView.html'
        },
        'toolbar': {
          templateUrl: 'app/shared/toolbar/toolbarDefaultView.html'
        },
        'content': {
          templateUrl: 'app/shared/messages/messagesListView.html'
        },
        'compose': {
          templateUrl: 'app/shared/compose/copmoseView.html'
        }
      }
    }).state('login', {
      url: '/login',
      data: {
        noLogin: true
      },
      views: {
        'content': {
          templateUrl: 'app/components/login/loginView.html'
        }
      }
    });
    $urlRouterProvider.otherwise('/');
  }

  return ActorConfig;

})();

ActorConfig.$inject = ['$stateProvider', '$urlRouterProvider'];

angular.module('actorWeb').config(ActorConfig);

var ActorRun;

ActorRun = (function() {
  function ActorRun($rootScope, $state, $stateParams, actorService) {
    console.log('[AW]Run');
    $rootScope.$state = $state;
    $rootScope.$stateParams = $stateParams;
    $rootScope.isLoggedIn = null;
    $rootScope.$on('$stateChangeStart', function(event, toState, toParams, fromState, fromParams) {
      return actorService.checkAccess(event, toState, toParams, fromState, fromParams);
    });
  }

  return ActorRun;

})();

ActorRun.$inject = ['$rootScope', '$state', '$stateParams', 'actorService'];

angular.module('actorWeb').run(ActorRun);

var ActorService,
  bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };

ActorService = (function() {
  ActorService.prototype.messenger = null;

  function ActorService($rootScope, $sessionStorage) {
    this.$rootScope = $rootScope;
    this.$sessionStorage = $sessionStorage;
    this.setLoggedOut = bind(this.setLoggedOut, this);
    this.setLoggedIn = bind(this.setLoggedIn, this);
    console.log('[AW]ActorService constructor');
    this.isLoggedIn = this.$sessionStorage.isLoggedIn;
    window.jsAppLoaded = (function(_this) {
      return function() {
        _this.initActor();
        return _this.$rootScope.$broadcast('actorReady');
      };
    })(this);
  }

  ActorService.prototype.initActor = function() {
    console.log('[AW]ActorService initActor');
    this.messenger = new actor.ActorApp;
    this.uid = this.messenger.getUid();
    return console.log('[AW]ActorService initActor: @uid:', this.uid);
  };

  ActorService.prototype.checkAccess = function(event, toState, toParams, fromState, fromParams) {
    if (toState.data !== void 0) {
      if (toState.data.noLogin !== void 0 && toState.data.noLogin) {
        console.log('[AW]ActorService checkAccess: before login');
      }
    } else {
      if (this.$sessionStorage.isLoggedIn) {
        console.log('[AW]ActorService checkAccess: authenticated');
        return this.$rootScope.isLoggedIn = this.$sessionStorage.isLoggedIn;
      } else {
        console.log('[AW]ActorService checkAccess: redirect to login');
        event.preventDefault();
        return this.$rootScope.$state.go('login');
      }
    }
  };

  ActorService.prototype.setLoggedIn = function() {
    console.log('[AW]ActorService setLoggedIn');
    this.isLoggedIn = true;
    this.$rootScope.isLoggedIn = true;
    this.$sessionStorage.isLoggedIn = true;
    this.$rootScope.$state.go('home');
    return this.$rootScope.$broadcast('actorLoggedIn');
  };

  ActorService.prototype.setLoggedOut = function() {
    console.log('[AW]ActorService setLoggedOut');
    this.isLoggedIn = false;
    this.$rootScope.isLoggedIn = false;
    this.$sessionStorage.isLoggedIn = false;
    this.$rootScope.$state.go('login');
    return this.$rootScope.$broadcast('actorLoggedOut');
  };

  ActorService.prototype.requestSms = function(phone) {
    console.log('[AW]ActorService requestSms');
    return this.messenger.requestSms(phone.toString(), function(state) {
      return console.log('[AW]ActorService requestSms: state:', state);
    }, function(tag, message, canTryAgain, state) {
      return console.log('[AW]ActorService requestSms: error');
    });
  };

  ActorService.prototype.sendCode = function(code) {
    console.log('[AW]ActorService sendCode');
    return this.messenger.sendCode(code, (function(_this) {
      return function(state) {
        console.log('[AW]ActorService sendCode: state:', state);
        if (state === 'logged_in') {
          return _this.setLoggedIn();
        }
      };
    })(this), function(tag, message, canTryAgain, state) {
      return console.log('[AW]ActorService sendCode: error');
    });
  };

  ActorService.prototype.getDialogs = function(callback) {
    console.log('[AW]ActorService getDialogs');
    return this.messenger.bindDialogs(function(items) {
      console.log('[AW]ActorService getDialogs: items', items);
      return callback(items);
    });
  };

  ActorService.prototype.closeConversation = function(peer) {
    console.log('[AW]ActorService closeConversation');
    console.log('[AW]ActorService closeConversation: peer:', peer);
    this.messenger.onConversationClosed(peer);
    return this.$rootScope.$broadcast('closeConversation', peer);
  };

  ActorService.prototype.openConversation = function(peer) {
    console.log('[AW]ActorService openConversation');
    console.log('[AW]ActorService openConversation: peer:', peer);
    this.messenger.onConversationOpen(peer);
    return this.$rootScope.$broadcast('openConversation', peer);
  };

  ActorService.prototype.bindChat = function(peer, callback) {
    console.log('[AW]ActorService bindChat');
    console.log('[AW]ActorService bindChat: peer:', peer);
    return this.messenger.bindChat(peer, callback);
  };

  return ActorService;

})();

ActorService.$inject = ['$rootScope', '$sessionStorage'];

angular.module('actorWeb').service('actorService', ActorService);

var LoginController;

LoginController = (function() {
  function LoginController(actorService) {
    this.actorService = actorService;
    console.log('[AW]LoginController constructor');
  }

  LoginController.prototype.isCodeRequested = false;

  LoginController.prototype.allow = false;

  LoginController.prototype.requestCode = function(phone) {
    console.log('[AW]LoginController requestCode');
    this.actorService.requestSms(phone);
    return this.isCodeRequested = true;
  };

  LoginController.prototype.checkCode = function(code) {
    console.log('[AW]LoginController checkCode');
    return this.actorService.sendCode(code);
  };

  return LoginController;

})();

LoginController.$inject = ['actorService'];

angular.module('actorWeb').controller('loginController', LoginController);

var MainController;

MainController = (function() {
  function MainController($mdSidenav, $mdMedia, actorService) {
    this.$mdSidenav = $mdSidenav;
    this.$mdMedia = $mdMedia;
    this.actorService = actorService;
    console.log('[AW]MainController constructor');
  }

  MainController.prototype.showCompose = function() {
    return console.log('[AW]MainController showCompose');
  };

  MainController.prototype.openSidebar = function() {
    console.log('[AW]MainController openSidebar');
    return this.$mdSidenav('left').toggle();
  };

  return MainController;

})();

MainController.$inject = ['$mdSidenav', '$mdMedia', 'actorService'];

angular.module('actorWeb').controller('mainController', MainController);

var ChatsController;

ChatsController = (function() {
  ChatsController.prototype.selectedChat = null;

  function ChatsController($rootScope, actorService) {
    this.$rootScope = $rootScope;
    this.actorService = actorService;
    console.log('[AW]ChatsController constructor');
    this.$rootScope.$on('actorReady', (function(_this) {
      return function() {
        console.log('[AW]ChatsController constructor: actorReady fired.');
        return _this.getChats();
      };
    })(this));
  }

  ChatsController.prototype.getChats = function() {
    console.log('[AW]ChatsController getChats');
    this.actorService.getDialogs((function(_this) {
      return function(items) {
        return _this.list = items;
      };
    })(this));
    return console.log('[AW]ChatsController getChats: @list:', this.list);
  };

  ChatsController.prototype.selectChat = function(chat) {
    console.log('[AW]ChatsController selectChat');
    console.log('[AW]ChatsController selectChat: @selectedChat:', this.selectedChat);
    if (this.selectedChat) {
      this.actorService.closeConversation(this.selectedChat);
    }
    this.selectedChat = chat;
    return this.actorService.openConversation(this.selectedChat);
  };

  return ChatsController;

})();

ChatsController.$inject = ['$rootScope', 'actorService'];

angular.module('actorWeb').controller('chatsController', ChatsController);

var ComposeController;

ComposeController = (function() {
  ComposeController.prototype.draft = null;

  ComposeController.prototype.message = null;

  ComposeController.prototype.isEnabled = false;

  function ComposeController($rootScope, actorService) {
    this.$rootScope = $rootScope;
    this.actorService = actorService;
    console.log('[AW]ComposeController constructor');
    this.$rootScope.$on('actorReady', (function(_this) {
      return function() {
        console.log('[AW]ComposeController constructor: actorReady fired.');
        return _this.enableCompose();
      };
    })(this));
  }

  ComposeController.prototype.enableCompose = function() {
    console.log('[AW]ComposeController enableCompose');
    if (this.draft) {
      this.message = this.draft;
    }
    console.log('[AW]ComposeController enableCompose: @message:', this.message);
    console.log('[AW]ComposeController enableCompose: @draft:', this.draft);
    this.isEnabled = true;
    return console.log('[AW]ComposeController enableCompose: @isEnabled:', this.isEnabled);
  };

  return ComposeController;

})();

ComposeController.$inject = ['$rootScope', 'actorService'];

angular.module('actorWeb').controller('composeController', ComposeController);

var MessagesController,
  bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };

MessagesController = (function() {
  MessagesController.prototype.list = null;

  function MessagesController($rootScope, actorService) {
    this.$rootScope = $rootScope;
    this.actorService = actorService;
    this.renderMessages = bind(this.renderMessages, this);
    console.log('[AW]MessagesController constructor');
    this.$rootScope.$on('openConversation', (function(_this) {
      return function(event, peer) {
        return _this.getMessages(peer);
      };
    })(this));
  }

  MessagesController.prototype.getMessages = function(peer) {
    console.log('[AW]MessagesController getMessages');
    console.log('[AW]MessagesController getMessages: peer:', peer);
    return this.actorService.bindChat(peer, this.renderMessages);
  };

  MessagesController.prototype.renderMessages = function(messages) {
    console.log('[AW]MessagesController renderMessages');
    console.log('[AW]MessagesController renderMessages: messages:', messages);
    return this.list = messages;
  };

  return MessagesController;

})();

MessagesController.$inject = ['$rootScope', 'actorService'];

angular.module('actorWeb').controller('messagesController', MessagesController);



//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5jb2ZmZWUiLCJhcHAuY29uZmlnLmNvZmZlZSIsImFwcC5ydW4uY29mZmVlIiwic2VydmljZXMvYWN0b3JTZXJ2aWNlLmNvZmZlZSIsImNvbXBvbmVudHMvbG9naW4vbG9naW5Db250cm9sbGVyLmNvZmZlZSIsImNvbXBvbmVudHMvbWFpbi9tYWluQ29udHJvbGxlci5jb2ZmZWUiLCJzaGFyZWQvY2hhdHMvY2hhdHNDb250cm9sbGVyLmNvZmZlZSIsInNoYXJlZC9jb21wb3NlL2NvbXBvc2VDb250cm9sbGVyLmNvZmZlZSIsInNoYXJlZC9tZXNzYWdlcy9tZXNzYWdlc0NvbnRyb2xsZXIuY29mZmVlIiwic2hhcmVkL3NpZGViYXIvc2lkZWJhckNvbnRyb2xsZXIuY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQ0UsQ0FBQyxNQURILENBQ1UsVUFEVixFQUNzQixDQUNsQixXQURrQixFQUVsQixZQUZrQixFQUdsQixXQUhrQixFQUlsQixrQkFKa0IsQ0FEdEIsQ0FBQSxDQUFBOztBQ0FBLElBQUEsV0FBQTs7QUFBQTtBQUNlLEVBQUEscUJBQUMsY0FBRCxFQUFpQixrQkFBakIsR0FBQTtBQUNYLElBQUEsY0FDRSxDQUFDLEtBREgsQ0FDUyxNQURULEVBRUk7QUFBQSxNQUFBLEdBQUEsRUFBSyxHQUFMO0FBQUEsTUFDQSxLQUFBLEVBQ0U7QUFBQSxRQUFBLFNBQUEsRUFBVztBQUFBLFVBQUEsV0FBQSxFQUFhLDRDQUFiO1NBQVg7QUFBQSxRQUNBLFNBQUEsRUFBVztBQUFBLFVBQUEsV0FBQSxFQUFhLDRDQUFiO1NBRFg7QUFBQSxRQUVBLFNBQUEsRUFBVztBQUFBLFVBQUEsV0FBQSxFQUFhLDJDQUFiO1NBRlg7QUFBQSxRQUdBLFNBQUEsRUFBVztBQUFBLFVBQUEsV0FBQSxFQUFhLHFDQUFiO1NBSFg7T0FGRjtLQUZKLENBU0UsQ0FBQyxLQVRILENBU1MsT0FUVCxFQVVJO0FBQUEsTUFBQSxHQUFBLEVBQUssUUFBTDtBQUFBLE1B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Q0FBQSxDQUFBO0FBQUEsSUFDQSxJQUFDLENBQUEsVUFBVSxDQUFDLEdBQVosQ0FBZ0Isa0JBQWhCLEVBQW9DLENBQUEsU0FBQSxLQUFBLEdBQUE7YUFBQSxTQUFDLEtBQUQsRUFBUSxJQUFSLEdBQUE7ZUFDbEMsS0FBQyxDQUFBLFdBQUQsQ0FBYSxJQUFiLEVBRGtDO01BQUEsRUFBQTtJQUFBLENBQUEsQ0FBQSxDQUFBLElBQUEsQ0FBcEMsQ0FEQSxDQURXO0VBQUEsQ0FGYjs7QUFBQSwrQkFPQSxXQUFBLEdBQWEsU0FBQyxJQUFELEdBQUE7QUFDWCxJQUFBLE9BQU8sQ0FBQyxHQUFSLENBQVksb0NBQVosQ0FBQSxDQUFBO0FBQUEsSUFDQSxPQUFPLENBQUMsR0FBUixDQUFZLDJDQUFaLEVBQXlELElBQXpELENBREEsQ0FBQTtXQUVBLElBQUMsQ0FBQSxZQUFZLENBQUMsUUFBZCxDQUF1QixJQUF2QixFQUE2QixJQUFDLENBQUEsY0FBOUIsRUFIVztFQUFBLENBUGIsQ0FBQTs7QUFBQSwrQkFZQSxjQUFBLEdBQWdCLFNBQUMsUUFBRCxHQUFBO0FBQ2QsSUFBQSxPQUFPLENBQUMsR0FBUixDQUFZLHVDQUFaLENBQUEsQ0FBQTtBQUFBLElBQ0EsT0FBTyxDQUFDLEdBQVIsQ0FBWSxrREFBWixFQUFnRSxRQUFoRSxDQURBLENBQUE7V0FFQSxJQUFDLENBQUEsSUFBRCxHQUFRLFNBSE07RUFBQSxDQVpoQixDQUFBOzs0QkFBQTs7SUFERixDQUFBOztBQUFBLGtCQW1Ca0IsQ0FBQyxPQUFuQixHQUE2QixDQUFDLFlBQUQsRUFBZSxjQUFmLENBbkI3QixDQUFBOztBQUFBLE9Bc0JFLENBQUMsTUFESCxDQUNVLFVBRFYsQ0FFRSxDQUFDLFVBRkgsQ0FFYyxvQkFGZCxFQUVvQyxrQkFGcEMsQ0FyQkEsQ0FBQTs7QUNBQSIsImZpbGUiOiJhcHAuanMiLCJzb3VyY2VzQ29udGVudCI6WyJhbmd1bGFyXG4gIC5tb2R1bGUgJ2FjdG9yV2ViJywgW1xuICAgICd1aS5yb3V0ZXInXG4gICAgJ25nTWF0ZXJpYWwnXG4gICAgJ25nU3RvcmFnZSdcbiAgICAnbHVlZ2cuZGlyZWN0aXZlcydcbiAgXVxuIiwiY2xhc3MgQWN0b3JDb25maWdcbiAgY29uc3RydWN0b3I6ICgkc3RhdGVQcm92aWRlciwgJHVybFJvdXRlclByb3ZpZGVyKSAtPlxuICAgICRzdGF0ZVByb3ZpZGVyXG4gICAgICAuc3RhdGUgJ2hvbWUnLFxuICAgICAgICB1cmw6ICcvJ1xuICAgICAgICB2aWV3czpcbiAgICAgICAgICAnc2lkZWJhcic6IHRlbXBsYXRlVXJsOiAnYXBwL3NoYXJlZC9zaWRlYmFyL3NpZGViYXJEZWZhdWx0Vmlldy5odG1sJ1xuICAgICAgICAgICd0b29sYmFyJzogdGVtcGxhdGVVcmw6ICdhcHAvc2hhcmVkL3Rvb2xiYXIvdG9vbGJhckRlZmF1bHRWaWV3Lmh0bWwnXG4gICAgICAgICAgJ2NvbnRlbnQnOiB0ZW1wbGF0ZVVybDogJ2FwcC9zaGFyZWQvbWVzc2FnZXMvbWVzc2FnZXNMaXN0Vmlldy5odG1sJ1xuICAgICAgICAgICdjb21wb3NlJzogdGVtcGxhdGVVcmw6ICdhcHAvc2hhcmVkL2NvbXBvc2UvY29wbW9zZVZpZXcuaHRtbCdcblxuICAgICAgLnN0YXRlICdsb2dpbicsXG4gICAgICAgIHVybDogJy9sb2dpbidcbiAgICAgICAgZGF0YTpcbiAgICAgICAgICBub0xvZ2luOiB0cnVlXG4gICAgICAgIHZpZXdzOlxuICAgICAgICAgICdjb250ZW50JzogdGVtcGxhdGVVcmw6ICdhcHAvY29tcG9uZW50cy9sb2dpbi9sb2dpblZpZXcuaHRtbCdcblxuICAgICR1cmxSb3V0ZXJQcm92aWRlclxuICAgICAgLm90aGVyd2lzZSAnLydcblxuQWN0b3JDb25maWcuJGluamVjdCA9IFsnJHN0YXRlUHJvdmlkZXInLCAnJHVybFJvdXRlclByb3ZpZGVyJ11cblxuYW5ndWxhclxuICAubW9kdWxlICdhY3RvcldlYidcbiAgLmNvbmZpZyBBY3RvckNvbmZpZ1xuIiwiY2xhc3MgQWN0b3JSdW5cbiAgY29uc3RydWN0b3I6ICgkcm9vdFNjb3BlLCAkc3RhdGUsICRzdGF0ZVBhcmFtcywgYWN0b3JTZXJ2aWNlKSAtPlxuICAgIGNvbnNvbGUubG9nICdbQVddUnVuJ1xuICAgICRyb290U2NvcGUuJHN0YXRlID0gJHN0YXRlXG4gICAgJHJvb3RTY29wZS4kc3RhdGVQYXJhbXMgPSAkc3RhdGVQYXJhbXNcblxuICAgICRyb290U2NvcGUuaXNMb2dnZWRJbiA9IG51bGxcbiAgICAkcm9vdFNjb3BlLiRvbiAnJHN0YXRlQ2hhbmdlU3RhcnQnLCAoZXZlbnQsIHRvU3RhdGUsIHRvUGFyYW1zLCBmcm9tU3RhdGUsIGZyb21QYXJhbXMpIC0+XG4gICAgICBhY3RvclNlcnZpY2UuY2hlY2tBY2Nlc3MoZXZlbnQsIHRvU3RhdGUsIHRvUGFyYW1zLCBmcm9tU3RhdGUsIGZyb21QYXJhbXMpXG5cbkFjdG9yUnVuLiRpbmplY3QgPSBbJyRyb290U2NvcGUnLCAnJHN0YXRlJywgJyRzdGF0ZVBhcmFtcycsICdhY3RvclNlcnZpY2UnXVxuXG5hbmd1bGFyXG4gIC5tb2R1bGUgJ2FjdG9yV2ViJ1xuICAucnVuIEFjdG9yUnVuXG4iLCJjbGFzcyBBY3RvclNlcnZpY2VcbiAgbWVzc2VuZ2VyOiBudWxsXG5cbiAgY29uc3RydWN0b3I6IChAJHJvb3RTY29wZSwgQCRzZXNzaW9uU3RvcmFnZSkgLT5cbiAgICBjb25zb2xlLmxvZyAnW0FXXUFjdG9yU2VydmljZSBjb25zdHJ1Y3RvcidcbiAgICBAaXNMb2dnZWRJbiA9IEAkc2Vzc2lvblN0b3JhZ2UuaXNMb2dnZWRJblxuICAgIHdpbmRvdy5qc0FwcExvYWRlZCA9ID0+XG4gICAgICBAaW5pdEFjdG9yKClcbiAgICAgIEAkcm9vdFNjb3BlLiRicm9hZGNhc3QgJ2FjdG9yUmVhZHknXG5cbiAgaW5pdEFjdG9yOiAtPlxuICAgIGNvbnNvbGUubG9nICdbQVddQWN0b3JTZXJ2aWNlIGluaXRBY3RvcidcbiAgICBAbWVzc2VuZ2VyID0gbmV3IGFjdG9yLkFjdG9yQXBwXG4gICAgQHVpZCA9IEBtZXNzZW5nZXIuZ2V0VWlkKClcbiAgICBjb25zb2xlLmxvZyAnW0FXXUFjdG9yU2VydmljZSBpbml0QWN0b3I6IEB1aWQ6JywgQHVpZFxuXG5cbiAgY2hlY2tBY2Nlc3M6IChldmVudCwgdG9TdGF0ZSwgdG9QYXJhbXMsIGZyb21TdGF0ZSwgZnJvbVBhcmFtcykgLT5cbiAgICBpZiB0b1N0YXRlLmRhdGEgIT0gdW5kZWZpbmVkXG4gICAgICBpZiB0b1N0YXRlLmRhdGEubm9Mb2dpbiAhPSB1bmRlZmluZWQgJiYgdG9TdGF0ZS5kYXRhLm5vTG9naW5cbiAgICAgICAgY29uc29sZS5sb2cgJ1tBV11BY3RvclNlcnZpY2UgY2hlY2tBY2Nlc3M6IGJlZm9yZSBsb2dpbidcbiAgICAgICAgcmV0dXJuXG4gICAgZWxzZVxuICAgICAgaWYgQCRzZXNzaW9uU3RvcmFnZS5pc0xvZ2dlZEluXG4gICAgICAgIGNvbnNvbGUubG9nICdbQVddQWN0b3JTZXJ2aWNlIGNoZWNrQWNjZXNzOiBhdXRoZW50aWNhdGVkJ1xuICAgICAgICBAJHJvb3RTY29wZS5pc0xvZ2dlZEluID0gQCRzZXNzaW9uU3RvcmFnZS5pc0xvZ2dlZEluXG4gICAgICBlbHNlXG4gICAgICAgIGNvbnNvbGUubG9nICdbQVddQWN0b3JTZXJ2aWNlIGNoZWNrQWNjZXNzOiByZWRpcmVjdCB0byBsb2dpbidcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgICAgICBAJHJvb3RTY29wZS4kc3RhdGUuZ28oJ2xvZ2luJylcblxuICBzZXRMb2dnZWRJbjogKCkgPT5cbiAgICBjb25zb2xlLmxvZyAnW0FXXUFjdG9yU2VydmljZSBzZXRMb2dnZWRJbidcbiAgICBAaXNMb2dnZWRJbiA9IHRydWVcbiAgICBAJHJvb3RTY29wZS5pc0xvZ2dlZEluID0gdHJ1ZVxuICAgIEAkc2Vzc2lvblN0b3JhZ2UuaXNMb2dnZWRJbiA9IHRydWVcbiAgICBAJHJvb3RTY29wZS4kc3RhdGUuZ28gJ2hvbWUnXG4gICAgQCRyb290U2NvcGUuJGJyb2FkY2FzdCAnYWN0b3JMb2dnZWRJbidcblxuICBzZXRMb2dnZWRPdXQ6ICgpID0+XG4gICAgY29uc29sZS5sb2cgJ1tBV11BY3RvclNlcnZpY2Ugc2V0TG9nZ2VkT3V0J1xuICAgIEBpc0xvZ2dlZEluID0gZmFsc2VcbiAgICBAJHJvb3RTY29wZS5pc0xvZ2dlZEluID0gZmFsc2VcbiAgICBAJHNlc3Npb25TdG9yYWdlLmlzTG9nZ2VkSW4gPSBmYWxzZVxuICAgIEAkcm9vdFNjb3BlLiRzdGF0ZS5nbyAnbG9naW4nXG4gICAgQCRyb290U2NvcGUuJGJyb2FkY2FzdCAnYWN0b3JMb2dnZWRPdXQnXG5cbiAgcmVxdWVzdFNtczogKHBob25lKSAtPlxuICAgIGNvbnNvbGUubG9nICdbQVddQWN0b3JTZXJ2aWNlIHJlcXVlc3RTbXMnXG4gICAgQG1lc3Nlbmdlci5yZXF1ZXN0U21zIHBob25lLnRvU3RyaW5nKCksIChzdGF0ZSkgLT5cbiAgICAgIGNvbnNvbGUubG9nICdbQVddQWN0b3JTZXJ2aWNlIHJlcXVlc3RTbXM6IHN0YXRlOicsIHN0YXRlXG4gICAgLCAodGFnLCBtZXNzYWdlLCBjYW5UcnlBZ2Fpbiwgc3RhdGUpIC0+XG4gICAgICBjb25zb2xlLmxvZyAnW0FXXUFjdG9yU2VydmljZSByZXF1ZXN0U21zOiBlcnJvcidcblxuICBzZW5kQ29kZTogKGNvZGUpIC0+XG4gICAgY29uc29sZS5sb2cgJ1tBV11BY3RvclNlcnZpY2Ugc2VuZENvZGUnXG4gICAgQG1lc3Nlbmdlci5zZW5kQ29kZSBjb2RlLCAoc3RhdGUpID0+XG4gICAgICBjb25zb2xlLmxvZyAnW0FXXUFjdG9yU2VydmljZSBzZW5kQ29kZTogc3RhdGU6Jywgc3RhdGVcbiAgICAgIEBzZXRMb2dnZWRJbigpIGlmIHN0YXRlID09ICdsb2dnZWRfaW4nXG4gICAgLCAodGFnLCBtZXNzYWdlLCBjYW5UcnlBZ2Fpbiwgc3RhdGUpIC0+XG4gICAgICBjb25zb2xlLmxvZyAnW0FXXUFjdG9yU2VydmljZSBzZW5kQ29kZTogZXJyb3InXG5cblxuICBnZXREaWFsb2dzOiAoY2FsbGJhY2spIC0+XG4gICAgY29uc29sZS5sb2cgJ1tBV11BY3RvclNlcnZpY2UgZ2V0RGlhbG9ncydcbiAgICBAbWVzc2VuZ2VyLmJpbmREaWFsb2dzIChpdGVtcykgLT5cbiAgICAgIGNvbnNvbGUubG9nICdbQVddQWN0b3JTZXJ2aWNlIGdldERpYWxvZ3M6IGl0ZW1zJywgaXRlbXNcbiAgICAgIGNhbGxiYWNrIGl0ZW1zXG5cbiAgY2xvc2VDb252ZXJzYXRpb246IChwZWVyKSAtPlxuICAgIGNvbnNvbGUubG9nICdbQVddQWN0b3JTZXJ2aWNlIGNsb3NlQ29udmVyc2F0aW9uJ1xuICAgIGNvbnNvbGUubG9nICdbQVddQWN0b3JTZXJ2aWNlIGNsb3NlQ29udmVyc2F0aW9uOiBwZWVyOicsIHBlZXJcbiAgICBAbWVzc2VuZ2VyLm9uQ29udmVyc2F0aW9uQ2xvc2VkIHBlZXJcbiAgICBAJHJvb3RTY29wZS4kYnJvYWRjYXN0ICdjbG9zZUNvbnZlcnNhdGlvbicsIHBlZXJcblxuICBvcGVuQ29udmVyc2F0aW9uOiAocGVlcikgLT5cbiAgICBjb25zb2xlLmxvZyAnW0FXXUFjdG9yU2VydmljZSBvcGVuQ29udmVyc2F0aW9uJ1xuICAgIGNvbnNvbGUubG9nICdbQVddQWN0b3JTZXJ2aWNlIG9wZW5Db252ZXJzYXRpb246IHBlZXI6JywgcGVlclxuICAgIEBtZXNzZW5nZXIub25Db252ZXJzYXRpb25PcGVuIHBlZXJcbiAgICBAJHJvb3RTY29wZS4kYnJvYWRjYXN0ICdvcGVuQ29udmVyc2F0aW9uJywgcGVlclxuXG4gIGJpbmRDaGF0OiAocGVlciwgY2FsbGJhY2spIC0+XG4gICAgY29uc29sZS5sb2cgJ1tBV11BY3RvclNlcnZpY2UgYmluZENoYXQnXG4gICAgY29uc29sZS5sb2cgJ1tBV11BY3RvclNlcnZpY2UgYmluZENoYXQ6IHBlZXI6JywgcGVlclxuICAgIEBtZXNzZW5nZXIuYmluZENoYXQgcGVlciwgY2FsbGJhY2tcblxuXG5BY3RvclNlcnZpY2UuJGluamVjdCA9IFsnJHJvb3RTY29wZScsICckc2Vzc2lvblN0b3JhZ2UnXVxuXG5hbmd1bGFyXG4gIC5tb2R1bGUgJ2FjdG9yV2ViJ1xuICAuc2VydmljZSAnYWN0b3JTZXJ2aWNlJywgQWN0b3JTZXJ2aWNlXG4iLCJjbGFzcyBMb2dpbkNvbnRyb2xsZXJcbiAgY29uc3RydWN0b3I6IChAYWN0b3JTZXJ2aWNlKSAtPlxuICAgIGNvbnNvbGUubG9nICdbQVddTG9naW5Db250cm9sbGVyIGNvbnN0cnVjdG9yJ1xuXG4gIGlzQ29kZVJlcXVlc3RlZDogZmFsc2VcbiAgYWxsb3c6IGZhbHNlXG5cbiAgcmVxdWVzdENvZGU6IChwaG9uZSkgLT5cbiAgICBjb25zb2xlLmxvZyAnW0FXXUxvZ2luQ29udHJvbGxlciByZXF1ZXN0Q29kZSdcbiAgICBAYWN0b3JTZXJ2aWNlLnJlcXVlc3RTbXMgcGhvbmVcbiAgICBAaXNDb2RlUmVxdWVzdGVkID0gdHJ1ZVxuXG4gIGNoZWNrQ29kZTogKGNvZGUpIC0+XG4gICAgY29uc29sZS5sb2cgJ1tBV11Mb2dpbkNvbnRyb2xsZXIgY2hlY2tDb2RlJ1xuICAgIEBhY3RvclNlcnZpY2Uuc2VuZENvZGUgY29kZVxuXG5Mb2dpbkNvbnRyb2xsZXIuJGluamVjdCA9IFsnYWN0b3JTZXJ2aWNlJ11cblxuYW5ndWxhclxuICAubW9kdWxlICdhY3RvcldlYidcbiAgLmNvbnRyb2xsZXIgJ2xvZ2luQ29udHJvbGxlcicsIExvZ2luQ29udHJvbGxlclxuIiwiY2xhc3MgTWFpbkNvbnRyb2xsZXJcbiAgY29uc3RydWN0b3I6IChAJG1kU2lkZW5hdiwgQCRtZE1lZGlhLCBAYWN0b3JTZXJ2aWNlKSAtPlxuICAgIGNvbnNvbGUubG9nICdbQVddTWFpbkNvbnRyb2xsZXIgY29uc3RydWN0b3InXG5cbiAgc2hvd0NvbXBvc2U6IC0+XG4gICAgY29uc29sZS5sb2cgJ1tBV11NYWluQ29udHJvbGxlciBzaG93Q29tcG9zZSdcbiAgICAjIEAkbWRCb3R0b21TaGVldC5zaG93XG4gICAgIyAgIHRlbXBsYXRlVXJsOiAnYXBwL3NoYXJlZC9jb21wb3NlL2NvcG1vc2VWaWV3Lmh0bWwnXG4gICAgIyAgIHBhcmVudDogJyNjb250ZW50J1xuICAgICMgICBkaXNhYmxlUGFyZW50U2Nyb2xsOiBmYWxzZVxuXG4gIG9wZW5TaWRlYmFyOiAtPlxuICAgIGNvbnNvbGUubG9nICdbQVddTWFpbkNvbnRyb2xsZXIgb3BlblNpZGViYXInXG4gICAgQCRtZFNpZGVuYXYoJ2xlZnQnKS50b2dnbGUoKVxuXG5NYWluQ29udHJvbGxlci4kaW5qZWN0ID0gWyckbWRTaWRlbmF2JywgJyRtZE1lZGlhJywgJ2FjdG9yU2VydmljZSddXG5cbmFuZ3VsYXJcbiAgLm1vZHVsZSAnYWN0b3JXZWInXG4gIC5jb250cm9sbGVyICdtYWluQ29udHJvbGxlcicsIE1haW5Db250cm9sbGVyXG4iLCJjbGFzcyBDaGF0c0NvbnRyb2xsZXJcbiAgc2VsZWN0ZWRDaGF0OiBudWxsXG5cbiAgY29uc3RydWN0b3I6IChAJHJvb3RTY29wZSwgQGFjdG9yU2VydmljZSkgLT5cbiAgICBjb25zb2xlLmxvZyAnW0FXXUNoYXRzQ29udHJvbGxlciBjb25zdHJ1Y3RvcidcbiAgICBAJHJvb3RTY29wZS4kb24gJ2FjdG9yUmVhZHknLCA9PlxuICAgICAgY29uc29sZS5sb2cgJ1tBV11DaGF0c0NvbnRyb2xsZXIgY29uc3RydWN0b3I6IGFjdG9yUmVhZHkgZmlyZWQuJ1xuICAgICAgQGdldENoYXRzKClcbiAgICAjIEAkcm9vdFNjb3BlLiRvbiAnYWN0b3JMb2dnZWRJbicsID0+IEBnZXRDaGF0cygpXG5cbiAgZ2V0Q2hhdHM6IC0+XG4gICAgY29uc29sZS5sb2cgJ1tBV11DaGF0c0NvbnRyb2xsZXIgZ2V0Q2hhdHMnXG4gICAgQGFjdG9yU2VydmljZS5nZXREaWFsb2dzIChpdGVtcykgPT4gQGxpc3QgPSBpdGVtc1xuICAgIGNvbnNvbGUubG9nICdbQVddQ2hhdHNDb250cm9sbGVyIGdldENoYXRzOiBAbGlzdDonLCBAbGlzdFxuXG4gIHNlbGVjdENoYXQ6IChjaGF0KSAtPlxuICAgIGNvbnNvbGUubG9nICdbQVddQ2hhdHNDb250cm9sbGVyIHNlbGVjdENoYXQnXG4gICAgY29uc29sZS5sb2cgJ1tBV11DaGF0c0NvbnRyb2xsZXIgc2VsZWN0Q2hhdDogQHNlbGVjdGVkQ2hhdDonLCBAc2VsZWN0ZWRDaGF0XG4gICAgaWYgQHNlbGVjdGVkQ2hhdFxuICAgICAgQGFjdG9yU2VydmljZS5jbG9zZUNvbnZlcnNhdGlvbiBAc2VsZWN0ZWRDaGF0XG4gICAgQHNlbGVjdGVkQ2hhdCA9IGNoYXRcbiAgICBAYWN0b3JTZXJ2aWNlLm9wZW5Db252ZXJzYXRpb24gQHNlbGVjdGVkQ2hhdFxuXG5DaGF0c0NvbnRyb2xsZXIuJGluamVjdCA9IFsnJHJvb3RTY29wZScsICdhY3RvclNlcnZpY2UnXVxuXG5hbmd1bGFyXG4gIC5tb2R1bGUgJ2FjdG9yV2ViJ1xuICAuY29udHJvbGxlciAnY2hhdHNDb250cm9sbGVyJywgQ2hhdHNDb250cm9sbGVyXG4iLCJjbGFzcyBDb21wb3NlQ29udHJvbGxlclxuICBkcmFmdDogbnVsbFxuICBtZXNzYWdlOiBudWxsXG4gIGlzRW5hYmxlZDogZmFsc2VcblxuICBjb25zdHJ1Y3RvcjogKEAkcm9vdFNjb3BlLCBAYWN0b3JTZXJ2aWNlKSAtPlxuICAgIGNvbnNvbGUubG9nICdbQVddQ29tcG9zZUNvbnRyb2xsZXIgY29uc3RydWN0b3InXG5cbiAgICBAJHJvb3RTY29wZS4kb24gJ2FjdG9yUmVhZHknLCA9PlxuICAgICAgY29uc29sZS5sb2cgJ1tBV11Db21wb3NlQ29udHJvbGxlciBjb25zdHJ1Y3RvcjogYWN0b3JSZWFkeSBmaXJlZC4nXG5cbiAgICAgIEBlbmFibGVDb21wb3NlKClcblxuXG4gIGVuYWJsZUNvbXBvc2U6IC0+XG4gICAgY29uc29sZS5sb2cgJ1tBV11Db21wb3NlQ29udHJvbGxlciBlbmFibGVDb21wb3NlJ1xuXG4gICAgQG1lc3NhZ2UgPSBAZHJhZnQgaWYgQGRyYWZ0XG4gICAgY29uc29sZS5sb2cgJ1tBV11Db21wb3NlQ29udHJvbGxlciBlbmFibGVDb21wb3NlOiBAbWVzc2FnZTonLCBAbWVzc2FnZVxuICAgIGNvbnNvbGUubG9nICdbQVddQ29tcG9zZUNvbnRyb2xsZXIgZW5hYmxlQ29tcG9zZTogQGRyYWZ0OicsIEBkcmFmdFxuXG4gICAgQGlzRW5hYmxlZCA9IHRydWVcbiAgICBjb25zb2xlLmxvZyAnW0FXXUNvbXBvc2VDb250cm9sbGVyIGVuYWJsZUNvbXBvc2U6IEBpc0VuYWJsZWQ6JywgQGlzRW5hYmxlZFxuXG5cbiAgIyBzZWxlY3RDaGF0OiAoY2hhdCkgLT5cbiAgIyAgIGNvbnNvbGUubG9nICdbQVddQ29tcG9zZUNvbnRyb2xsZXIgc2VsZWN0Q2hhdCdcbiAgIyAgIGNvbnNvbGUubG9nICdbQVddQ29tcG9zZUNvbnRyb2xsZXIgc2VsZWN0Q2hhdDogQHNlbGVjdGVkQ2hhdDonLCBAc2VsZWN0ZWRDaGF0XG5cbkNvbXBvc2VDb250cm9sbGVyLiRpbmplY3QgPSBbJyRyb290U2NvcGUnLCAnYWN0b3JTZXJ2aWNlJ11cblxuYW5ndWxhclxuICAubW9kdWxlICdhY3RvcldlYidcbiAgLmNvbnRyb2xsZXIgJ2NvbXBvc2VDb250cm9sbGVyJywgQ29tcG9zZUNvbnRyb2xsZXJcbiIsImNsYXNzIE1lc3NhZ2VzQ29udHJvbGxlclxuICBsaXN0OiBudWxsXG5cbiAgY29uc3RydWN0b3I6IChAJHJvb3RTY29wZSwgQGFjdG9yU2VydmljZSkgLT5cbiAgICBjb25zb2xlLmxvZyAnW0FXXU1lc3NhZ2VzQ29udHJvbGxlciBjb25zdHJ1Y3RvcidcbiAgICBAJHJvb3RTY29wZS4kb24gJ29wZW5Db252ZXJzYXRpb24nLCAoZXZlbnQsIHBlZXIpID0+XG4gICAgICBAZ2V0TWVzc2FnZXMocGVlcilcblxuICBnZXRNZXNzYWdlczogKHBlZXIpIC0+XG4gICAgY29uc29sZS5sb2cgJ1tBV11NZXNzYWdlc0NvbnRyb2xsZXIgZ2V0TWVzc2FnZXMnXG4gICAgY29uc29sZS5sb2cgJ1tBV11NZXNzYWdlc0NvbnRyb2xsZXIgZ2V0TWVzc2FnZXM6IHBlZXI6JywgcGVlclxuICAgIEBhY3RvclNlcnZpY2UuYmluZENoYXQgcGVlciwgQHJlbmRlck1lc3NhZ2VzXG5cbiAgcmVuZGVyTWVzc2FnZXM6IChtZXNzYWdlcykgPT5cbiAgICBjb25zb2xlLmxvZyAnW0FXXU1lc3NhZ2VzQ29udHJvbGxlciByZW5kZXJNZXNzYWdlcydcbiAgICBjb25zb2xlLmxvZyAnW0FXXU1lc3NhZ2VzQ29udHJvbGxlciByZW5kZXJNZXNzYWdlczogbWVzc2FnZXM6JywgbWVzc2FnZXNcbiAgICBAbGlzdCA9IG1lc3NhZ2VzXG5cblxuTWVzc2FnZXNDb250cm9sbGVyLiRpbmplY3QgPSBbJyRyb290U2NvcGUnLCAnYWN0b3JTZXJ2aWNlJ11cblxuYW5ndWxhclxuICAubW9kdWxlICdhY3RvcldlYidcbiAgLmNvbnRyb2xsZXIgJ21lc3NhZ2VzQ29udHJvbGxlcicsIE1lc3NhZ2VzQ29udHJvbGxlclxuIiwiIyBjbGFzcyBTaWRlYmFyQ29udHJvbGxlclxuIyAgIGNvbnN0cnVjdG9yOiAtPlxuIyAgICAgY29uc29sZS5sb2cgJ1tBV11TaWRlYmFyQ29udHJvbGxlciBjb25zdHJ1Y3RvcidcbiNcbiMgYW5ndWxhclxuIyAgIC5tb2R1bGUgJ2FjdG9yV2ViJ1xuIyAgIC5jb250cm9sbGVyICdzaWRlYmFyQ29udHJvbGxlcicsIFNpZGViYXJDb250cm9sbGVyXG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
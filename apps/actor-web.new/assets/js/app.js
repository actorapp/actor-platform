angular.module('actorWeb', ['ui.router', 'ngMaterial', 'ngStorage']);

var ActorConfig;

ActorConfig = (function() {
  function ActorConfig($stateProvider, $urlRouterProvider) {
    $stateProvider.state('home', {
      url: '/',
      views: {
        'sidebar': {
          templateUrl: 'app/shared/sidebar/sidebarDefaultView.html'
        },
        'toolbar': {
          templateUrl: 'app/shared/toolbar/toolbarDefaultView.html'
        },
        'content': {
          templateUrl: 'app/shared/messages/messagesListView.html'
        }
      }
    }).state('login', {
      url: '/login',
      data: {
        noLogin: true
      },
      views: {
        'content': {
          templateUrl: 'app/components/login/loginView.html'
        }
      }
    });
    $urlRouterProvider.otherwise('/');
  }

  return ActorConfig;

})();

ActorConfig.$inject = ['$stateProvider', '$urlRouterProvider'];

angular.module('actorWeb').config(ActorConfig);

var ActorRun;

ActorRun = (function() {
  function ActorRun($rootScope, $state, $stateParams, actorService) {
    console.log('[AW]Run');
    $rootScope.$state = $state;
    $rootScope.$stateParams = $stateParams;
    $rootScope.isLoggedIn = null;
    $rootScope.$on('$stateChangeStart', function(event, toState, toParams, fromState, fromParams) {
      return actorService.checkAccess(event, toState, toParams, fromState, fromParams);
    });
  }

  return ActorRun;

})();

ActorRun.$inject = ['$rootScope', '$state', '$stateParams', 'actorService'];

angular.module('actorWeb').run(ActorRun);

var ActorService,
  bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };

ActorService = (function() {
  ActorService.prototype.messenger = null;

  function ActorService($rootScope, $sessionStorage) {
    this.$rootScope = $rootScope;
    this.$sessionStorage = $sessionStorage;
    this.setLoggedOut = bind(this.setLoggedOut, this);
    this.setLoggedIn = bind(this.setLoggedIn, this);
    console.log('[AW]ActorService constructor');
    this.isLoggedIn = this.$sessionStorage.isLoggedIn;
    window.jsAppLoaded = (function(_this) {
      return function() {
        _this.messenger = new actor.ActorApp;
        _this.uid = _this.messenger.getUid();
        return _this.$rootScope.$broadcast('actorReady');
      };
    })(this);
  }

  ActorService.prototype.checkAccess = function(event, toState, toParams, fromState, fromParams) {
    if (toState.data !== void 0) {
      if (toState.data.noLogin !== void 0 && toState.data.noLogin) {
        console.log('[AW]ActorService checkAccess: before login');
      }
    } else {
      if (this.$sessionStorage.isLoggedIn) {
        console.log('[AW]ActorService checkAccess: authenticated');
        return this.$rootScope.isLoggedIn = this.$sessionStorage.isLoggedIn;
      } else {
        console.log('[AW]ActorService checkAccess: redirect to login');
        event.preventDefault();
        return this.$rootScope.$state.go('login');
      }
    }
  };

  ActorService.prototype.setLoggedIn = function() {
    console.log('[AW]ActorService setLoggedIn');
    this.isLoggedIn = true;
    this.$rootScope.isLoggedIn = true;
    this.$sessionStorage.isLoggedIn = true;
    this.$rootScope.$state.go('home');
    return this.$rootScope.$broadcast('actorLoggedIn');
  };

  ActorService.prototype.setLoggedOut = function() {
    console.log('[AW]ActorService setLoggedOut');
    this.isLoggedIn = false;
    this.$rootScope.isLoggedIn = false;
    this.$sessionStorage.isLoggedIn = false;
    this.$rootScope.$state.go('login');
    return this.$rootScope.$broadcast('actorLoggedOut');
  };

  ActorService.prototype.requestSms = function(phone) {
    console.log('[AW]ActorService requestSms');
    return this.messenger.requestSms(phone.toString(), function(state) {
      return console.log('[AW]ActorService requestSms: state:', state);
    }, function(tag, message, canTryAgain, state) {
      return console.log('[AW]ActorService requestSms: error');
    });
  };

  ActorService.prototype.sendCode = function(code) {
    console.log('[AW]ActorService sendCode');
    return this.messenger.sendCode(code, (function(_this) {
      return function(state) {
        console.log('[AW]ActorService sendCode: state:', state);
        if (state === 'logged_in') {
          return _this.setLoggedIn();
        }
      };
    })(this), function(tag, message, canTryAgain, state) {
      return console.log('[AW]ActorService sendCode: error');
    });
  };

  ActorService.prototype.getDialogs = function(callback) {
    console.log('[AW]ActorService getDialogs');
    return this.messenger.bindDialogs(function(items) {
      return callback(items);
    });
  };

  ActorService.prototype.closeConversation = function(peer) {
    console.log('[AW]ActorService closeConversation');
    this.messenger.onConversationClosed(peer);
    return this.$rootScope.$broadcast('closeConversation', peer);
  };

  ActorService.prototype.openConversation = function(peer) {
    console.log('[AW]ActorService openConversation', peer);
    this.messenger.getUid();
    this.messenger.onConversationOpen(peer);
    return this.$rootScope.$broadcast('openConversation', peer);
  };

  ActorService.prototype.bindChat = function(peer, render, callback) {
    console.log('[AW]ActorService bindChat');
    return this.messenger.bindChat(function(peer, render) {
      return callback(items);
    });
  };

  ActorService.prototype.getMessages = function(callback) {};

  return ActorService;

})();

ActorService.$inject = ['$rootScope', '$sessionStorage'];

angular.module('actorWeb').service('actorService', ActorService);

var LoginController;

LoginController = (function() {
  function LoginController(actorService) {
    this.actorService = actorService;
    console.log('[AW]LoginController constructor');
  }

  LoginController.prototype.isCodeRequested = false;

  LoginController.prototype.allow = false;

  LoginController.prototype.requestCode = function(phone) {
    console.log('[AW]LoginController requestCode');
    this.actorService.requestSms(phone);
    return this.isCodeRequested = true;
  };

  LoginController.prototype.checkCode = function(code) {
    console.log('[AW]LoginController checkCode');
    return this.actorService.sendCode(code);
  };

  return LoginController;

})();

LoginController.$inject = ['actorService'];

angular.module('actorWeb').controller('loginController', LoginController);

var MainController;

MainController = (function() {
  function MainController($mdSidenav, $mdMedia, $mdBottomSheet, actorService) {
    this.$mdSidenav = $mdSidenav;
    this.$mdMedia = $mdMedia;
    this.$mdBottomSheet = $mdBottomSheet;
    this.actorService = actorService;
    console.log('[AW]MainController constructor');
  }

  MainController.prototype.showBottomSheet = function() {
    console.log('[AW]MainController showBottomSheet');
    return this.$mdBottomSheet.show({
      templateUrl: 'app/shared/bottomSheet/bottomSheetView.html',
      parent: '#content',
      disableParentScroll: false
    });
  };

  MainController.prototype.openSidebar = function() {
    console.log('[AW]MainController openSidebar');
    return this.$mdSidenav('left').toggle();
  };

  return MainController;

})();

MainController.$inject = ['$mdSidenav', '$mdMedia', '$mdBottomSheet', 'actorService'];

angular.module('actorWeb').controller('mainController', MainController);

var ChatsController;

ChatsController = (function() {
  ChatsController.prototype.selectedChat = null;

  function ChatsController($rootScope, actorService) {
    this.$rootScope = $rootScope;
    this.actorService = actorService;
    console.log('[AW]ChatsController constructor');
    this.$rootScope.$on('actorReady', (function(_this) {
      return function() {
        return _this.getChats();
      };
    })(this));
  }

  ChatsController.prototype.getChats = function() {
    console.log('[AW]ChatsController getChats');
    return this.actorService.getDialogs((function(_this) {
      return function(items) {
        return _this.list = items;
      };
    })(this));
  };

  ChatsController.prototype.selectChat = function(chat) {
    console.log('[AW]ChatsController selectChat');
    if (this.selectedChat) {
      this.actorService.closeConversation(this.selectedChat);
    }
    this.selectedChat = chat;
    return this.actorService.openConversation(this.selectedChat);
  };

  return ChatsController;

})();

ChatsController.$inject = ['$rootScope', 'actorService'];

angular.module('actorWeb').controller('chatsController', ChatsController);

var MessagesController;

MessagesController = (function() {
  MessagesController.prototype.list = null;

  function MessagesController($rootScope, actorService) {
    this.$rootScope = $rootScope;
    this.actorService = actorService;
    console.log('[AW]MessagesController constructor');
    this.$rootScope.$on('openConversation', (function(_this) {
      return function(event, args) {
        return _this.getMessages(args);
      };
    })(this));
  }

  MessagesController.prototype.getMessages = function(peer) {
    return console.log('[AW]MessagesController getMessages', peer);
  };

  MessagesController.prototype.renderMessages = function() {
    return console.log('[AW]MessagesController renderMessages');
  };

  return MessagesController;

})();

MessagesController.$inject = ['$rootScope', 'actorService'];

angular.module('actorWeb').controller('messagesController', MessagesController);



//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5jb2ZmZWUiLCJhcHAuY29uZmlnLmNvZmZlZSIsImFwcC5ydW4uY29mZmVlIiwic2VydmljZXMvYWN0b3JTZXJ2aWNlLmNvZmZlZSIsImNvbXBvbmVudHMvbG9naW4vbG9naW5Db250cm9sbGVyLmNvZmZlZSIsImNvbXBvbmVudHMvbWFpbi9tYWluQ29udHJvbGxlci5jb2ZmZWUiLCJzaGFyZWQvY2hhdHMvY2hhdHNDb250cm9sbGVyLmNvZmZlZSIsInNoYXJlZC9tZXNzYWdlcy9tZXNzYWdlc0NvbnRyb2xsZXIuY29mZmVlIiwic2hhcmVkL3NpZGViYXIvc2lkZWJhckNvbnRyb2xsZXIuY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQ0UsQ0FBQyxNQURILENBQ1UsVUFEVixFQUNzQixDQUNsQixXQURrQixFQUVsQixZQUZrQixFQUdsQixXQUhrQixDQUR0QixDQUFBLENBQUE7O0FDQUEsSUFBQSxXQUFBOztBQUFBO0FBQ2UsRUFBQSxxQkFBQyxjQUFELEVBQWlCLGtCQUFqQixHQUFBO0FBQ1gsSUFBQSxjQUNFLENBQUMsS0FESCxDQUNTLE1BRFQsRUFFSTtBQUFBLE1BQUEsR0FBQSxFQUFLLEdBQUw7QUFBQSxNQUNBLEtBQUEsRUFDRTtBQUFBLFFBQUEsU0FBQSxFQUFXO0FBQUEsVUFBQSxXQUFBLEVBQWEsNENBQWI7U0FBWDtBQUFBLFFBQ0EsU0FBQSxFQUFXO0FBQUEsVUFBQSxXQUFBLEVBQWEsNENBQWI7U0FEWDtBQUFBLFFBRUEsU0FBQSxFQUFXO0FBQUEsVUFBQSxXQUFBLEVBQWEsMkNBQWI7U0FGWDtPQUZGO0tBRkosQ0FRRSxDQUFDLEtBUkgsQ0FRUyxPQVJULEVBU0k7QUFBQSxNQUFBLEdBQUEsRUFBSyxRQUFMO0FBQUEsTUFDQSxJQUFBLEVBQ0U7QUFBQSxRQUFBLE9BQUEsRUFBUyxJQUFUO09BRkY7QUFBQSxNQUdBLEtBQUEsRUFDRTtBQUFBLFFBQUEsU0FBQSxFQUFXO0FBQUEsVUFBQSxXQUFBLEVBQWEscUNB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QUE7O0FDQUEiLCJmaWxlIjoiYXBwLmpzIiwic291cmNlc0NvbnRlbnQiOlsiYW5ndWxhclxuICAubW9kdWxlICdhY3RvcldlYicsIFtcbiAgICAndWkucm91dGVyJ1xuICAgICduZ01hdGVyaWFsJ1xuICAgICduZ1N0b3JhZ2UnXG4gIF1cbiIsImNsYXNzIEFjdG9yQ29uZmlnXG4gIGNvbnN0cnVjdG9yOiAoJHN0YXRlUHJvdmlkZXIsICR1cmxSb3V0ZXJQcm92aWRlcikgLT5cbiAgICAkc3RhdGVQcm92aWRlclxuICAgICAgLnN0YXRlICdob21lJyxcbiAgICAgICAgdXJsOiAnLydcbiAgICAgICAgdmlld3M6XG4gICAgICAgICAgJ3NpZGViYXInOiB0ZW1wbGF0ZVVybDogJ2FwcC9zaGFyZWQvc2lkZWJhci9zaWRlYmFyRGVmYXVsdFZpZXcuaHRtbCdcbiAgICAgICAgICAndG9vbGJhcic6IHRlbXBsYXRlVXJsOiAnYXBwL3NoYXJlZC90b29sYmFyL3Rvb2xiYXJEZWZhdWx0Vmlldy5odG1sJ1xuICAgICAgICAgICdjb250ZW50JzogdGVtcGxhdGVVcmw6ICdhcHAvc2hhcmVkL21lc3NhZ2VzL21lc3NhZ2VzTGlzdFZpZXcuaHRtbCdcblxuICAgICAgLnN0YXRlICdsb2dpbicsXG4gICAgICAgIHVybDogJy9sb2dpbidcbiAgICAgICAgZGF0YTpcbiAgICAgICAgICBub0xvZ2luOiB0cnVlXG4gICAgICAgIHZpZXdzOlxuICAgICAgICAgICdjb250ZW50JzogdGVtcGxhdGVVcmw6ICdhcHAvY29tcG9uZW50cy9sb2dpbi9sb2dpblZpZXcuaHRtbCdcblxuICAgICR1cmxSb3V0ZXJQcm92aWRlclxuICAgICAgLm90aGVyd2lzZSAnLydcblxuQWN0b3JDb25maWcuJGluamVjdCA9IFsnJHN0YXRlUHJvdmlkZXInLCAnJHVybFJvdXRlclByb3ZpZGVyJ11cblxuYW5ndWxhclxuICAubW9kdWxlICdhY3RvcldlYidcbiAgLmNvbmZpZyBBY3RvckNvbmZpZ1xuIiwiY2xhc3MgQWN0b3JSdW5cbiAgY29uc3RydWN0b3I6ICgkcm9vdFNjb3BlLCAkc3RhdGUsICRzdGF0ZVBhcmFtcywgYWN0b3JTZXJ2aWNlKSAtPlxuICAgIGNvbnNvbGUubG9nICdbQVddUnVuJ1xuICAgICRyb290U2NvcGUuJHN0YXRlID0gJHN0YXRlXG4gICAgJHJvb3RTY29wZS4kc3RhdGVQYXJhbXMgPSAkc3RhdGVQYXJhbXNcblxuICAgICRyb290U2NvcGUuaXNMb2dnZWRJbiA9IG51bGxcbiAgICAkcm9vdFNjb3BlLiRvbiAnJHN0YXRlQ2hhbmdlU3RhcnQnLCAoZXZlbnQsIHRvU3RhdGUsIHRvUGFyYW1zLCBmcm9tU3RhdGUsIGZyb21QYXJhbXMpIC0+XG4gICAgICBhY3RvclNlcnZpY2UuY2hlY2tBY2Nlc3MoZXZlbnQsIHRvU3RhdGUsIHRvUGFyYW1zLCBmcm9tU3RhdGUsIGZyb21QYXJhbXMpXG5cbkFjdG9yUnVuLiRpbmplY3QgPSBbJyRyb290U2NvcGUnLCAnJHN0YXRlJywgJyRzdGF0ZVBhcmFtcycsICdhY3RvclNlcnZpY2UnXVxuXG5hbmd1bGFyXG4gIC5tb2R1bGUgJ2FjdG9yV2ViJ1xuICAucnVuIEFjdG9yUnVuXG4iLCJjbGFzcyBBY3RvclNlcnZpY2VcbiAgbWVzc2VuZ2VyOiBudWxsXG5cbiAgY29uc3RydWN0b3I6IChAJHJvb3RTY29wZSwgQCRzZXNzaW9uU3RvcmFnZSkgLT5cbiAgICBjb25zb2xlLmxvZyAnW0FXXUFjdG9yU2VydmljZSBjb25zdHJ1Y3RvcidcbiAgICBAaXNMb2dnZWRJbiA9IEAkc2Vzc2lvblN0b3JhZ2UuaXNMb2dnZWRJblxuICAgIHdpbmRvdy5qc0FwcExvYWRlZCA9ID0+XG4gICAgICBAbWVzc2VuZ2VyID0gbmV3IGFjdG9yLkFjdG9yQXBwXG4gICAgICBAdWlkID0gQG1lc3Nlbmdlci5nZXRVaWQoKVxuICAgICAgQCRyb290U2NvcGUuJGJyb2FkY2FzdCAnYWN0b3JSZWFkeSdcblxuXG4gIGNoZWNrQWNjZXNzOiAoZXZlbnQsIHRvU3RhdGUsIHRvUGFyYW1zLCBmcm9tU3RhdGUsIGZyb21QYXJhbXMpIC0+XG4gICAgaWYgdG9TdGF0ZS5kYXRhICE9IHVuZGVmaW5lZFxuICAgICAgaWYgdG9TdGF0ZS5kYXRhLm5vTG9naW4gIT0gdW5kZWZpbmVkICYmIHRvU3RhdGUuZGF0YS5ub0xvZ2luXG4gICAgICAgIGNvbnNvbGUubG9nICdbQVddQWN0b3JTZXJ2aWNlIGNoZWNrQWNjZXNzOiBiZWZvcmUgbG9naW4nXG4gICAgICAgIHJldHVyblxuICAgIGVsc2VcbiAgICAgIGlmIEAkc2Vzc2lvblN0b3JhZ2UuaXNMb2dnZWRJblxuICAgICAgICBjb25zb2xlLmxvZyAnW0FXXUFjdG9yU2VydmljZSBjaGVja0FjY2VzczogYXV0aGVudGljYXRlZCdcbiAgICAgICAgQCRyb290U2NvcGUuaXNMb2dnZWRJbiA9IEAkc2Vzc2lvblN0b3JhZ2UuaXNMb2dnZWRJblxuICAgICAgZWxzZVxuICAgICAgICBjb25zb2xlLmxvZyAnW0FXXUFjdG9yU2VydmljZSBjaGVja0FjY2VzczogcmVkaXJlY3QgdG8gbG9naW4nXG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICAgICAgQCRyb290U2NvcGUuJHN0YXRlLmdvKCdsb2dpbicpXG5cbiAgc2V0TG9nZ2VkSW46ICgpID0+XG4gICAgY29uc29sZS5sb2cgJ1tBV11BY3RvclNlcnZpY2Ugc2V0TG9nZ2VkSW4nXG4gICAgQGlzTG9nZ2VkSW4gPSB0cnVlXG4gICAgQCRyb290U2NvcGUuaXNMb2dnZWRJbiA9IHRydWVcbiAgICBAJHNlc3Npb25TdG9yYWdlLmlzTG9nZ2VkSW4gPSB0cnVlXG4gICAgQCRyb290U2NvcGUuJHN0YXRlLmdvKCdob21lJylcbiAgICBAJHJvb3RTY29wZS4kYnJvYWRjYXN0ICdhY3RvckxvZ2dlZEluJ1xuXG4gIHNldExvZ2dlZE91dDogKCkgPT5cbiAgICBjb25zb2xlLmxvZyAnW0FXXUFjdG9yU2VydmljZSBzZXRMb2dnZWRPdXQnXG4gICAgQGlzTG9nZ2VkSW4gPSBmYWxzZVxuICAgIEAkcm9vdFNjb3BlLmlzTG9nZ2VkSW4gPSBmYWxzZVxuICAgIEAkc2Vzc2lvblN0b3JhZ2UuaXNMb2dnZWRJbiA9IGZhbHNlXG4gICAgQCRyb290U2NvcGUuJHN0YXRlLmdvKCdsb2dpbicpXG4gICAgQCRyb290U2NvcGUuJGJyb2FkY2FzdCAnYWN0b3JMb2dnZWRPdXQnXG5cbiAgcmVxdWVzdFNtczogKHBob25lKSAtPlxuICAgIGNvbnNvbGUubG9nICdbQVddQWN0b3JTZXJ2aWNlIHJlcXVlc3RTbXMnXG4gICAgQG1lc3Nlbmdlci5yZXF1ZXN0U21zIHBob25lLnRvU3RyaW5nKCksIChzdGF0ZSkgLT5cbiAgICAgIGNvbnNvbGUubG9nICdbQVddQWN0b3JTZXJ2aWNlIHJlcXVlc3RTbXM6IHN0YXRlOicsIHN0YXRlXG4gICAgLCAodGFnLCBtZXNzYWdlLCBjYW5UcnlBZ2Fpbiwgc3RhdGUpIC0+XG4gICAgICBjb25zb2xlLmxvZyAnW0FXXUFjdG9yU2VydmljZSByZXF1ZXN0U21zOiBlcnJvcidcblxuICBzZW5kQ29kZTogKGNvZGUpIC0+XG4gICAgY29uc29sZS5sb2cgJ1tBV11BY3RvclNlcnZpY2Ugc2VuZENvZGUnXG4gICAgQG1lc3Nlbmdlci5zZW5kQ29kZSBjb2RlLCAoc3RhdGUpID0+XG4gICAgICBjb25zb2xlLmxvZyAnW0FXXUFjdG9yU2VydmljZSBzZW5kQ29kZTogc3RhdGU6Jywgc3RhdGVcbiAgICAgIEBzZXRMb2dnZWRJbigpIGlmIHN0YXRlID09ICdsb2dnZWRfaW4nXG4gICAgLCAodGFnLCBtZXNzYWdlLCBjYW5UcnlBZ2Fpbiwgc3RhdGUpIC0+XG4gICAgICBjb25zb2xlLmxvZyAnW0FXXUFjdG9yU2VydmljZSBzZW5kQ29kZTogZXJyb3InXG5cblxuICBnZXREaWFsb2dzOiAoY2FsbGJhY2spIC0+XG4gICAgY29uc29sZS5sb2cgJ1tBV11BY3RvclNlcnZpY2UgZ2V0RGlhbG9ncydcbiAgICBAbWVzc2VuZ2VyLmJpbmREaWFsb2dzIChpdGVtcykgLT4gY2FsbGJhY2sgaXRlbXNcblxuICBjbG9zZUNvbnZlcnNhdGlvbjogKHBlZXIpIC0+XG4gICAgY29uc29sZS5sb2cgJ1tBV11BY3RvclNlcnZpY2UgY2xvc2VDb252ZXJzYXRpb24nXG4gICAgQG1lc3Nlbmdlci5vbkNvbnZlcnNhdGlvbkNsb3NlZCBwZWVyXG4gICAgQCRyb290U2NvcGUuJGJyb2FkY2FzdCAnY2xvc2VDb252ZXJzYXRpb24nLCBwZWVyXG5cbiAgb3BlbkNvbnZlcnNhdGlvbjogKHBlZXIpIC0+XG4gICAgY29uc29sZS5sb2cgJ1tBV11BY3RvclNlcnZpY2Ugb3BlbkNvbnZlcnNhdGlvbicsIHBlZXJcbiAgICBAbWVzc2VuZ2VyLmdldFVpZCgpXG4gICAgQG1lc3Nlbmdlci5vbkNvbnZlcnNhdGlvbk9wZW4gcGVlclxuICAgIEAkcm9vdFNjb3BlLiRicm9hZGNhc3QgJ29wZW5Db252ZXJzYXRpb24nLCBwZWVyXG5cbiAgYmluZENoYXQ6IChwZWVyLCByZW5kZXIsIGNhbGxiYWNrKSAtPlxuICAgIGNvbnNvbGUubG9nICdbQVddQWN0b3JTZXJ2aWNlIGJpbmRDaGF0JyMsIHBlZXIsIHJlbmRlclxuICAgIEBtZXNzZW5nZXIuYmluZENoYXQgKHBlZXIsIHJlbmRlcikgLT4gY2FsbGJhY2sgaXRlbXNcbiAgICAjIEBtZXNzZW5nZXIuYmluZENoYXQgcGVlciwgcmVuZGVyXG5cbiAgZ2V0TWVzc2FnZXM6IChjYWxsYmFjaykgLT5cblxuXG5BY3RvclNlcnZpY2UuJGluamVjdCA9IFsnJHJvb3RTY29wZScsICckc2Vzc2lvblN0b3JhZ2UnXVxuXG5hbmd1bGFyXG4gIC5tb2R1bGUgJ2FjdG9yV2ViJ1xuICAuc2VydmljZSAnYWN0b3JTZXJ2aWNlJywgQWN0b3JTZXJ2aWNlXG4iLCJjbGFzcyBMb2dpbkNvbnRyb2xsZXJcbiAgY29uc3RydWN0b3I6IChAYWN0b3JTZXJ2aWNlKSAtPlxuICAgIGNvbnNvbGUubG9nICdbQVddTG9naW5Db250cm9sbGVyIGNvbnN0cnVjdG9yJ1xuXG4gIGlzQ29kZVJlcXVlc3RlZDogZmFsc2VcbiAgYWxsb3c6IGZhbHNlXG5cbiAgcmVxdWVzdENvZGU6IChwaG9uZSkgLT5cbiAgICBjb25zb2xlLmxvZyAnW0FXXUxvZ2luQ29udHJvbGxlciByZXF1ZXN0Q29kZSdcbiAgICBAYWN0b3JTZXJ2aWNlLnJlcXVlc3RTbXMgcGhvbmVcbiAgICBAaXNDb2RlUmVxdWVzdGVkID0gdHJ1ZVxuXG4gIGNoZWNrQ29kZTogKGNvZGUpIC0+XG4gICAgY29uc29sZS5sb2cgJ1tBV11Mb2dpbkNvbnRyb2xsZXIgY2hlY2tDb2RlJ1xuICAgIEBhY3RvclNlcnZpY2Uuc2VuZENvZGUgY29kZVxuXG5Mb2dpbkNvbnRyb2xsZXIuJGluamVjdCA9IFsnYWN0b3JTZXJ2aWNlJ11cblxuYW5ndWxhclxuICAubW9kdWxlICdhY3RvcldlYidcbiAgLmNvbnRyb2xsZXIgJ2xvZ2luQ29udHJvbGxlcicsIExvZ2luQ29udHJvbGxlclxuIiwiY2xhc3MgTWFpbkNvbnRyb2xsZXJcbiAgY29uc3RydWN0b3I6IChAJG1kU2lkZW5hdiwgQCRtZE1lZGlhLCBAJG1kQm90dG9tU2hlZXQsIEBhY3RvclNlcnZpY2UpIC0+XG4gICAgY29uc29sZS5sb2cgJ1tBV11NYWluQ29udHJvbGxlciBjb25zdHJ1Y3RvcidcblxuICBzaG93Qm90dG9tU2hlZXQ6IC0+XG4gICAgY29uc29sZS5sb2cgJ1tBV11NYWluQ29udHJvbGxlciBzaG93Qm90dG9tU2hlZXQnXG4gICAgQCRtZEJvdHRvbVNoZWV0LnNob3dcbiAgICAgIHRlbXBsYXRlVXJsOiAnYXBwL3NoYXJlZC9ib3R0b21TaGVldC9ib3R0b21TaGVldFZpZXcuaHRtbCdcbiAgICAgIHBhcmVudDogJyNjb250ZW50J1xuICAgICAgZGlzYWJsZVBhcmVudFNjcm9sbDogZmFsc2VcblxuICBvcGVuU2lkZWJhcjogLT5cbiAgICBjb25zb2xlLmxvZyAnW0FXXU1haW5Db250cm9sbGVyIG9wZW5TaWRlYmFyJ1xuICAgIEAkbWRTaWRlbmF2KCdsZWZ0JykudG9nZ2xlKClcblxuTWFpbkNvbnRyb2xsZXIuJGluamVjdCA9IFsnJG1kU2lkZW5hdicsICckbWRNZWRpYScsICckbWRCb3R0b21TaGVldCcsICdhY3RvclNlcnZpY2UnXVxuXG5hbmd1bGFyXG4gIC5tb2R1bGUgJ2FjdG9yV2ViJ1xuICAuY29udHJvbGxlciAnbWFpbkNvbnRyb2xsZXInLCBNYWluQ29udHJvbGxlclxuIiwiY2xhc3MgQ2hhdHNDb250cm9sbGVyXG4gIHNlbGVjdGVkQ2hhdDogbnVsbFxuXG4gIGNvbnN0cnVjdG9yOiAoQCRyb290U2NvcGUsIEBhY3RvclNlcnZpY2UpIC0+XG4gICAgY29uc29sZS5sb2cgJ1tBV11DaGF0c0NvbnRyb2xsZXIgY29uc3RydWN0b3InXG4gICAgQCRyb290U2NvcGUuJG9uICdhY3RvclJlYWR5JywgPT4gQGdldENoYXRzKClcblxuICBnZXRDaGF0czogLT5cbiAgICBjb25zb2xlLmxvZyAnW0FXXUNoYXRzQ29udHJvbGxlciBnZXRDaGF0cydcbiAgICBAYWN0b3JTZXJ2aWNlLmdldERpYWxvZ3MgKGl0ZW1zKSA9PiBAbGlzdCA9IGl0ZW1zXG4gICAgIyBjb25zb2xlLmxvZyAnW0FXXUNoYXRzQ29udHJvbGxlciBAbGlzdDonLCBAbGlzdFxuXG4gIHNlbGVjdENoYXQ6IChjaGF0KSAtPlxuICAgIGNvbnNvbGUubG9nICdbQVddQ2hhdHNDb250cm9sbGVyIHNlbGVjdENoYXQnXG4gICAgIyBjb25zb2xlLmxvZyAnW0FXXUNoYXRzQ29udHJvbGxlciBAc2VsZWN0ZWRDaGF0JywgQHNlbGVjdGVkQ2hhdFxuICAgIGlmIEBzZWxlY3RlZENoYXRcbiAgICAgIEBhY3RvclNlcnZpY2UuY2xvc2VDb252ZXJzYXRpb24gQHNlbGVjdGVkQ2hhdFxuICAgIEBzZWxlY3RlZENoYXQgPSBjaGF0XG4gICAgQGFjdG9yU2VydmljZS5vcGVuQ29udmVyc2F0aW9uIEBzZWxlY3RlZENoYXRcbiAgICAjIEBhY3RvclNlcnZpY2UuYmluZENoYXQgQHNlbGVjdGVkQ2hhdFxuXG5cblxuQ2hhdHNDb250cm9sbGVyLiRpbmplY3QgPSBbJyRyb290U2NvcGUnLCAnYWN0b3JTZXJ2aWNlJ11cblxuYW5ndWxhclxuICAubW9kdWxlICdhY3RvcldlYidcbiAgLmNvbnRyb2xsZXIgJ2NoYXRzQ29udHJvbGxlcicsIENoYXRzQ29udHJvbGxlclxuIiwiY2xhc3MgTWVzc2FnZXNDb250cm9sbGVyXG4gIGxpc3Q6IG51bGxcblxuICBjb25zdHJ1Y3RvcjogKEAkcm9vdFNjb3BlLCBAYWN0b3JTZXJ2aWNlKSAtPlxuICAgIGNvbnNvbGUubG9nICdbQVddTWVzc2FnZXNDb250cm9sbGVyIGNvbnN0cnVjdG9yJ1xuICAgIEAkcm9vdFNjb3BlLiRvbiAnb3BlbkNvbnZlcnNhdGlvbicsIChldmVudCwgYXJncykgPT5cbiAgICAgICMgQGFjdG9yU2VydmljZS5iaW5kQ2hhdCBhcmdzLCBAcmVuZGVyTWVzc2FnZXNcbiAgICAgIEBnZXRNZXNzYWdlcyhhcmdzKVxuXG4gIGdldE1lc3NhZ2VzOiAocGVlcikgLT5cbiAgICBjb25zb2xlLmxvZyAnW0FXXU1lc3NhZ2VzQ29udHJvbGxlciBnZXRNZXNzYWdlcycsIHBlZXJcbiAgICAjIEBhY3RvclNlcnZpY2UuZ2V0TWVzc2FnZXMgKG1lc3NhZ2VzKSA9PlxuICAgICMgICBAbGlzdCA9IG1lc3NhZ2VzXG4gICAgIyAgIGNvbnNvbGUubG9nIEBsaXN0XG5cbiAgcmVuZGVyTWVzc2FnZXM6IC0+XG4gICAgY29uc29sZS5sb2cgJ1tBV11NZXNzYWdlc0NvbnRyb2xsZXIgcmVuZGVyTWVzc2FnZXMnXG5cbk1lc3NhZ2VzQ29udHJvbGxlci4kaW5qZWN0ID0gWyckcm9vdFNjb3BlJywgJ2FjdG9yU2VydmljZSddXG5cbmFuZ3VsYXJcbiAgLm1vZHVsZSAnYWN0b3JXZWInXG4gIC5jb250cm9sbGVyICdtZXNzYWdlc0NvbnRyb2xsZXInLCBNZXNzYWdlc0NvbnRyb2xsZXJcbiIsIiMgY2xhc3MgU2lkZWJhckNvbnRyb2xsZXJcbiMgICBjb25zdHJ1Y3RvcjogLT5cbiMgICAgIGNvbnNvbGUubG9nICdbQVddU2lkZWJhckNvbnRyb2xsZXIgY29uc3RydWN0b3InXG4jXG4jIGFuZ3VsYXJcbiMgICAubW9kdWxlICdhY3RvcldlYidcbiMgICAuY29udHJvbGxlciAnc2lkZWJhckNvbnRyb2xsZXInLCBTaWRlYmFyQ29udHJvbGxlclxuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
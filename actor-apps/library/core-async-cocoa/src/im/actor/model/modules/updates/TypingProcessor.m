//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: /Users/ex3ndr/Develop/actor-platform/actor-apps/library/core/src/main/java/im/actor/model/modules/updates/TypingProcessor.java
//


#include "J2ObjC_source.h"
#include "im/actor/model/api/Peer.h"
#include "im/actor/model/api/PeerType.h"
#include "im/actor/model/api/TypingType.h"
#include "im/actor/model/droidkit/actors/ActorRef.h"
#include "im/actor/model/modules/BaseModule.h"
#include "im/actor/model/modules/Modules.h"
#include "im/actor/model/modules/typing/TypingActor.h"
#include "im/actor/model/modules/updates/TypingProcessor.h"

@interface ImActorModelModulesUpdatesTypingProcessor () {
 @public
  DKActorRef *typingActor_;
}

@end

J2OBJC_FIELD_SETTER(ImActorModelModulesUpdatesTypingProcessor, typingActor_, DKActorRef *)

@implementation ImActorModelModulesUpdatesTypingProcessor

- (instancetype)initWithImActorModelModulesModules:(ImActorModelModulesModules *)modules {
  ImActorModelModulesUpdatesTypingProcessor_initWithImActorModelModulesModules_(self, modules);
  return self;
}

- (void)onTypingWithAPPeer:(APPeer *)peer
                   withInt:(jint)uid
      withAPTypingTypeEnum:(APTypingTypeEnum *)type {
  if ([((APPeer *) nil_chk(peer)) getType] == APPeerTypeEnum_get_PRIVATE()) {
    [((DKActorRef *) nil_chk(typingActor_)) sendOnceWithId:new_ImActorModelModulesTypingTypingActor_PrivateTyping_initWithInt_withAPTypingTypeEnum_(uid, type)];
  }
  else if ([peer getType] == APPeerTypeEnum_get_GROUP()) {
    [((DKActorRef *) nil_chk(typingActor_)) sendOnceWithId:new_ImActorModelModulesTypingTypingActor_GroupTyping_initWithInt_withInt_withAPTypingTypeEnum_([peer getId], uid, type)];
  }
}

- (void)onMessageWithAPPeer:(APPeer *)peer
                    withInt:(jint)uid {
  if ([((APPeer *) nil_chk(peer)) getType] == APPeerTypeEnum_get_PRIVATE()) {
    [((DKActorRef *) nil_chk(typingActor_)) sendOnceWithId:new_ImActorModelModulesTypingTypingActor_StopTyping_initWithInt_(uid)];
  }
  else if ([peer getType] == APPeerTypeEnum_get_GROUP()) {
    [((DKActorRef *) nil_chk(typingActor_)) sendOnceWithId:new_ImActorModelModulesTypingTypingActor_StopGroupTyping_initWithInt_withInt_([peer getId], uid)];
  }
}

@end

void ImActorModelModulesUpdatesTypingProcessor_initWithImActorModelModulesModules_(ImActorModelModulesUpdatesTypingProcessor *self, ImActorModelModulesModules *modules) {
  (void) ImActorModelModulesBaseModule_initWithImActorModelModulesModules_(self, modules);
  self->typingActor_ = ImActorModelModulesTypingTypingActor_getWithImActorModelModulesModules_(modules);
}

ImActorModelModulesUpdatesTypingProcessor *new_ImActorModelModulesUpdatesTypingProcessor_initWithImActorModelModulesModules_(ImActorModelModulesModules *modules) {
  ImActorModelModulesUpdatesTypingProcessor *self = [ImActorModelModulesUpdatesTypingProcessor alloc];
  ImActorModelModulesUpdatesTypingProcessor_initWithImActorModelModulesModules_(self, modules);
  return self;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(ImActorModelModulesUpdatesTypingProcessor)

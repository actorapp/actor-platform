//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: /Users/ex3ndr/Develop/actor-platform/actor-apps/core/src/main/java/im/actor/model/droidkit/bser/Utils.java
//


#include "IOSClass.h"
#include "IOSPrimitiveArray.h"
#include "J2ObjC_source.h"
#include "im/actor/model/crypto/CryptoUtils.h"
#include "im/actor/model/droidkit/bser/Utils.h"
#include "java/io/IOException.h"
#include "java/lang/Integer.h"

@interface BSUtils ()

- (instancetype)init;

@end

__attribute__((unused)) static void BSUtils_init(BSUtils *self);

__attribute__((unused)) static BSUtils *new_BSUtils_init() NS_RETURNS_RETAINED;

@implementation BSUtils

+ (jint)convertIntWithLong:(jlong)val {
  return BSUtils_convertIntWithLong_(val);
}

+ (NSString *)convertStringWithByteArray:(IOSByteArray *)data {
  return BSUtils_convertStringWithByteArray_(data);
}

+ (NSString *)byteArrayToStringWithByteArray:(IOSByteArray *)data {
  return BSUtils_byteArrayToStringWithByteArray_(data);
}

+ (NSString *)byteArrayToStringCompactWithByteArray:(IOSByteArray *)data {
  return BSUtils_byteArrayToStringCompactWithByteArray_(data);
}

+ (IOSByteArray *)intToBytesWithInt:(jint)v {
  return BSUtils_intToBytesWithInt_(v);
}

+ (jlong)bytesToIntWithByteArray:(IOSByteArray *)data {
  return BSUtils_bytesToIntWithByteArray_(data);
}

+ (IOSByteArray *)longToBytesWithLong:(jlong)v {
  return BSUtils_longToBytesWithLong_(v);
}

+ (jlong)bytesToLongWithByteArray:(IOSByteArray *)data {
  return BSUtils_bytesToLongWithByteArray_(data);
}

- (instancetype)init {
  BSUtils_init(self);
  return self;
}

@end

jint BSUtils_convertIntWithLong_(jlong val) {
  BSUtils_initialize();
  if (val < JavaLangInteger_MIN_VALUE) {
    @throw new_JavaIoIOException_initWithNSString_(@"Too small value");
  }
  else if (val > JavaLangInteger_MAX_VALUE) {
    @throw new_JavaIoIOException_initWithNSString_(@"Too big value");
  }
  return (jint) val;
}

NSString *BSUtils_convertStringWithByteArray_(IOSByteArray *data) {
  BSUtils_initialize();
  if (data == nil) {
    return nil;
  }
  else {
    return [NSString stringWithBytes:data charsetName:@"utf-8"];
  }
}

NSString *BSUtils_byteArrayToStringWithByteArray_(IOSByteArray *data) {
  BSUtils_initialize();
  if (data == nil) {
    return @"null";
  }
  else {
    return AMCryptoUtils_hexWithByteArray_(data);
  }
}

NSString *BSUtils_byteArrayToStringCompactWithByteArray_(IOSByteArray *data) {
  BSUtils_initialize();
  if (data == nil) {
    return @"null";
  }
  else {
    return AMCryptoUtils_hexWithByteArray_(AMCryptoUtils_MD5WithByteArray_(data));
  }
}

IOSByteArray *BSUtils_intToBytesWithInt_(jint v) {
  BSUtils_initialize();
  IOSByteArray *data = [IOSByteArray newArrayWithLength:4];
  jint offset = 0;
  *IOSByteArray_GetRef(data, offset++) = (jbyte) ((RShift32(v, 24)) & (jint) 0xFF);
  *IOSByteArray_GetRef(data, offset++) = (jbyte) ((RShift32(v, 16)) & (jint) 0xFF);
  *IOSByteArray_GetRef(data, offset++) = (jbyte) ((RShift32(v, 8)) & (jint) 0xFF);
  *IOSByteArray_GetRef(data, offset++) = (jbyte) (v & (jint) 0xFF);
  return data;
}

jlong BSUtils_bytesToIntWithByteArray_(IOSByteArray *data) {
  BSUtils_initialize();
  jint offset = 0;
  jint a1 = IOSByteArray_Get(nil_chk(data), offset + 3) & (jint) 0xFF;
  jint a2 = IOSByteArray_Get(data, offset + 2) & (jint) 0xFF;
  jint a3 = IOSByteArray_Get(data, offset + 1) & (jint) 0xFF;
  jint a4 = IOSByteArray_Get(data, offset + 0) & (jint) 0xFF;
  return (a1) + (LShift32(a2, 8)) + (LShift32(a3, 16)) + (LShift32(a4, 24));
}

IOSByteArray *BSUtils_longToBytesWithLong_(jlong v) {
  BSUtils_initialize();
  IOSByteArray *data = [IOSByteArray newArrayWithLength:8];
  jint offset = 0;
  *IOSByteArray_GetRef(data, offset++) = (jbyte) ((RShift64(v, 56)) & (jint) 0xFF);
  *IOSByteArray_GetRef(data, offset++) = (jbyte) ((RShift64(v, 48)) & (jint) 0xFF);
  *IOSByteArray_GetRef(data, offset++) = (jbyte) ((RShift64(v, 40)) & (jint) 0xFF);
  *IOSByteArray_GetRef(data, offset++) = (jbyte) ((RShift64(v, 32)) & (jint) 0xFF);
  *IOSByteArray_GetRef(data, offset++) = (jbyte) ((RShift64(v, 24)) & (jint) 0xFF);
  *IOSByteArray_GetRef(data, offset++) = (jbyte) ((RShift64(v, 16)) & (jint) 0xFF);
  *IOSByteArray_GetRef(data, offset++) = (jbyte) ((RShift64(v, 8)) & (jint) 0xFF);
  *IOSByteArray_GetRef(data, offset++) = (jbyte) (v & (jint) 0xFF);
  return data;
}

jlong BSUtils_bytesToLongWithByteArray_(IOSByteArray *data) {
  BSUtils_initialize();
  jint offset = 0;
  jlong a1 = IOSByteArray_Get(nil_chk(data), offset + 3) & (jint) 0xFF;
  jlong a2 = IOSByteArray_Get(data, offset + 2) & (jint) 0xFF;
  jlong a3 = IOSByteArray_Get(data, offset + 1) & (jint) 0xFF;
  jlong a4 = IOSByteArray_Get(data, offset + 0) & (jint) 0xFF;
  jlong res1 = (a1) + (LShift64(a2, 8)) + (LShift64(a3, 16)) + (LShift64(a4, 24));
  offset += 4;
  jlong b1 = IOSByteArray_Get(data, offset + 3) & (jint) 0xFF;
  jlong b2 = IOSByteArray_Get(data, offset + 2) & (jint) 0xFF;
  jlong b3 = IOSByteArray_Get(data, offset + 1) & (jint) 0xFF;
  jlong b4 = IOSByteArray_Get(data, offset + 0) & (jint) 0xFF;
  jlong res2 = (b1) + (LShift64(b2, 8)) + (LShift64(b3, 16)) + (LShift64(b4, 24));
  offset += 4;
  return res2 + (LShift64(res1, 32));
}

void BSUtils_init(BSUtils *self) {
  (void) NSObject_init(self);
}

BSUtils *new_BSUtils_init() {
  BSUtils *self = [BSUtils alloc];
  BSUtils_init(self);
  return self;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(BSUtils)

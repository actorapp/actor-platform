//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: /Users/ex3ndr/Develop/actor-platform/actor-apps/core/src/main/java/im/actor/model/network/connection/ManagedNetworkProvider.java
//


#include "J2ObjC_source.h"
#include "im/actor/model/network/ConnectionCallback.h"
#include "im/actor/model/network/ConnectionEndpoint.h"
#include "im/actor/model/network/CreateConnectionCallback.h"
#include "im/actor/model/network/connection/AsyncConnectionFactory.h"
#include "im/actor/model/network/connection/ManagedConnection.h"
#include "im/actor/model/network/connection/ManagedConnectionCreateCallback.h"
#include "im/actor/model/network/connection/ManagedNetworkProvider.h"
#include "java/util/ArrayList.h"

@interface AMManagedNetworkProvider () {
 @public
  id<AMAsyncConnectionFactory> factory_;
  JavaUtilArrayList *pendingConnections_;
}

@end

J2OBJC_FIELD_SETTER(AMManagedNetworkProvider, factory_, id<AMAsyncConnectionFactory>)
J2OBJC_FIELD_SETTER(AMManagedNetworkProvider, pendingConnections_, JavaUtilArrayList *)

@interface AMManagedNetworkProvider_$1 : NSObject < AMManagedConnectionCreateCallback > {
 @public
  AMManagedNetworkProvider *this$0_;
  id<AMCreateConnectionCallback> val$createCallback_;
}

- (void)onConnectionCreated:(AMManagedConnection *)connection;

- (void)onConnectionCreateError:(AMManagedConnection *)connection;

- (instancetype)initWithAMManagedNetworkProvider:(AMManagedNetworkProvider *)outer$
                  withAMCreateConnectionCallback:(id<AMCreateConnectionCallback>)capture$0;

@end

J2OBJC_EMPTY_STATIC_INIT(AMManagedNetworkProvider_$1)

J2OBJC_FIELD_SETTER(AMManagedNetworkProvider_$1, this$0_, AMManagedNetworkProvider *)
J2OBJC_FIELD_SETTER(AMManagedNetworkProvider_$1, val$createCallback_, id<AMCreateConnectionCallback>)

__attribute__((unused)) static void AMManagedNetworkProvider_$1_initWithAMManagedNetworkProvider_withAMCreateConnectionCallback_(AMManagedNetworkProvider_$1 *self, AMManagedNetworkProvider *outer$, id<AMCreateConnectionCallback> capture$0);

__attribute__((unused)) static AMManagedNetworkProvider_$1 *new_AMManagedNetworkProvider_$1_initWithAMManagedNetworkProvider_withAMCreateConnectionCallback_(AMManagedNetworkProvider *outer$, id<AMCreateConnectionCallback> capture$0) NS_RETURNS_RETAINED;

J2OBJC_TYPE_LITERAL_HEADER(AMManagedNetworkProvider_$1)

@implementation AMManagedNetworkProvider

- (instancetype)initWithFactory:(id<AMAsyncConnectionFactory>)factory {
  AMManagedNetworkProvider_initWithFactory_(self, factory);
  return self;
}

- (void)createConnectionWithId:(jint)connectionId
                 withMTVersion:(jint)mtprotoVersion
                  withApiMajor:(jint)apiMajorVersion
                  withApiMinor:(jint)apiMinorVersion
                  withEndpoint:(AMConnectionEndpoint *)endpoint
                  withCallback:(id<AMConnectionCallback>)callback
            withCreateCallback:(id<AMCreateConnectionCallback>)createCallback {
  AMManagedConnection *managedConnection = new_AMManagedConnection_initWithInt_withInt_withInt_withInt_withAMConnectionEndpoint_withAMConnectionCallback_withAMManagedConnectionCreateCallback_withAMAsyncConnectionFactory_(connectionId, mtprotoVersion, apiMajorVersion, apiMinorVersion, endpoint, callback, new_AMManagedNetworkProvider_$1_initWithAMManagedNetworkProvider_withAMCreateConnectionCallback_(self, createCallback), factory_);
  @synchronized(pendingConnections_) {
    [((JavaUtilArrayList *) nil_chk(pendingConnections_)) addWithId:managedConnection];
  }
}

@end

void AMManagedNetworkProvider_initWithFactory_(AMManagedNetworkProvider *self, id<AMAsyncConnectionFactory> factory) {
  (void) NSObject_init(self);
  self->pendingConnections_ = new_JavaUtilArrayList_init();
  self->factory_ = factory;
}

AMManagedNetworkProvider *new_AMManagedNetworkProvider_initWithFactory_(id<AMAsyncConnectionFactory> factory) {
  AMManagedNetworkProvider *self = [AMManagedNetworkProvider alloc];
  AMManagedNetworkProvider_initWithFactory_(self, factory);
  return self;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(AMManagedNetworkProvider)

@implementation AMManagedNetworkProvider_$1

- (void)onConnectionCreated:(AMManagedConnection *)connection {
  [((id<AMCreateConnectionCallback>) nil_chk(val$createCallback_)) onConnectionCreatedWithConnection:connection];
  @synchronized(this$0_->pendingConnections_) {
    [((JavaUtilArrayList *) nil_chk(this$0_->pendingConnections_)) removeWithId:connection];
  }
}

- (void)onConnectionCreateError:(AMManagedConnection *)connection {
  [((id<AMCreateConnectionCallback>) nil_chk(val$createCallback_)) onConnectionCreateError];
  @synchronized(this$0_->pendingConnections_) {
    [((JavaUtilArrayList *) nil_chk(this$0_->pendingConnections_)) removeWithId:connection];
  }
}

- (instancetype)initWithAMManagedNetworkProvider:(AMManagedNetworkProvider *)outer$
                  withAMCreateConnectionCallback:(id<AMCreateConnectionCallback>)capture$0 {
  AMManagedNetworkProvider_$1_initWithAMManagedNetworkProvider_withAMCreateConnectionCallback_(self, outer$, capture$0);
  return self;
}

@end

void AMManagedNetworkProvider_$1_initWithAMManagedNetworkProvider_withAMCreateConnectionCallback_(AMManagedNetworkProvider_$1 *self, AMManagedNetworkProvider *outer$, id<AMCreateConnectionCallback> capture$0) {
  self->this$0_ = outer$;
  self->val$createCallback_ = capture$0;
  (void) NSObject_init(self);
}

AMManagedNetworkProvider_$1 *new_AMManagedNetworkProvider_$1_initWithAMManagedNetworkProvider_withAMCreateConnectionCallback_(AMManagedNetworkProvider *outer$, id<AMCreateConnectionCallback> capture$0) {
  AMManagedNetworkProvider_$1 *self = [AMManagedNetworkProvider_$1 alloc];
  AMManagedNetworkProvider_$1_initWithAMManagedNetworkProvider_withAMCreateConnectionCallback_(self, outer$, capture$0);
  return self;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(AMManagedNetworkProvider_$1)

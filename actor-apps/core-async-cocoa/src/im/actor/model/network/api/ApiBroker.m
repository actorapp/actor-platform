//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: /Users/ex3ndr/Develop/actor-proprietary/actor-apps/core/src/main/java/im/actor/model/network/api/ApiBroker.java
//


#include "IOSClass.h"
#include "IOSPrimitiveArray.h"
#include "J2ObjC_source.h"
#include "im/actor/model/NetworkProvider.h"
#include "im/actor/model/api/parser/RpcParser.h"
#include "im/actor/model/droidkit/actors/Actor.h"
#include "im/actor/model/droidkit/actors/ActorCreator.h"
#include "im/actor/model/droidkit/actors/ActorRef.h"
#include "im/actor/model/droidkit/actors/ActorSystem.h"
#include "im/actor/model/droidkit/actors/Environment.h"
#include "im/actor/model/droidkit/actors/Props.h"
#include "im/actor/model/log/Log.h"
#include "im/actor/model/modules/utils/RandomUtils.h"
#include "im/actor/model/network/ActorApiCallback.h"
#include "im/actor/model/network/AuthKeyStorage.h"
#include "im/actor/model/network/Endpoints.h"
#include "im/actor/model/network/NetworkState.h"
#include "im/actor/model/network/RpcCallback.h"
#include "im/actor/model/network/RpcException.h"
#include "im/actor/model/network/RpcInternalException.h"
#include "im/actor/model/network/api/ApiBroker.h"
#include "im/actor/model/network/mtp/AuthIdRetriever.h"
#include "im/actor/model/network/mtp/MTProto.h"
#include "im/actor/model/network/mtp/MTProtoCallback.h"
#include "im/actor/model/network/mtp/entity/ProtoSerializer.h"
#include "im/actor/model/network/mtp/entity/ProtoStruct.h"
#include "im/actor/model/network/mtp/entity/rpc/Push.h"
#include "im/actor/model/network/mtp/entity/rpc/RpcError.h"
#include "im/actor/model/network/mtp/entity/rpc/RpcFloodWait.h"
#include "im/actor/model/network/mtp/entity/rpc/RpcInternalError.h"
#include "im/actor/model/network/mtp/entity/rpc/RpcOk.h"
#include "im/actor/model/network/mtp/entity/rpc/RpcRequest.h"
#include "im/actor/model/network/parser/Request.h"
#include "im/actor/model/network/parser/Response.h"
#include "im/actor/model/network/parser/RpcScope.h"
#include "im/actor/model/util/AtomicIntegerCompat.h"
#include "im/actor/model/util/AtomicLongCompat.h"
#include "im/actor/model/util/ExponentialBackoff.h"
#include "java/io/IOException.h"
#include "java/lang/Long.h"
#include "java/util/Collection.h"
#include "java/util/HashMap.h"

@interface ImActorModelNetworkApiApiBroker () {
 @public
  AMEndpoints *endpoints_;
  id<AMAuthKeyStorage> keyStorage_;
  id<AMActorApiCallback> callback_;
  jboolean isEnableLog_;
  jint minDelay_;
  jint maxDelay_;
  jint maxFailureCount_;
  JavaUtilHashMap *requests_;
  JavaUtilHashMap *idMap_;
  jlong currentAuthId_;
  MTMTProto *proto_;
  id<AMNetworkProvider> networkProvider_;
  AMExponentialBackoff *authIdBackOff_;
}

- (void)onNetworkChangedWithAMNetworkStateEnum:(AMNetworkStateEnum *)state;

- (void)forceNetworkCheck;

- (void)onNewSessionCreatedWithLong:(jlong)authId;

- (void)onAuthIdInvalidatedWithLong:(jlong)authId;

- (void)requestAuthId;

- (void)createMtProtoWithLong:(jlong)key;

- (void)performRequestWithLong:(jlong)randomId
                 withAPRequest:(APRequest *)message
             withAMRpcCallback:(id<AMRpcCallback>)callback;

- (void)processResponseWithLong:(jlong)authId
                       withLong:(jlong)mid
                  withByteArray:(IOSByteArray *)content;

- (void)forceResendWithLong:(jlong)randomId;

- (void)cancelRequestWithLong:(jlong)randomId;

- (void)processUpdateWithLong:(jlong)authId
                withByteArray:(IOSByteArray *)content;

@end

J2OBJC_FIELD_SETTER(ImActorModelNetworkApiApiBroker, endpoints_, AMEndpoints *)
J2OBJC_FIELD_SETTER(ImActorModelNetworkApiApiBroker, keyStorage_, id<AMAuthKeyStorage>)
J2OBJC_FIELD_SETTER(ImActorModelNetworkApiApiBroker, callback_, id<AMActorApiCallback>)
J2OBJC_FIELD_SETTER(ImActorModelNetworkApiApiBroker, requests_, JavaUtilHashMap *)
J2OBJC_FIELD_SETTER(ImActorModelNetworkApiApiBroker, idMap_, JavaUtilHashMap *)
J2OBJC_FIELD_SETTER(ImActorModelNetworkApiApiBroker, proto_, MTMTProto *)
J2OBJC_FIELD_SETTER(ImActorModelNetworkApiApiBroker, networkProvider_, id<AMNetworkProvider>)
J2OBJC_FIELD_SETTER(ImActorModelNetworkApiApiBroker, authIdBackOff_, AMExponentialBackoff *)

static NSString *ImActorModelNetworkApiApiBroker_TAG_ = @"ApiBroker";
J2OBJC_STATIC_FIELD_GETTER(ImActorModelNetworkApiApiBroker, TAG_, NSString *)

static AMAtomicLongCompat *ImActorModelNetworkApiApiBroker_NEXT_RPC_ID_;
J2OBJC_STATIC_FIELD_GETTER(ImActorModelNetworkApiApiBroker, NEXT_RPC_ID_, AMAtomicLongCompat *)

static AMAtomicIntegerCompat *ImActorModelNetworkApiApiBroker_NEXT_PROTO_ID_;
J2OBJC_STATIC_FIELD_GETTER(ImActorModelNetworkApiApiBroker, NEXT_PROTO_ID_, AMAtomicIntegerCompat *)

__attribute__((unused)) static void ImActorModelNetworkApiApiBroker_onNetworkChangedWithAMNetworkStateEnum_(ImActorModelNetworkApiApiBroker *self, AMNetworkStateEnum *state);

__attribute__((unused)) static void ImActorModelNetworkApiApiBroker_forceNetworkCheck(ImActorModelNetworkApiApiBroker *self);

__attribute__((unused)) static void ImActorModelNetworkApiApiBroker_onNewSessionCreatedWithLong_(ImActorModelNetworkApiApiBroker *self, jlong authId);

__attribute__((unused)) static void ImActorModelNetworkApiApiBroker_onAuthIdInvalidatedWithLong_(ImActorModelNetworkApiApiBroker *self, jlong authId);

__attribute__((unused)) static void ImActorModelNetworkApiApiBroker_requestAuthId(ImActorModelNetworkApiApiBroker *self);

__attribute__((unused)) static void ImActorModelNetworkApiApiBroker_createMtProtoWithLong_(ImActorModelNetworkApiApiBroker *self, jlong key);

__attribute__((unused)) static void ImActorModelNetworkApiApiBroker_performRequestWithLong_withAPRequest_withAMRpcCallback_(ImActorModelNetworkApiApiBroker *self, jlong randomId, APRequest *message, id<AMRpcCallback> callback);

__attribute__((unused)) static void ImActorModelNetworkApiApiBroker_processResponseWithLong_withLong_withByteArray_(ImActorModelNetworkApiApiBroker *self, jlong authId, jlong mid, IOSByteArray *content);

__attribute__((unused)) static void ImActorModelNetworkApiApiBroker_forceResendWithLong_(ImActorModelNetworkApiApiBroker *self, jlong randomId);

__attribute__((unused)) static void ImActorModelNetworkApiApiBroker_cancelRequestWithLong_(ImActorModelNetworkApiApiBroker *self, jlong randomId);

__attribute__((unused)) static void ImActorModelNetworkApiApiBroker_processUpdateWithLong_withByteArray_(ImActorModelNetworkApiApiBroker *self, jlong authId, IOSByteArray *content);

@interface ImActorModelNetworkApiApiBroker_PerformRequest () {
 @public
  APRequest *message_;
  id<AMRpcCallback> callback_;
}

@end

J2OBJC_FIELD_SETTER(ImActorModelNetworkApiApiBroker_PerformRequest, message_, APRequest *)
J2OBJC_FIELD_SETTER(ImActorModelNetworkApiApiBroker_PerformRequest, callback_, id<AMRpcCallback>)

@interface ImActorModelNetworkApiApiBroker_CancelRequest () {
 @public
  jlong randomId_;
}

@end

@interface ImActorModelNetworkApiApiBroker_NetworkChanged () {
 @public
  AMNetworkStateEnum *state_;
}

@end

J2OBJC_FIELD_SETTER(ImActorModelNetworkApiApiBroker_NetworkChanged, state_, AMNetworkStateEnum *)

@interface ImActorModelNetworkApiApiBroker_RequestAuthId : NSObject

- (instancetype)initWithImActorModelNetworkApiApiBroker:(ImActorModelNetworkApiApiBroker *)outer$;

@end

J2OBJC_EMPTY_STATIC_INIT(ImActorModelNetworkApiApiBroker_RequestAuthId)

__attribute__((unused)) static void ImActorModelNetworkApiApiBroker_RequestAuthId_initWithImActorModelNetworkApiApiBroker_(ImActorModelNetworkApiApiBroker_RequestAuthId *self, ImActorModelNetworkApiApiBroker *outer$);

__attribute__((unused)) static ImActorModelNetworkApiApiBroker_RequestAuthId *new_ImActorModelNetworkApiApiBroker_RequestAuthId_initWithImActorModelNetworkApiApiBroker_(ImActorModelNetworkApiApiBroker *outer$) NS_RETURNS_RETAINED;

J2OBJC_TYPE_LITERAL_HEADER(ImActorModelNetworkApiApiBroker_RequestAuthId)

@interface ImActorModelNetworkApiApiBroker_InitMTProto : NSObject {
 @public
  jlong authId_;
}

- (instancetype)initWithImActorModelNetworkApiApiBroker:(ImActorModelNetworkApiApiBroker *)outer$
                                               withLong:(jlong)authId;

- (jlong)getAuthId;

@end

J2OBJC_EMPTY_STATIC_INIT(ImActorModelNetworkApiApiBroker_InitMTProto)

__attribute__((unused)) static void ImActorModelNetworkApiApiBroker_InitMTProto_initWithImActorModelNetworkApiApiBroker_withLong_(ImActorModelNetworkApiApiBroker_InitMTProto *self, ImActorModelNetworkApiApiBroker *outer$, jlong authId);

__attribute__((unused)) static ImActorModelNetworkApiApiBroker_InitMTProto *new_ImActorModelNetworkApiApiBroker_InitMTProto_initWithImActorModelNetworkApiApiBroker_withLong_(ImActorModelNetworkApiApiBroker *outer$, jlong authId) NS_RETURNS_RETAINED;

J2OBJC_TYPE_LITERAL_HEADER(ImActorModelNetworkApiApiBroker_InitMTProto)

@interface ImActorModelNetworkApiApiBroker_ProtoResponse : NSObject {
 @public
  jlong authId_;
  jlong responseId_;
  IOSByteArray *data_;
}

- (instancetype)initWithImActorModelNetworkApiApiBroker:(ImActorModelNetworkApiApiBroker *)outer$
                                               withLong:(jlong)authId
                                               withLong:(jlong)responseId
                                          withByteArray:(IOSByteArray *)data;

- (jlong)getAuthId;

- (jlong)getResponseId;

- (IOSByteArray *)getData;

@end

J2OBJC_EMPTY_STATIC_INIT(ImActorModelNetworkApiApiBroker_ProtoResponse)

J2OBJC_FIELD_SETTER(ImActorModelNetworkApiApiBroker_ProtoResponse, data_, IOSByteArray *)

__attribute__((unused)) static void ImActorModelNetworkApiApiBroker_ProtoResponse_initWithImActorModelNetworkApiApiBroker_withLong_withLong_withByteArray_(ImActorModelNetworkApiApiBroker_ProtoResponse *self, ImActorModelNetworkApiApiBroker *outer$, jlong authId, jlong responseId, IOSByteArray *data);

__attribute__((unused)) static ImActorModelNetworkApiApiBroker_ProtoResponse *new_ImActorModelNetworkApiApiBroker_ProtoResponse_initWithImActorModelNetworkApiApiBroker_withLong_withLong_withByteArray_(ImActorModelNetworkApiApiBroker *outer$, jlong authId, jlong responseId, IOSByteArray *data) NS_RETURNS_RETAINED;

J2OBJC_TYPE_LITERAL_HEADER(ImActorModelNetworkApiApiBroker_ProtoResponse)

@interface ImActorModelNetworkApiApiBroker_ProtoUpdate : NSObject {
 @public
  jlong authId_;
  IOSByteArray *data_;
}

- (instancetype)initWithImActorModelNetworkApiApiBroker:(ImActorModelNetworkApiApiBroker *)outer$
                                               withLong:(jlong)authId
                                          withByteArray:(IOSByteArray *)data;

- (jlong)getAuthId;

- (IOSByteArray *)getData;

@end

J2OBJC_EMPTY_STATIC_INIT(ImActorModelNetworkApiApiBroker_ProtoUpdate)

J2OBJC_FIELD_SETTER(ImActorModelNetworkApiApiBroker_ProtoUpdate, data_, IOSByteArray *)

__attribute__((unused)) static void ImActorModelNetworkApiApiBroker_ProtoUpdate_initWithImActorModelNetworkApiApiBroker_withLong_withByteArray_(ImActorModelNetworkApiApiBroker_ProtoUpdate *self, ImActorModelNetworkApiApiBroker *outer$, jlong authId, IOSByteArray *data);

__attribute__((unused)) static ImActorModelNetworkApiApiBroker_ProtoUpdate *new_ImActorModelNetworkApiApiBroker_ProtoUpdate_initWithImActorModelNetworkApiApiBroker_withLong_withByteArray_(ImActorModelNetworkApiApiBroker *outer$, jlong authId, IOSByteArray *data) NS_RETURNS_RETAINED;

J2OBJC_TYPE_LITERAL_HEADER(ImActorModelNetworkApiApiBroker_ProtoUpdate)

@interface ImActorModelNetworkApiApiBroker_ForceResend : NSObject {
 @public
  jlong id__;
}

- (instancetype)initWithImActorModelNetworkApiApiBroker:(ImActorModelNetworkApiApiBroker *)outer$
                                               withLong:(jlong)id_;

- (jlong)getId;

@end

J2OBJC_EMPTY_STATIC_INIT(ImActorModelNetworkApiApiBroker_ForceResend)

__attribute__((unused)) static void ImActorModelNetworkApiApiBroker_ForceResend_initWithImActorModelNetworkApiApiBroker_withLong_(ImActorModelNetworkApiApiBroker_ForceResend *self, ImActorModelNetworkApiApiBroker *outer$, jlong id_);

__attribute__((unused)) static ImActorModelNetworkApiApiBroker_ForceResend *new_ImActorModelNetworkApiApiBroker_ForceResend_initWithImActorModelNetworkApiApiBroker_withLong_(ImActorModelNetworkApiApiBroker *outer$, jlong id_) NS_RETURNS_RETAINED;

J2OBJC_TYPE_LITERAL_HEADER(ImActorModelNetworkApiApiBroker_ForceResend)

@interface ImActorModelNetworkApiApiBroker_RequestHolder : NSObject {
 @public
  jlong requestTime_;
  MTRpcRequest *message_;
  jlong publicId_;
  id<AMRpcCallback> callback_;
  jlong protoId_;
}

- (instancetype)initWithImActorModelNetworkApiApiBroker:(ImActorModelNetworkApiApiBroker *)outer$
                                               withLong:(jlong)requestTime
                                               withLong:(jlong)publicId
                                       withMTRpcRequest:(MTRpcRequest *)message
                                      withAMRpcCallback:(id<AMRpcCallback>)callback;

@end

J2OBJC_EMPTY_STATIC_INIT(ImActorModelNetworkApiApiBroker_RequestHolder)

J2OBJC_FIELD_SETTER(ImActorModelNetworkApiApiBroker_RequestHolder, message_, MTRpcRequest *)
J2OBJC_FIELD_SETTER(ImActorModelNetworkApiApiBroker_RequestHolder, callback_, id<AMRpcCallback>)

__attribute__((unused)) static void ImActorModelNetworkApiApiBroker_RequestHolder_initWithImActorModelNetworkApiApiBroker_withLong_withLong_withMTRpcRequest_withAMRpcCallback_(ImActorModelNetworkApiApiBroker_RequestHolder *self, ImActorModelNetworkApiApiBroker *outer$, jlong requestTime, jlong publicId, MTRpcRequest *message, id<AMRpcCallback> callback);

__attribute__((unused)) static ImActorModelNetworkApiApiBroker_RequestHolder *new_ImActorModelNetworkApiApiBroker_RequestHolder_initWithImActorModelNetworkApiApiBroker_withLong_withLong_withMTRpcRequest_withAMRpcCallback_(ImActorModelNetworkApiApiBroker *outer$, jlong requestTime, jlong publicId, MTRpcRequest *message, id<AMRpcCallback> callback) NS_RETURNS_RETAINED;

J2OBJC_TYPE_LITERAL_HEADER(ImActorModelNetworkApiApiBroker_RequestHolder)

@interface ImActorModelNetworkApiApiBroker_NewSessionCreated : NSObject {
 @public
  jlong authId_;
}

- (instancetype)initWithImActorModelNetworkApiApiBroker:(ImActorModelNetworkApiApiBroker *)outer$
                                               withLong:(jlong)authId;

- (jlong)getAuthId;

@end

J2OBJC_EMPTY_STATIC_INIT(ImActorModelNetworkApiApiBroker_NewSessionCreated)

__attribute__((unused)) static void ImActorModelNetworkApiApiBroker_NewSessionCreated_initWithImActorModelNetworkApiApiBroker_withLong_(ImActorModelNetworkApiApiBroker_NewSessionCreated *self, ImActorModelNetworkApiApiBroker *outer$, jlong authId);

__attribute__((unused)) static ImActorModelNetworkApiApiBroker_NewSessionCreated *new_ImActorModelNetworkApiApiBroker_NewSessionCreated_initWithImActorModelNetworkApiApiBroker_withLong_(ImActorModelNetworkApiApiBroker *outer$, jlong authId) NS_RETURNS_RETAINED;

J2OBJC_TYPE_LITERAL_HEADER(ImActorModelNetworkApiApiBroker_NewSessionCreated)

@interface ImActorModelNetworkApiApiBroker_AuthIdInvalidated : NSObject {
 @public
  jlong authId_;
}

- (instancetype)initWithImActorModelNetworkApiApiBroker:(ImActorModelNetworkApiApiBroker *)outer$
                                               withLong:(jlong)authId;

- (jlong)getAuthId;

@end

J2OBJC_EMPTY_STATIC_INIT(ImActorModelNetworkApiApiBroker_AuthIdInvalidated)

__attribute__((unused)) static void ImActorModelNetworkApiApiBroker_AuthIdInvalidated_initWithImActorModelNetworkApiApiBroker_withLong_(ImActorModelNetworkApiApiBroker_AuthIdInvalidated *self, ImActorModelNetworkApiApiBroker *outer$, jlong authId);

__attribute__((unused)) static ImActorModelNetworkApiApiBroker_AuthIdInvalidated *new_ImActorModelNetworkApiApiBroker_AuthIdInvalidated_initWithImActorModelNetworkApiApiBroker_withLong_(ImActorModelNetworkApiApiBroker *outer$, jlong authId) NS_RETURNS_RETAINED;

J2OBJC_TYPE_LITERAL_HEADER(ImActorModelNetworkApiApiBroker_AuthIdInvalidated)

@interface ImActorModelNetworkApiApiBroker_ConnectionsCountChanged : NSObject {
 @public
  jint count_;
}

- (instancetype)initWithImActorModelNetworkApiApiBroker:(ImActorModelNetworkApiApiBroker *)outer$
                                                withInt:(jint)count;

- (jint)getCount;

@end

J2OBJC_EMPTY_STATIC_INIT(ImActorModelNetworkApiApiBroker_ConnectionsCountChanged)

__attribute__((unused)) static void ImActorModelNetworkApiApiBroker_ConnectionsCountChanged_initWithImActorModelNetworkApiApiBroker_withInt_(ImActorModelNetworkApiApiBroker_ConnectionsCountChanged *self, ImActorModelNetworkApiApiBroker *outer$, jint count);

__attribute__((unused)) static ImActorModelNetworkApiApiBroker_ConnectionsCountChanged *new_ImActorModelNetworkApiApiBroker_ConnectionsCountChanged_initWithImActorModelNetworkApiApiBroker_withInt_(ImActorModelNetworkApiApiBroker *outer$, jint count) NS_RETURNS_RETAINED;

J2OBJC_TYPE_LITERAL_HEADER(ImActorModelNetworkApiApiBroker_ConnectionsCountChanged)

@interface ImActorModelNetworkApiApiBroker_ProtoCallback : NSObject < MTMTProtoCallback > {
 @public
  ImActorModelNetworkApiApiBroker *this$0_;
  jlong authId_;
}

- (instancetype)initWithImActorModelNetworkApiApiBroker:(ImActorModelNetworkApiApiBroker *)outer$
                                               withLong:(jlong)authId;

- (void)onRpcResponseWithLong:(jlong)mid
                withByteArray:(IOSByteArray *)content;

- (void)onUpdateWithByteArray:(IOSByteArray *)content;

- (void)onAuthKeyInvalidatedWithLong:(jlong)authId;

- (void)onSessionCreated;

- (void)onConnectionsCountChangedWithInt:(jint)count;

@end

J2OBJC_EMPTY_STATIC_INIT(ImActorModelNetworkApiApiBroker_ProtoCallback)

J2OBJC_FIELD_SETTER(ImActorModelNetworkApiApiBroker_ProtoCallback, this$0_, ImActorModelNetworkApiApiBroker *)

__attribute__((unused)) static void ImActorModelNetworkApiApiBroker_ProtoCallback_initWithImActorModelNetworkApiApiBroker_withLong_(ImActorModelNetworkApiApiBroker_ProtoCallback *self, ImActorModelNetworkApiApiBroker *outer$, jlong authId);

__attribute__((unused)) static ImActorModelNetworkApiApiBroker_ProtoCallback *new_ImActorModelNetworkApiApiBroker_ProtoCallback_initWithImActorModelNetworkApiApiBroker_withLong_(ImActorModelNetworkApiApiBroker *outer$, jlong authId) NS_RETURNS_RETAINED;

J2OBJC_TYPE_LITERAL_HEADER(ImActorModelNetworkApiApiBroker_ProtoCallback)

@interface ImActorModelNetworkApiApiBroker_$1 : NSObject < DKActorCreator > {
 @public
  AMEndpoints *val$endpoints_;
  id<AMAuthKeyStorage> val$keyStorage_;
  id<AMActorApiCallback> val$callback_;
  id<AMNetworkProvider> val$networkProvider_;
  jboolean val$isEnableLog_;
  jint val$minDelay_;
  jint val$maxDelay_;
  jint val$maxFailureCount_;
}

- (ImActorModelNetworkApiApiBroker *)create;

- (instancetype)initWithAMEndpoints:(AMEndpoints *)capture$0
               withAMAuthKeyStorage:(id<AMAuthKeyStorage>)capture$1
             withAMActorApiCallback:(id<AMActorApiCallback>)capture$2
              withAMNetworkProvider:(id<AMNetworkProvider>)capture$3
                        withBoolean:(jboolean)capture$4
                            withInt:(jint)capture$5
                            withInt:(jint)capture$6
                            withInt:(jint)capture$7;

@end

J2OBJC_EMPTY_STATIC_INIT(ImActorModelNetworkApiApiBroker_$1)

J2OBJC_FIELD_SETTER(ImActorModelNetworkApiApiBroker_$1, val$endpoints_, AMEndpoints *)
J2OBJC_FIELD_SETTER(ImActorModelNetworkApiApiBroker_$1, val$keyStorage_, id<AMAuthKeyStorage>)
J2OBJC_FIELD_SETTER(ImActorModelNetworkApiApiBroker_$1, val$callback_, id<AMActorApiCallback>)
J2OBJC_FIELD_SETTER(ImActorModelNetworkApiApiBroker_$1, val$networkProvider_, id<AMNetworkProvider>)

__attribute__((unused)) static void ImActorModelNetworkApiApiBroker_$1_initWithAMEndpoints_withAMAuthKeyStorage_withAMActorApiCallback_withAMNetworkProvider_withBoolean_withInt_withInt_withInt_(ImActorModelNetworkApiApiBroker_$1 *self, AMEndpoints *capture$0, id<AMAuthKeyStorage> capture$1, id<AMActorApiCallback> capture$2, id<AMNetworkProvider> capture$3, jboolean capture$4, jint capture$5, jint capture$6, jint capture$7);

__attribute__((unused)) static ImActorModelNetworkApiApiBroker_$1 *new_ImActorModelNetworkApiApiBroker_$1_initWithAMEndpoints_withAMAuthKeyStorage_withAMActorApiCallback_withAMNetworkProvider_withBoolean_withInt_withInt_withInt_(AMEndpoints *capture$0, id<AMAuthKeyStorage> capture$1, id<AMActorApiCallback> capture$2, id<AMNetworkProvider> capture$3, jboolean capture$4, jint capture$5, jint capture$6, jint capture$7) NS_RETURNS_RETAINED;

J2OBJC_TYPE_LITERAL_HEADER(ImActorModelNetworkApiApiBroker_$1)

@interface ImActorModelNetworkApiApiBroker_$2 : NSObject < MTAuthIdRetriever_AuthIdCallback > {
 @public
  ImActorModelNetworkApiApiBroker *this$0_;
}

- (void)onSuccessWithLong:(jlong)authId;

- (void)onFailure;

- (instancetype)initWithImActorModelNetworkApiApiBroker:(ImActorModelNetworkApiApiBroker *)outer$;

@end

J2OBJC_EMPTY_STATIC_INIT(ImActorModelNetworkApiApiBroker_$2)

J2OBJC_FIELD_SETTER(ImActorModelNetworkApiApiBroker_$2, this$0_, ImActorModelNetworkApiApiBroker *)

__attribute__((unused)) static void ImActorModelNetworkApiApiBroker_$2_initWithImActorModelNetworkApiApiBroker_(ImActorModelNetworkApiApiBroker_$2 *self, ImActorModelNetworkApiApiBroker *outer$);

__attribute__((unused)) static ImActorModelNetworkApiApiBroker_$2 *new_ImActorModelNetworkApiApiBroker_$2_initWithImActorModelNetworkApiApiBroker_(ImActorModelNetworkApiApiBroker *outer$) NS_RETURNS_RETAINED;

J2OBJC_TYPE_LITERAL_HEADER(ImActorModelNetworkApiApiBroker_$2)

J2OBJC_INITIALIZED_DEFN(ImActorModelNetworkApiApiBroker)

@implementation ImActorModelNetworkApiApiBroker

+ (DKActorRef *)getWithAMEndpoints:(AMEndpoints *)endpoints
              withAMAuthKeyStorage:(id<AMAuthKeyStorage>)keyStorage
            withAMActorApiCallback:(id<AMActorApiCallback>)callback
             withAMNetworkProvider:(id<AMNetworkProvider>)networkProvider
                       withBoolean:(jboolean)isEnableLog
                           withInt:(jint)id_
                           withInt:(jint)minDelay
                           withInt:(jint)maxDelay
                           withInt:(jint)maxFailureCount {
  return ImActorModelNetworkApiApiBroker_getWithAMEndpoints_withAMAuthKeyStorage_withAMActorApiCallback_withAMNetworkProvider_withBoolean_withInt_withInt_withInt_withInt_(endpoints, keyStorage, callback, networkProvider, isEnableLog, id_, minDelay, maxDelay, maxFailureCount);
}

- (instancetype)initWithAMEndpoints:(AMEndpoints *)endpoints
               withAMAuthKeyStorage:(id<AMAuthKeyStorage>)keyStorage
             withAMActorApiCallback:(id<AMActorApiCallback>)callback
              withAMNetworkProvider:(id<AMNetworkProvider>)networkProvider
                        withBoolean:(jboolean)isEnableLog
                            withInt:(jint)minDelay
                            withInt:(jint)maxDelay
                            withInt:(jint)maxFailureCount {
  ImActorModelNetworkApiApiBroker_initWithAMEndpoints_withAMAuthKeyStorage_withAMActorApiCallback_withAMNetworkProvider_withBoolean_withInt_withInt_withInt_(self, endpoints, keyStorage, callback, networkProvider, isEnableLog, minDelay, maxDelay, maxFailureCount);
  return self;
}

- (void)preStart {
  self->currentAuthId_ = [((id<AMAuthKeyStorage>) nil_chk(keyStorage_)) getAuthKey];
  if (currentAuthId_ == 0) {
    [((DKActorRef *) nil_chk([self self__])) sendWithId:new_ImActorModelNetworkApiApiBroker_RequestAuthId_initWithImActorModelNetworkApiApiBroker_(self)];
  }
  else {
    if (isEnableLog_) {
      AMLog_dWithNSString_withNSString_(ImActorModelNetworkApiApiBroker_TAG_, JreStrcat("$J", @"Key loaded: ", currentAuthId_));
    }
    [((DKActorRef *) nil_chk([self self__])) sendWithId:new_ImActorModelNetworkApiApiBroker_InitMTProto_initWithImActorModelNetworkApiApiBroker_withLong_(self, currentAuthId_)];
  }
}

- (void)postStop {
  if (proto_ != nil) {
    [proto_ stopProto];
    proto_ = nil;
  }
}

- (void)onNetworkChangedWithAMNetworkStateEnum:(AMNetworkStateEnum *)state {
  ImActorModelNetworkApiApiBroker_onNetworkChangedWithAMNetworkStateEnum_(self, state);
}

- (void)forceNetworkCheck {
  ImActorModelNetworkApiApiBroker_forceNetworkCheck(self);
}

- (void)onNewSessionCreatedWithLong:(jlong)authId {
  ImActorModelNetworkApiApiBroker_onNewSessionCreatedWithLong_(self, authId);
}

- (void)onAuthIdInvalidatedWithLong:(jlong)authId {
  ImActorModelNetworkApiApiBroker_onAuthIdInvalidatedWithLong_(self, authId);
}

- (void)requestAuthId {
  ImActorModelNetworkApiApiBroker_requestAuthId(self);
}

- (void)createMtProtoWithLong:(jlong)key {
  ImActorModelNetworkApiApiBroker_createMtProtoWithLong_(self, key);
}

- (void)performRequestWithLong:(jlong)randomId
                 withAPRequest:(APRequest *)message
             withAMRpcCallback:(id<AMRpcCallback>)callback {
  ImActorModelNetworkApiApiBroker_performRequestWithLong_withAPRequest_withAMRpcCallback_(self, randomId, message, callback);
}

- (void)processResponseWithLong:(jlong)authId
                       withLong:(jlong)mid
                  withByteArray:(IOSByteArray *)content {
  ImActorModelNetworkApiApiBroker_processResponseWithLong_withLong_withByteArray_(self, authId, mid, content);
}

- (void)forceResendWithLong:(jlong)randomId {
  ImActorModelNetworkApiApiBroker_forceResendWithLong_(self, randomId);
}

- (void)cancelRequestWithLong:(jlong)randomId {
  ImActorModelNetworkApiApiBroker_cancelRequestWithLong_(self, randomId);
}

- (void)processUpdateWithLong:(jlong)authId
                withByteArray:(IOSByteArray *)content {
  ImActorModelNetworkApiApiBroker_processUpdateWithLong_withByteArray_(self, authId, content);
}

- (void)connectionCountChangedWithInt:(jint)count {
  [((id<AMActorApiCallback>) nil_chk(callback_)) onConnectionsChanged:count];
}

- (void)onReceiveWithId:(id)message {
  if ([message isKindOfClass:[ImActorModelNetworkApiApiBroker_RequestAuthId class]]) {
    ImActorModelNetworkApiApiBroker_requestAuthId(self);
  }
  else if ([message isKindOfClass:[ImActorModelNetworkApiApiBroker_InitMTProto class]]) {
    ImActorModelNetworkApiApiBroker_InitMTProto *initMTProto = (ImActorModelNetworkApiApiBroker_InitMTProto *) check_class_cast(message, [ImActorModelNetworkApiApiBroker_InitMTProto class]);
    ImActorModelNetworkApiApiBroker_createMtProtoWithLong_(self, [((ImActorModelNetworkApiApiBroker_InitMTProto *) nil_chk(initMTProto)) getAuthId]);
  }
  else if ([message isKindOfClass:[ImActorModelNetworkApiApiBroker_PerformRequest class]]) {
    ImActorModelNetworkApiApiBroker_PerformRequest *request = (ImActorModelNetworkApiApiBroker_PerformRequest *) check_class_cast(message, [ImActorModelNetworkApiApiBroker_PerformRequest class]);
    ImActorModelNetworkApiApiBroker_performRequestWithLong_withAPRequest_withAMRpcCallback_(self, [((AMAtomicLongCompat *) nil_chk(ImActorModelNetworkApiApiBroker_NEXT_RPC_ID_)) getAndIncrement], [((ImActorModelNetworkApiApiBroker_PerformRequest *) nil_chk(request)) getMessage], [request getCallback]);
  }
  else if ([message isKindOfClass:[ImActorModelNetworkApiApiBroker_CancelRequest class]]) {
    ImActorModelNetworkApiApiBroker_CancelRequest *cancelRequest = (ImActorModelNetworkApiApiBroker_CancelRequest *) check_class_cast(message, [ImActorModelNetworkApiApiBroker_CancelRequest class]);
    ImActorModelNetworkApiApiBroker_cancelRequestWithLong_(self, [((ImActorModelNetworkApiApiBroker_CancelRequest *) nil_chk(cancelRequest)) getRandomId]);
  }
  else if ([message isKindOfClass:[ImActorModelNetworkApiApiBroker_ProtoResponse class]]) {
    ImActorModelNetworkApiApiBroker_ProtoResponse *response = (ImActorModelNetworkApiApiBroker_ProtoResponse *) check_class_cast(message, [ImActorModelNetworkApiApiBroker_ProtoResponse class]);
    ImActorModelNetworkApiApiBroker_processResponseWithLong_withLong_withByteArray_(self, [((ImActorModelNetworkApiApiBroker_ProtoResponse *) nil_chk(response)) getAuthId], [response getResponseId], [response getData]);
  }
  else if ([message isKindOfClass:[ImActorModelNetworkApiApiBroker_ForceResend class]]) {
    ImActorModelNetworkApiApiBroker_ForceResend *forceResend = (ImActorModelNetworkApiApiBroker_ForceResend *) check_class_cast(message, [ImActorModelNetworkApiApiBroker_ForceResend class]);
    ImActorModelNetworkApiApiBroker_forceResendWithLong_(self, [((ImActorModelNetworkApiApiBroker_ForceResend *) nil_chk(forceResend)) getId]);
  }
  else if ([message isKindOfClass:[ImActorModelNetworkApiApiBroker_ProtoUpdate class]]) {
    ImActorModelNetworkApiApiBroker_ProtoUpdate *update = (ImActorModelNetworkApiApiBroker_ProtoUpdate *) check_class_cast(message, [ImActorModelNetworkApiApiBroker_ProtoUpdate class]);
    ImActorModelNetworkApiApiBroker_processUpdateWithLong_withByteArray_(self, [((ImActorModelNetworkApiApiBroker_ProtoUpdate *) nil_chk(update)) getAuthId], [update getData]);
  }
  else if ([message isKindOfClass:[ImActorModelNetworkApiApiBroker_NewSessionCreated class]]) {
    ImActorModelNetworkApiApiBroker_NewSessionCreated *newSessionCreated = (ImActorModelNetworkApiApiBroker_NewSessionCreated *) check_class_cast(message, [ImActorModelNetworkApiApiBroker_NewSessionCreated class]);
    ImActorModelNetworkApiApiBroker_onNewSessionCreatedWithLong_(self, [((ImActorModelNetworkApiApiBroker_NewSessionCreated *) nil_chk(newSessionCreated)) getAuthId]);
  }
  else if ([message isKindOfClass:[ImActorModelNetworkApiApiBroker_AuthIdInvalidated class]]) {
    ImActorModelNetworkApiApiBroker_AuthIdInvalidated *authIdInvalidated = (ImActorModelNetworkApiApiBroker_AuthIdInvalidated *) check_class_cast(message, [ImActorModelNetworkApiApiBroker_AuthIdInvalidated class]);
    ImActorModelNetworkApiApiBroker_onAuthIdInvalidatedWithLong_(self, [((ImActorModelNetworkApiApiBroker_AuthIdInvalidated *) nil_chk(authIdInvalidated)) getAuthId]);
  }
  else if ([message isKindOfClass:[ImActorModelNetworkApiApiBroker_NetworkChanged class]]) {
    ImActorModelNetworkApiApiBroker_NetworkChanged *networkChanged = (ImActorModelNetworkApiApiBroker_NetworkChanged *) check_class_cast(message, [ImActorModelNetworkApiApiBroker_NetworkChanged class]);
    ImActorModelNetworkApiApiBroker_onNetworkChangedWithAMNetworkStateEnum_(self, [((ImActorModelNetworkApiApiBroker_NetworkChanged *) nil_chk(networkChanged)) getState]);
  }
  else if ([message isKindOfClass:[ImActorModelNetworkApiApiBroker_ForceNetworkCheck class]]) {
    ImActorModelNetworkApiApiBroker_forceNetworkCheck(self);
  }
  else if ([message isKindOfClass:[ImActorModelNetworkApiApiBroker_ConnectionsCountChanged class]]) {
    [self connectionCountChangedWithInt:[((ImActorModelNetworkApiApiBroker_ConnectionsCountChanged *) nil_chk(((ImActorModelNetworkApiApiBroker_ConnectionsCountChanged *) check_class_cast(message, [ImActorModelNetworkApiApiBroker_ConnectionsCountChanged class])))) getCount]];
  }
  else {
    [self dropWithId:message];
  }
}

+ (void)initialize {
  if (self == [ImActorModelNetworkApiApiBroker class]) {
    ImActorModelNetworkApiApiBroker_NEXT_RPC_ID_ = DKEnvironment_createAtomicLongWithLong_(1);
    ImActorModelNetworkApiApiBroker_NEXT_PROTO_ID_ = DKEnvironment_createAtomicIntWithInt_(1);
    J2OBJC_SET_INITIALIZED(ImActorModelNetworkApiApiBroker)
  }
}

@end

DKActorRef *ImActorModelNetworkApiApiBroker_getWithAMEndpoints_withAMAuthKeyStorage_withAMActorApiCallback_withAMNetworkProvider_withBoolean_withInt_withInt_withInt_withInt_(AMEndpoints *endpoints, id<AMAuthKeyStorage> keyStorage, id<AMActorApiCallback> callback, id<AMNetworkProvider> networkProvider, jboolean isEnableLog, jint id_, jint minDelay, jint maxDelay, jint maxFailureCount) {
  ImActorModelNetworkApiApiBroker_initialize();
  return [((DKActorSystem *) nil_chk(DKActorSystem_system())) actorOfWithDKProps:DKProps_createWithIOSClass_withDKActorCreator_(ImActorModelNetworkApiApiBroker_class_(), new_ImActorModelNetworkApiApiBroker_$1_initWithAMEndpoints_withAMAuthKeyStorage_withAMActorApiCallback_withAMNetworkProvider_withBoolean_withInt_withInt_withInt_(endpoints, keyStorage, callback, networkProvider, isEnableLog, minDelay, maxDelay, maxFailureCount)) withNSString:JreStrcat("$I", @"api/broker#", id_)];
}

void ImActorModelNetworkApiApiBroker_initWithAMEndpoints_withAMAuthKeyStorage_withAMActorApiCallback_withAMNetworkProvider_withBoolean_withInt_withInt_withInt_(ImActorModelNetworkApiApiBroker *self, AMEndpoints *endpoints, id<AMAuthKeyStorage> keyStorage, id<AMActorApiCallback> callback, id<AMNetworkProvider> networkProvider, jboolean isEnableLog, jint minDelay, jint maxDelay, jint maxFailureCount) {
  (void) DKActor_init(self);
  self->requests_ = new_JavaUtilHashMap_init();
  self->idMap_ = new_JavaUtilHashMap_init();
  self->isEnableLog_ = isEnableLog;
  self->endpoints_ = endpoints;
  self->keyStorage_ = keyStorage;
  self->callback_ = callback;
  self->networkProvider_ = networkProvider;
  self->minDelay_ = minDelay;
  self->maxDelay_ = maxDelay;
  self->maxFailureCount_ = maxFailureCount;
  self->authIdBackOff_ = new_AMExponentialBackoff_initWithInt_withInt_withInt_(minDelay, maxDelay, maxFailureCount);
}

ImActorModelNetworkApiApiBroker *new_ImActorModelNetworkApiApiBroker_initWithAMEndpoints_withAMAuthKeyStorage_withAMActorApiCallback_withAMNetworkProvider_withBoolean_withInt_withInt_withInt_(AMEndpoints *endpoints, id<AMAuthKeyStorage> keyStorage, id<AMActorApiCallback> callback, id<AMNetworkProvider> networkProvider, jboolean isEnableLog, jint minDelay, jint maxDelay, jint maxFailureCount) {
  ImActorModelNetworkApiApiBroker *self = [ImActorModelNetworkApiApiBroker alloc];
  ImActorModelNetworkApiApiBroker_initWithAMEndpoints_withAMAuthKeyStorage_withAMActorApiCallback_withAMNetworkProvider_withBoolean_withInt_withInt_withInt_(self, endpoints, keyStorage, callback, networkProvider, isEnableLog, minDelay, maxDelay, maxFailureCount);
  return self;
}

void ImActorModelNetworkApiApiBroker_onNetworkChangedWithAMNetworkStateEnum_(ImActorModelNetworkApiApiBroker *self, AMNetworkStateEnum *state) {
  if (self->proto_ != nil) {
    [self->proto_ onNetworkChangedWithAMNetworkStateEnum:state];
  }
}

void ImActorModelNetworkApiApiBroker_forceNetworkCheck(ImActorModelNetworkApiApiBroker *self) {
  if (self->proto_ != nil) {
    [self->proto_ forceNetworkCheck];
  }
}

void ImActorModelNetworkApiApiBroker_onNewSessionCreatedWithLong_(ImActorModelNetworkApiApiBroker *self, jlong authId) {
  if (authId != self->currentAuthId_) {
    return;
  }
  AMLog_wWithNSString_withNSString_(ImActorModelNetworkApiApiBroker_TAG_, @"New Session Created");
  [((id<AMActorApiCallback>) nil_chk(self->callback_)) onNewSessionCreated];
}

void ImActorModelNetworkApiApiBroker_onAuthIdInvalidatedWithLong_(ImActorModelNetworkApiApiBroker *self, jlong authId) {
  if (authId != self->currentAuthId_) {
    return;
  }
  AMLog_wWithNSString_withNSString_(ImActorModelNetworkApiApiBroker_TAG_, @"Auth id invalidated");
  [((id<AMAuthKeyStorage>) nil_chk(self->keyStorage_)) saveAuthKey:0];
  self->currentAuthId_ = 0;
  self->proto_ = nil;
  [((id<AMActorApiCallback>) nil_chk(self->callback_)) onAuthIdInvalidated];
  [((DKActorRef *) nil_chk([self self__])) sendWithId:new_ImActorModelNetworkApiApiBroker_RequestAuthId_initWithImActorModelNetworkApiApiBroker_(self)];
}

void ImActorModelNetworkApiApiBroker_requestAuthId(ImActorModelNetworkApiApiBroker *self) {
  AMLog_dWithNSString_withNSString_(ImActorModelNetworkApiApiBroker_TAG_, @"Creating auth key...");
  MTAuthIdRetriever_requestAuthIdWithAMEndpoints_withAMNetworkProvider_withInt_withInt_withInt_withMTAuthIdRetriever_AuthIdCallback_(self->endpoints_, self->networkProvider_, self->minDelay_, self->maxDelay_, self->maxFailureCount_, new_ImActorModelNetworkApiApiBroker_$2_initWithImActorModelNetworkApiApiBroker_(self));
}

void ImActorModelNetworkApiApiBroker_createMtProtoWithLong_(ImActorModelNetworkApiApiBroker *self, jlong key) {
  AMLog_dWithNSString_withNSString_(ImActorModelNetworkApiApiBroker_TAG_, @"Creating proto");
  [((id<AMAuthKeyStorage>) nil_chk(self->keyStorage_)) saveAuthKey:key];
  self->currentAuthId_ = key;
  self->proto_ = new_MTMTProto_initWithLong_withLong_withAMEndpoints_withMTMTProtoCallback_withAMNetworkProvider_withBoolean_withNSString_withInt_withInt_withInt_(key, ImActorModelModulesUtilsRandomUtils_nextRid(), self->endpoints_, new_ImActorModelNetworkApiApiBroker_ProtoCallback_initWithImActorModelNetworkApiApiBroker_withLong_(self, key), self->networkProvider_, self->isEnableLog_, JreStrcat("$$I", [self getPath], @"/proto#", [((AMAtomicIntegerCompat *) nil_chk(ImActorModelNetworkApiApiBroker_NEXT_PROTO_ID_)) incrementAndGet]), self->minDelay_, self->maxDelay_, self->maxFailureCount_);
  for (ImActorModelNetworkApiApiBroker_RequestHolder * __strong holder in nil_chk([((JavaUtilHashMap *) nil_chk(self->requests_)) values])) {
    ((ImActorModelNetworkApiApiBroker_RequestHolder *) nil_chk(holder))->protoId_ = [self->proto_ sendRpcMessageWithMTProtoStruct:holder->message_];
    (void) [((JavaUtilHashMap *) nil_chk(self->idMap_)) putWithId:JavaLangLong_valueOfWithLong_(holder->protoId_) withId:JavaLangLong_valueOfWithLong_(holder->publicId_)];
  }
}

void ImActorModelNetworkApiApiBroker_performRequestWithLong_withAPRequest_withAMRpcCallback_(ImActorModelNetworkApiApiBroker *self, jlong randomId, APRequest *message, id<AMRpcCallback> callback) {
  AMLog_dWithNSString_withNSString_(ImActorModelNetworkApiApiBroker_TAG_, JreStrcat("$J$@", @"-> request#", randomId, @": ", message));
  ImActorModelNetworkApiApiBroker_RequestHolder *holder = new_ImActorModelNetworkApiApiBroker_RequestHolder_initWithImActorModelNetworkApiApiBroker_withLong_withLong_withMTRpcRequest_withAMRpcCallback_(self, DKEnvironment_getCurrentTime(), randomId, new_MTRpcRequest_initWithInt_withByteArray_([((APRequest *) nil_chk(message)) getHeaderKey], [message toByteArray]), callback);
  (void) [((JavaUtilHashMap *) nil_chk(self->requests_)) putWithId:JavaLangLong_valueOfWithLong_(holder->publicId_) withId:holder];
  if (self->proto_ != nil) {
    jlong mid = [self->proto_ sendRpcMessageWithMTProtoStruct:holder->message_];
    holder->protoId_ = mid;
    (void) [((JavaUtilHashMap *) nil_chk(self->idMap_)) putWithId:JavaLangLong_valueOfWithLong_(mid) withId:JavaLangLong_valueOfWithLong_(randomId)];
  }
}

void ImActorModelNetworkApiApiBroker_processResponseWithLong_withLong_withByteArray_(ImActorModelNetworkApiApiBroker *self, jlong authId, jlong mid, IOSByteArray *content) {
  if (authId != self->currentAuthId_) {
    return;
  }
  MTProtoStruct *protoStruct;
  @try {
    protoStruct = MTProtoSerializer_readRpcResponsePayloadWithByteArray_(content);
  }
  @catch (JavaIoIOException *e) {
    [((JavaIoIOException *) nil_chk(e)) printStackTrace];
    AMLog_wWithNSString_withNSString_(ImActorModelNetworkApiApiBroker_TAG_, JreStrcat("$J", @"Broken response mid#", mid));
    return;
  }
  jlong rid;
  if ([((JavaUtilHashMap *) nil_chk(self->idMap_)) containsKeyWithId:JavaLangLong_valueOfWithLong_(mid)]) {
    rid = [((JavaLangLong *) nil_chk([self->idMap_ getWithId:JavaLangLong_valueOfWithLong_(mid)])) longLongValue];
  }
  else {
    return;
  }
  ImActorModelNetworkApiApiBroker_RequestHolder *holder;
  if ([((JavaUtilHashMap *) nil_chk(self->requests_)) containsKeyWithId:JavaLangLong_valueOfWithLong_(rid)]) {
    holder = [self->requests_ getWithId:JavaLangLong_valueOfWithLong_(rid)];
  }
  else {
    return;
  }
  if ([protoStruct isKindOfClass:[MTRpcOk class]]) {
    MTRpcOk *ok = (MTRpcOk *) check_class_cast(protoStruct, [MTRpcOk class]);
    (void) [self->requests_ removeWithId:JavaLangLong_valueOfWithLong_(rid)];
    if (((ImActorModelNetworkApiApiBroker_RequestHolder *) nil_chk(holder))->protoId_ != 0) {
      (void) [self->idMap_ removeWithId:JavaLangLong_valueOfWithLong_(holder->protoId_)];
    }
    APResponse *response;
    @try {
      response = (APResponse *) check_class_cast([new_ImActorModelApiParserRpcParser_init() readWithInt:((MTRpcOk *) nil_chk(ok))->responseType_ withByteArray:ok->payload_], [APResponse class]);
    }
    @catch (JavaIoIOException *e) {
      [((JavaIoIOException *) nil_chk(e)) printStackTrace];
      return;
    }
    AMLog_dWithNSString_withNSString_(ImActorModelNetworkApiApiBroker_TAG_, JreStrcat("$J$@$J$", @"<- response#", holder->publicId_, @": ", response, @" in ", (DKEnvironment_getCurrentTime() - holder->requestTime_), @" ms"));
    [((id<AMRpcCallback>) nil_chk(holder->callback_)) onResult:response];
  }
  else if ([protoStruct isKindOfClass:[MTRpcError class]]) {
    MTRpcError *e = (MTRpcError *) check_class_cast(protoStruct, [MTRpcError class]);
    (void) [self->requests_ removeWithId:JavaLangLong_valueOfWithLong_(rid)];
    if (((ImActorModelNetworkApiApiBroker_RequestHolder *) nil_chk(holder))->protoId_ != 0) {
      (void) [self->idMap_ removeWithId:JavaLangLong_valueOfWithLong_(holder->protoId_)];
    }
    AMLog_wWithNSString_withNSString_(ImActorModelNetworkApiApiBroker_TAG_, JreStrcat("$J$$CIC$$J$", @"<- error#", holder->publicId_, @": ", ((MTRpcError *) nil_chk(e))->errorTag_, ' ', e->errorCode_, ' ', e->userMessage_, @" in ", (DKEnvironment_getCurrentTime() - holder->requestTime_), @" ms"));
    [((id<AMRpcCallback>) nil_chk(holder->callback_)) onError:new_AMRpcException_initWithNSString_withInt_withNSString_withBoolean_withByteArray_(e->errorTag_, e->errorCode_, e->userMessage_, e->canTryAgain_, e->relatedData_)];
  }
  else if ([protoStruct isKindOfClass:[MTRpcInternalError class]]) {
    MTRpcInternalError *e = ((MTRpcInternalError *) check_class_cast(protoStruct, [MTRpcInternalError class]));
    AMLog_dWithNSString_withNSString_(ImActorModelNetworkApiApiBroker_TAG_, JreStrcat("$JCI$J$", @"<- internal_error#", ((ImActorModelNetworkApiApiBroker_RequestHolder *) nil_chk(holder))->publicId_, ' ', [((MTRpcInternalError *) nil_chk(e)) getTryAgainDelay], @" sec in ", (DKEnvironment_getCurrentTime() - holder->requestTime_), @" ms"));
    if ([e isCanTryAgain]) {
      [((DKActorRef *) nil_chk([self self__])) sendWithId:new_ImActorModelNetworkApiApiBroker_ForceResend_initWithImActorModelNetworkApiApiBroker_withLong_(self, rid) withLong:[e getTryAgainDelay] * 1000LL];
    }
    else {
      (void) [self->requests_ removeWithId:JavaLangLong_valueOfWithLong_(rid)];
      if (holder->protoId_ != 0) {
        (void) [self->idMap_ removeWithId:JavaLangLong_valueOfWithLong_(holder->protoId_)];
      }
      [((id<AMRpcCallback>) nil_chk(holder->callback_)) onError:new_AMRpcInternalException_init()];
    }
  }
  else if ([protoStruct isKindOfClass:[MTRpcFloodWait class]]) {
    MTRpcFloodWait *f = (MTRpcFloodWait *) check_class_cast(protoStruct, [MTRpcFloodWait class]);
    AMLog_dWithNSString_withNSString_(ImActorModelNetworkApiApiBroker_TAG_, JreStrcat("$JCI$J$", @"<- flood_wait#", ((ImActorModelNetworkApiApiBroker_RequestHolder *) nil_chk(holder))->publicId_, ' ', [((MTRpcFloodWait *) nil_chk(f)) getDelay], @" sec in ", (DKEnvironment_getCurrentTime() - holder->requestTime_), @" ms"));
    [((DKActorRef *) nil_chk([self self__])) sendWithId:new_ImActorModelNetworkApiApiBroker_ForceResend_initWithImActorModelNetworkApiApiBroker_withLong_(self, rid) withLong:[f getDelay] * 1000LL];
  }
  else {
    AMLog_dWithNSString_withNSString_(ImActorModelNetworkApiApiBroker_TAG_, JreStrcat("$J$J$", @"<- unknown_package#", ((ImActorModelNetworkApiApiBroker_RequestHolder *) nil_chk(holder))->publicId_, @" in ", (DKEnvironment_getCurrentTime() - holder->requestTime_), @" ms"));
  }
}

void ImActorModelNetworkApiApiBroker_forceResendWithLong_(ImActorModelNetworkApiApiBroker *self, jlong randomId) {
  ImActorModelNetworkApiApiBroker_RequestHolder *holder = [((JavaUtilHashMap *) nil_chk(self->requests_)) getWithId:JavaLangLong_valueOfWithLong_(randomId)];
  if (holder != nil) {
    if (holder->protoId_ != 0) {
      (void) [((JavaUtilHashMap *) nil_chk(self->idMap_)) removeWithId:JavaLangLong_valueOfWithLong_(holder->protoId_)];
      [((MTMTProto *) nil_chk(self->proto_)) cancelRpcWithLong:holder->protoId_];
    }
    jlong mid = [((MTMTProto *) nil_chk(self->proto_)) sendRpcMessageWithMTProtoStruct:holder->message_];
    holder->protoId_ = mid;
    (void) [((JavaUtilHashMap *) nil_chk(self->idMap_)) putWithId:JavaLangLong_valueOfWithLong_(mid) withId:JavaLangLong_valueOfWithLong_(randomId)];
  }
}

void ImActorModelNetworkApiApiBroker_cancelRequestWithLong_(ImActorModelNetworkApiApiBroker *self, jlong randomId) {
  ImActorModelNetworkApiApiBroker_RequestHolder *holder = [((JavaUtilHashMap *) nil_chk(self->requests_)) getWithId:JavaLangLong_valueOfWithLong_(randomId)];
  if (holder != nil) {
    (void) [self->requests_ removeWithId:JavaLangLong_valueOfWithLong_(randomId)];
    if (holder->protoId_ != 0 && self->proto_ != nil) {
      (void) [((JavaUtilHashMap *) nil_chk(self->idMap_)) removeWithId:JavaLangLong_valueOfWithLong_(holder->protoId_)];
      [self->proto_ cancelRpcWithLong:holder->protoId_];
    }
  }
}

void ImActorModelNetworkApiApiBroker_processUpdateWithLong_withByteArray_(ImActorModelNetworkApiApiBroker *self, jlong authId, IOSByteArray *content) {
  if (authId != self->currentAuthId_) {
    return;
  }
  MTProtoStruct *protoStruct;
  @try {
    protoStruct = MTProtoSerializer_readUpdateWithByteArray_(content);
  }
  @catch (JavaIoIOException *e) {
    [((JavaIoIOException *) nil_chk(e)) printStackTrace];
    AMLog_wWithNSString_withNSString_(ImActorModelNetworkApiApiBroker_TAG_, @"Broken mt update");
    return;
  }
  jint type = ((MTPush *) nil_chk(((MTPush *) check_class_cast(protoStruct, [MTPush class]))))->updateType_;
  IOSByteArray *body = ((MTPush *) nil_chk(((MTPush *) check_class_cast(protoStruct, [MTPush class]))))->body_;
  APRpcScope *updateBox;
  @try {
    updateBox = [new_ImActorModelApiParserRpcParser_init() readWithInt:type withByteArray:body];
  }
  @catch (JavaIoIOException *e) {
    [((JavaIoIOException *) nil_chk(e)) printStackTrace];
    AMLog_wWithNSString_withNSString_(ImActorModelNetworkApiApiBroker_TAG_, @"Broken update box");
    return;
  }
  [((id<AMActorApiCallback>) nil_chk(self->callback_)) onUpdateReceived:updateBox];
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(ImActorModelNetworkApiApiBroker)

@implementation ImActorModelNetworkApiApiBroker_PerformRequest

- (instancetype)initWithAPRequest:(APRequest *)message
                withAMRpcCallback:(id<AMRpcCallback>)callback {
  ImActorModelNetworkApiApiBroker_PerformRequest_initWithAPRequest_withAMRpcCallback_(self, message, callback);
  return self;
}

- (APRequest *)getMessage {
  return message_;
}

- (id<AMRpcCallback>)getCallback {
  return callback_;
}

@end

void ImActorModelNetworkApiApiBroker_PerformRequest_initWithAPRequest_withAMRpcCallback_(ImActorModelNetworkApiApiBroker_PerformRequest *self, APRequest *message, id<AMRpcCallback> callback) {
  (void) NSObject_init(self);
  self->message_ = message;
  self->callback_ = callback;
}

ImActorModelNetworkApiApiBroker_PerformRequest *new_ImActorModelNetworkApiApiBroker_PerformRequest_initWithAPRequest_withAMRpcCallback_(APRequest *message, id<AMRpcCallback> callback) {
  ImActorModelNetworkApiApiBroker_PerformRequest *self = [ImActorModelNetworkApiApiBroker_PerformRequest alloc];
  ImActorModelNetworkApiApiBroker_PerformRequest_initWithAPRequest_withAMRpcCallback_(self, message, callback);
  return self;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(ImActorModelNetworkApiApiBroker_PerformRequest)

@implementation ImActorModelNetworkApiApiBroker_CancelRequest

- (instancetype)initWithLong:(jlong)randomId {
  ImActorModelNetworkApiApiBroker_CancelRequest_initWithLong_(self, randomId);
  return self;
}

- (jlong)getRandomId {
  return randomId_;
}

@end

void ImActorModelNetworkApiApiBroker_CancelRequest_initWithLong_(ImActorModelNetworkApiApiBroker_CancelRequest *self, jlong randomId) {
  (void) NSObject_init(self);
  self->randomId_ = randomId;
}

ImActorModelNetworkApiApiBroker_CancelRequest *new_ImActorModelNetworkApiApiBroker_CancelRequest_initWithLong_(jlong randomId) {
  ImActorModelNetworkApiApiBroker_CancelRequest *self = [ImActorModelNetworkApiApiBroker_CancelRequest alloc];
  ImActorModelNetworkApiApiBroker_CancelRequest_initWithLong_(self, randomId);
  return self;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(ImActorModelNetworkApiApiBroker_CancelRequest)

@implementation ImActorModelNetworkApiApiBroker_NetworkChanged

- (instancetype)initWithAMNetworkStateEnum:(AMNetworkStateEnum *)state {
  ImActorModelNetworkApiApiBroker_NetworkChanged_initWithAMNetworkStateEnum_(self, state);
  return self;
}

- (AMNetworkStateEnum *)getState {
  return state_;
}

@end

void ImActorModelNetworkApiApiBroker_NetworkChanged_initWithAMNetworkStateEnum_(ImActorModelNetworkApiApiBroker_NetworkChanged *self, AMNetworkStateEnum *state) {
  (void) NSObject_init(self);
  self->state_ = state;
}

ImActorModelNetworkApiApiBroker_NetworkChanged *new_ImActorModelNetworkApiApiBroker_NetworkChanged_initWithAMNetworkStateEnum_(AMNetworkStateEnum *state) {
  ImActorModelNetworkApiApiBroker_NetworkChanged *self = [ImActorModelNetworkApiApiBroker_NetworkChanged alloc];
  ImActorModelNetworkApiApiBroker_NetworkChanged_initWithAMNetworkStateEnum_(self, state);
  return self;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(ImActorModelNetworkApiApiBroker_NetworkChanged)

@implementation ImActorModelNetworkApiApiBroker_ForceNetworkCheck

- (instancetype)init {
  ImActorModelNetworkApiApiBroker_ForceNetworkCheck_init(self);
  return self;
}

@end

void ImActorModelNetworkApiApiBroker_ForceNetworkCheck_init(ImActorModelNetworkApiApiBroker_ForceNetworkCheck *self) {
  (void) NSObject_init(self);
}

ImActorModelNetworkApiApiBroker_ForceNetworkCheck *new_ImActorModelNetworkApiApiBroker_ForceNetworkCheck_init() {
  ImActorModelNetworkApiApiBroker_ForceNetworkCheck *self = [ImActorModelNetworkApiApiBroker_ForceNetworkCheck alloc];
  ImActorModelNetworkApiApiBroker_ForceNetworkCheck_init(self);
  return self;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(ImActorModelNetworkApiApiBroker_ForceNetworkCheck)

@implementation ImActorModelNetworkApiApiBroker_RequestAuthId

- (instancetype)initWithImActorModelNetworkApiApiBroker:(ImActorModelNetworkApiApiBroker *)outer$ {
  ImActorModelNetworkApiApiBroker_RequestAuthId_initWithImActorModelNetworkApiApiBroker_(self, outer$);
  return self;
}

@end

void ImActorModelNetworkApiApiBroker_RequestAuthId_initWithImActorModelNetworkApiApiBroker_(ImActorModelNetworkApiApiBroker_RequestAuthId *self, ImActorModelNetworkApiApiBroker *outer$) {
  (void) NSObject_init(self);
}

ImActorModelNetworkApiApiBroker_RequestAuthId *new_ImActorModelNetworkApiApiBroker_RequestAuthId_initWithImActorModelNetworkApiApiBroker_(ImActorModelNetworkApiApiBroker *outer$) {
  ImActorModelNetworkApiApiBroker_RequestAuthId *self = [ImActorModelNetworkApiApiBroker_RequestAuthId alloc];
  ImActorModelNetworkApiApiBroker_RequestAuthId_initWithImActorModelNetworkApiApiBroker_(self, outer$);
  return self;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(ImActorModelNetworkApiApiBroker_RequestAuthId)

@implementation ImActorModelNetworkApiApiBroker_InitMTProto

- (instancetype)initWithImActorModelNetworkApiApiBroker:(ImActorModelNetworkApiApiBroker *)outer$
                                               withLong:(jlong)authId {
  ImActorModelNetworkApiApiBroker_InitMTProto_initWithImActorModelNetworkApiApiBroker_withLong_(self, outer$, authId);
  return self;
}

- (jlong)getAuthId {
  return authId_;
}

@end

void ImActorModelNetworkApiApiBroker_InitMTProto_initWithImActorModelNetworkApiApiBroker_withLong_(ImActorModelNetworkApiApiBroker_InitMTProto *self, ImActorModelNetworkApiApiBroker *outer$, jlong authId) {
  (void) NSObject_init(self);
  self->authId_ = authId;
}

ImActorModelNetworkApiApiBroker_InitMTProto *new_ImActorModelNetworkApiApiBroker_InitMTProto_initWithImActorModelNetworkApiApiBroker_withLong_(ImActorModelNetworkApiApiBroker *outer$, jlong authId) {
  ImActorModelNetworkApiApiBroker_InitMTProto *self = [ImActorModelNetworkApiApiBroker_InitMTProto alloc];
  ImActorModelNetworkApiApiBroker_InitMTProto_initWithImActorModelNetworkApiApiBroker_withLong_(self, outer$, authId);
  return self;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(ImActorModelNetworkApiApiBroker_InitMTProto)

@implementation ImActorModelNetworkApiApiBroker_ProtoResponse

- (instancetype)initWithImActorModelNetworkApiApiBroker:(ImActorModelNetworkApiApiBroker *)outer$
                                               withLong:(jlong)authId
                                               withLong:(jlong)responseId
                                          withByteArray:(IOSByteArray *)data {
  ImActorModelNetworkApiApiBroker_ProtoResponse_initWithImActorModelNetworkApiApiBroker_withLong_withLong_withByteArray_(self, outer$, authId, responseId, data);
  return self;
}

- (jlong)getAuthId {
  return authId_;
}

- (jlong)getResponseId {
  return responseId_;
}

- (IOSByteArray *)getData {
  return data_;
}

@end

void ImActorModelNetworkApiApiBroker_ProtoResponse_initWithImActorModelNetworkApiApiBroker_withLong_withLong_withByteArray_(ImActorModelNetworkApiApiBroker_ProtoResponse *self, ImActorModelNetworkApiApiBroker *outer$, jlong authId, jlong responseId, IOSByteArray *data) {
  (void) NSObject_init(self);
  self->authId_ = authId;
  self->responseId_ = responseId;
  self->data_ = data;
}

ImActorModelNetworkApiApiBroker_ProtoResponse *new_ImActorModelNetworkApiApiBroker_ProtoResponse_initWithImActorModelNetworkApiApiBroker_withLong_withLong_withByteArray_(ImActorModelNetworkApiApiBroker *outer$, jlong authId, jlong responseId, IOSByteArray *data) {
  ImActorModelNetworkApiApiBroker_ProtoResponse *self = [ImActorModelNetworkApiApiBroker_ProtoResponse alloc];
  ImActorModelNetworkApiApiBroker_ProtoResponse_initWithImActorModelNetworkApiApiBroker_withLong_withLong_withByteArray_(self, outer$, authId, responseId, data);
  return self;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(ImActorModelNetworkApiApiBroker_ProtoResponse)

@implementation ImActorModelNetworkApiApiBroker_ProtoUpdate

- (instancetype)initWithImActorModelNetworkApiApiBroker:(ImActorModelNetworkApiApiBroker *)outer$
                                               withLong:(jlong)authId
                                          withByteArray:(IOSByteArray *)data {
  ImActorModelNetworkApiApiBroker_ProtoUpdate_initWithImActorModelNetworkApiApiBroker_withLong_withByteArray_(self, outer$, authId, data);
  return self;
}

- (jlong)getAuthId {
  return authId_;
}

- (IOSByteArray *)getData {
  return data_;
}

@end

void ImActorModelNetworkApiApiBroker_ProtoUpdate_initWithImActorModelNetworkApiApiBroker_withLong_withByteArray_(ImActorModelNetworkApiApiBroker_ProtoUpdate *self, ImActorModelNetworkApiApiBroker *outer$, jlong authId, IOSByteArray *data) {
  (void) NSObject_init(self);
  self->authId_ = authId;
  self->data_ = data;
}

ImActorModelNetworkApiApiBroker_ProtoUpdate *new_ImActorModelNetworkApiApiBroker_ProtoUpdate_initWithImActorModelNetworkApiApiBroker_withLong_withByteArray_(ImActorModelNetworkApiApiBroker *outer$, jlong authId, IOSByteArray *data) {
  ImActorModelNetworkApiApiBroker_ProtoUpdate *self = [ImActorModelNetworkApiApiBroker_ProtoUpdate alloc];
  ImActorModelNetworkApiApiBroker_ProtoUpdate_initWithImActorModelNetworkApiApiBroker_withLong_withByteArray_(self, outer$, authId, data);
  return self;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(ImActorModelNetworkApiApiBroker_ProtoUpdate)

@implementation ImActorModelNetworkApiApiBroker_ForceResend

- (instancetype)initWithImActorModelNetworkApiApiBroker:(ImActorModelNetworkApiApiBroker *)outer$
                                               withLong:(jlong)id_ {
  ImActorModelNetworkApiApiBroker_ForceResend_initWithImActorModelNetworkApiApiBroker_withLong_(self, outer$, id_);
  return self;
}

- (jlong)getId {
  return id__;
}

@end

void ImActorModelNetworkApiApiBroker_ForceResend_initWithImActorModelNetworkApiApiBroker_withLong_(ImActorModelNetworkApiApiBroker_ForceResend *self, ImActorModelNetworkApiApiBroker *outer$, jlong id_) {
  (void) NSObject_init(self);
  self->id__ = id_;
}

ImActorModelNetworkApiApiBroker_ForceResend *new_ImActorModelNetworkApiApiBroker_ForceResend_initWithImActorModelNetworkApiApiBroker_withLong_(ImActorModelNetworkApiApiBroker *outer$, jlong id_) {
  ImActorModelNetworkApiApiBroker_ForceResend *self = [ImActorModelNetworkApiApiBroker_ForceResend alloc];
  ImActorModelNetworkApiApiBroker_ForceResend_initWithImActorModelNetworkApiApiBroker_withLong_(self, outer$, id_);
  return self;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(ImActorModelNetworkApiApiBroker_ForceResend)

@implementation ImActorModelNetworkApiApiBroker_RequestHolder

- (instancetype)initWithImActorModelNetworkApiApiBroker:(ImActorModelNetworkApiApiBroker *)outer$
                                               withLong:(jlong)requestTime
                                               withLong:(jlong)publicId
                                       withMTRpcRequest:(MTRpcRequest *)message
                                      withAMRpcCallback:(id<AMRpcCallback>)callback {
  ImActorModelNetworkApiApiBroker_RequestHolder_initWithImActorModelNetworkApiApiBroker_withLong_withLong_withMTRpcRequest_withAMRpcCallback_(self, outer$, requestTime, publicId, message, callback);
  return self;
}

@end

void ImActorModelNetworkApiApiBroker_RequestHolder_initWithImActorModelNetworkApiApiBroker_withLong_withLong_withMTRpcRequest_withAMRpcCallback_(ImActorModelNetworkApiApiBroker_RequestHolder *self, ImActorModelNetworkApiApiBroker *outer$, jlong requestTime, jlong publicId, MTRpcRequest *message, id<AMRpcCallback> callback) {
  (void) NSObject_init(self);
  self->requestTime_ = requestTime;
  self->message_ = message;
  self->publicId_ = publicId;
  self->callback_ = callback;
}

ImActorModelNetworkApiApiBroker_RequestHolder *new_ImActorModelNetworkApiApiBroker_RequestHolder_initWithImActorModelNetworkApiApiBroker_withLong_withLong_withMTRpcRequest_withAMRpcCallback_(ImActorModelNetworkApiApiBroker *outer$, jlong requestTime, jlong publicId, MTRpcRequest *message, id<AMRpcCallback> callback) {
  ImActorModelNetworkApiApiBroker_RequestHolder *self = [ImActorModelNetworkApiApiBroker_RequestHolder alloc];
  ImActorModelNetworkApiApiBroker_RequestHolder_initWithImActorModelNetworkApiApiBroker_withLong_withLong_withMTRpcRequest_withAMRpcCallback_(self, outer$, requestTime, publicId, message, callback);
  return self;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(ImActorModelNetworkApiApiBroker_RequestHolder)

@implementation ImActorModelNetworkApiApiBroker_NewSessionCreated

- (instancetype)initWithImActorModelNetworkApiApiBroker:(ImActorModelNetworkApiApiBroker *)outer$
                                               withLong:(jlong)authId {
  ImActorModelNetworkApiApiBroker_NewSessionCreated_initWithImActorModelNetworkApiApiBroker_withLong_(self, outer$, authId);
  return self;
}

- (jlong)getAuthId {
  return authId_;
}

@end

void ImActorModelNetworkApiApiBroker_NewSessionCreated_initWithImActorModelNetworkApiApiBroker_withLong_(ImActorModelNetworkApiApiBroker_NewSessionCreated *self, ImActorModelNetworkApiApiBroker *outer$, jlong authId) {
  (void) NSObject_init(self);
  self->authId_ = authId;
}

ImActorModelNetworkApiApiBroker_NewSessionCreated *new_ImActorModelNetworkApiApiBroker_NewSessionCreated_initWithImActorModelNetworkApiApiBroker_withLong_(ImActorModelNetworkApiApiBroker *outer$, jlong authId) {
  ImActorModelNetworkApiApiBroker_NewSessionCreated *self = [ImActorModelNetworkApiApiBroker_NewSessionCreated alloc];
  ImActorModelNetworkApiApiBroker_NewSessionCreated_initWithImActorModelNetworkApiApiBroker_withLong_(self, outer$, authId);
  return self;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(ImActorModelNetworkApiApiBroker_NewSessionCreated)

@implementation ImActorModelNetworkApiApiBroker_AuthIdInvalidated

- (instancetype)initWithImActorModelNetworkApiApiBroker:(ImActorModelNetworkApiApiBroker *)outer$
                                               withLong:(jlong)authId {
  ImActorModelNetworkApiApiBroker_AuthIdInvalidated_initWithImActorModelNetworkApiApiBroker_withLong_(self, outer$, authId);
  return self;
}

- (jlong)getAuthId {
  return authId_;
}

@end

void ImActorModelNetworkApiApiBroker_AuthIdInvalidated_initWithImActorModelNetworkApiApiBroker_withLong_(ImActorModelNetworkApiApiBroker_AuthIdInvalidated *self, ImActorModelNetworkApiApiBroker *outer$, jlong authId) {
  (void) NSObject_init(self);
  self->authId_ = authId;
}

ImActorModelNetworkApiApiBroker_AuthIdInvalidated *new_ImActorModelNetworkApiApiBroker_AuthIdInvalidated_initWithImActorModelNetworkApiApiBroker_withLong_(ImActorModelNetworkApiApiBroker *outer$, jlong authId) {
  ImActorModelNetworkApiApiBroker_AuthIdInvalidated *self = [ImActorModelNetworkApiApiBroker_AuthIdInvalidated alloc];
  ImActorModelNetworkApiApiBroker_AuthIdInvalidated_initWithImActorModelNetworkApiApiBroker_withLong_(self, outer$, authId);
  return self;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(ImActorModelNetworkApiApiBroker_AuthIdInvalidated)

@implementation ImActorModelNetworkApiApiBroker_ConnectionsCountChanged

- (instancetype)initWithImActorModelNetworkApiApiBroker:(ImActorModelNetworkApiApiBroker *)outer$
                                                withInt:(jint)count {
  ImActorModelNetworkApiApiBroker_ConnectionsCountChanged_initWithImActorModelNetworkApiApiBroker_withInt_(self, outer$, count);
  return self;
}

- (jint)getCount {
  return count_;
}

@end

void ImActorModelNetworkApiApiBroker_ConnectionsCountChanged_initWithImActorModelNetworkApiApiBroker_withInt_(ImActorModelNetworkApiApiBroker_ConnectionsCountChanged *self, ImActorModelNetworkApiApiBroker *outer$, jint count) {
  (void) NSObject_init(self);
  self->count_ = count;
}

ImActorModelNetworkApiApiBroker_ConnectionsCountChanged *new_ImActorModelNetworkApiApiBroker_ConnectionsCountChanged_initWithImActorModelNetworkApiApiBroker_withInt_(ImActorModelNetworkApiApiBroker *outer$, jint count) {
  ImActorModelNetworkApiApiBroker_ConnectionsCountChanged *self = [ImActorModelNetworkApiApiBroker_ConnectionsCountChanged alloc];
  ImActorModelNetworkApiApiBroker_ConnectionsCountChanged_initWithImActorModelNetworkApiApiBroker_withInt_(self, outer$, count);
  return self;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(ImActorModelNetworkApiApiBroker_ConnectionsCountChanged)

@implementation ImActorModelNetworkApiApiBroker_ProtoCallback

- (instancetype)initWithImActorModelNetworkApiApiBroker:(ImActorModelNetworkApiApiBroker *)outer$
                                               withLong:(jlong)authId {
  ImActorModelNetworkApiApiBroker_ProtoCallback_initWithImActorModelNetworkApiApiBroker_withLong_(self, outer$, authId);
  return self;
}

- (void)onRpcResponseWithLong:(jlong)mid
                withByteArray:(IOSByteArray *)content {
  [((DKActorRef *) nil_chk([this$0_ self__])) sendWithId:new_ImActorModelNetworkApiApiBroker_ProtoResponse_initWithImActorModelNetworkApiApiBroker_withLong_withLong_withByteArray_(this$0_, authId_, mid, content)];
}

- (void)onUpdateWithByteArray:(IOSByteArray *)content {
  [((DKActorRef *) nil_chk([this$0_ self__])) sendWithId:new_ImActorModelNetworkApiApiBroker_ProtoUpdate_initWithImActorModelNetworkApiApiBroker_withLong_withByteArray_(this$0_, authId_, content)];
}

- (void)onAuthKeyInvalidatedWithLong:(jlong)authId {
  if (self->authId_ != authId) {
    return;
  }
  [((DKActorRef *) nil_chk([this$0_ self__])) sendWithId:new_ImActorModelNetworkApiApiBroker_AuthIdInvalidated_initWithImActorModelNetworkApiApiBroker_withLong_(this$0_, authId)];
}

- (void)onSessionCreated {
  [((DKActorRef *) nil_chk([this$0_ self__])) sendWithId:new_ImActorModelNetworkApiApiBroker_NewSessionCreated_initWithImActorModelNetworkApiApiBroker_withLong_(this$0_, authId_)];
}

- (void)onConnectionsCountChangedWithInt:(jint)count {
  [((DKActorRef *) nil_chk([this$0_ self__])) sendWithId:new_ImActorModelNetworkApiApiBroker_ConnectionsCountChanged_initWithImActorModelNetworkApiApiBroker_withInt_(this$0_, count)];
}

@end

void ImActorModelNetworkApiApiBroker_ProtoCallback_initWithImActorModelNetworkApiApiBroker_withLong_(ImActorModelNetworkApiApiBroker_ProtoCallback *self, ImActorModelNetworkApiApiBroker *outer$, jlong authId) {
  self->this$0_ = outer$;
  (void) NSObject_init(self);
  self->authId_ = authId;
}

ImActorModelNetworkApiApiBroker_ProtoCallback *new_ImActorModelNetworkApiApiBroker_ProtoCallback_initWithImActorModelNetworkApiApiBroker_withLong_(ImActorModelNetworkApiApiBroker *outer$, jlong authId) {
  ImActorModelNetworkApiApiBroker_ProtoCallback *self = [ImActorModelNetworkApiApiBroker_ProtoCallback alloc];
  ImActorModelNetworkApiApiBroker_ProtoCallback_initWithImActorModelNetworkApiApiBroker_withLong_(self, outer$, authId);
  return self;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(ImActorModelNetworkApiApiBroker_ProtoCallback)

@implementation ImActorModelNetworkApiApiBroker_$1

- (ImActorModelNetworkApiApiBroker *)create {
  return new_ImActorModelNetworkApiApiBroker_initWithAMEndpoints_withAMAuthKeyStorage_withAMActorApiCallback_withAMNetworkProvider_withBoolean_withInt_withInt_withInt_(val$endpoints_, val$keyStorage_, val$callback_, val$networkProvider_, val$isEnableLog_, val$minDelay_, val$maxDelay_, val$maxFailureCount_);
}

- (instancetype)initWithAMEndpoints:(AMEndpoints *)capture$0
               withAMAuthKeyStorage:(id<AMAuthKeyStorage>)capture$1
             withAMActorApiCallback:(id<AMActorApiCallback>)capture$2
              withAMNetworkProvider:(id<AMNetworkProvider>)capture$3
                        withBoolean:(jboolean)capture$4
                            withInt:(jint)capture$5
                            withInt:(jint)capture$6
                            withInt:(jint)capture$7 {
  ImActorModelNetworkApiApiBroker_$1_initWithAMEndpoints_withAMAuthKeyStorage_withAMActorApiCallback_withAMNetworkProvider_withBoolean_withInt_withInt_withInt_(self, capture$0, capture$1, capture$2, capture$3, capture$4, capture$5, capture$6, capture$7);
  return self;
}

@end

void ImActorModelNetworkApiApiBroker_$1_initWithAMEndpoints_withAMAuthKeyStorage_withAMActorApiCallback_withAMNetworkProvider_withBoolean_withInt_withInt_withInt_(ImActorModelNetworkApiApiBroker_$1 *self, AMEndpoints *capture$0, id<AMAuthKeyStorage> capture$1, id<AMActorApiCallback> capture$2, id<AMNetworkProvider> capture$3, jboolean capture$4, jint capture$5, jint capture$6, jint capture$7) {
  self->val$endpoints_ = capture$0;
  self->val$keyStorage_ = capture$1;
  self->val$callback_ = capture$2;
  self->val$networkProvider_ = capture$3;
  self->val$isEnableLog_ = capture$4;
  self->val$minDelay_ = capture$5;
  self->val$maxDelay_ = capture$6;
  self->val$maxFailureCount_ = capture$7;
  (void) NSObject_init(self);
}

ImActorModelNetworkApiApiBroker_$1 *new_ImActorModelNetworkApiApiBroker_$1_initWithAMEndpoints_withAMAuthKeyStorage_withAMActorApiCallback_withAMNetworkProvider_withBoolean_withInt_withInt_withInt_(AMEndpoints *capture$0, id<AMAuthKeyStorage> capture$1, id<AMActorApiCallback> capture$2, id<AMNetworkProvider> capture$3, jboolean capture$4, jint capture$5, jint capture$6, jint capture$7) {
  ImActorModelNetworkApiApiBroker_$1 *self = [ImActorModelNetworkApiApiBroker_$1 alloc];
  ImActorModelNetworkApiApiBroker_$1_initWithAMEndpoints_withAMAuthKeyStorage_withAMActorApiCallback_withAMNetworkProvider_withBoolean_withInt_withInt_withInt_(self, capture$0, capture$1, capture$2, capture$3, capture$4, capture$5, capture$6, capture$7);
  return self;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(ImActorModelNetworkApiApiBroker_$1)

@implementation ImActorModelNetworkApiApiBroker_$2

- (void)onSuccessWithLong:(jlong)authId {
  AMLog_dWithNSString_withNSString_(ImActorModelNetworkApiApiBroker_get_TAG_(), JreStrcat("$J", @"Key created: ", authId));
  [((DKActorRef *) nil_chk([this$0_ self__])) sendWithId:new_ImActorModelNetworkApiApiBroker_InitMTProto_initWithImActorModelNetworkApiApiBroker_withLong_(this$0_, authId)];
}

- (void)onFailure {
  AMLog_dWithNSString_withNSString_(ImActorModelNetworkApiApiBroker_get_TAG_(), @"Key creation failure");
  [((AMExponentialBackoff *) nil_chk(this$0_->authIdBackOff_)) onFailure];
  jlong delay = [this$0_->authIdBackOff_ exponentialWait];
  AMLog_dWithNSString_withNSString_(ImActorModelNetworkApiApiBroker_get_TAG_(), JreStrcat("$J$", @"Key creation delay in ", delay, @" ms"));
  [((DKActorRef *) nil_chk([this$0_ self__])) sendWithId:new_ImActorModelNetworkApiApiBroker_RequestAuthId_initWithImActorModelNetworkApiApiBroker_(this$0_) withLong:delay];
}

- (instancetype)initWithImActorModelNetworkApiApiBroker:(ImActorModelNetworkApiApiBroker *)outer$ {
  ImActorModelNetworkApiApiBroker_$2_initWithImActorModelNetworkApiApiBroker_(self, outer$);
  return self;
}

@end

void ImActorModelNetworkApiApiBroker_$2_initWithImActorModelNetworkApiApiBroker_(ImActorModelNetworkApiApiBroker_$2 *self, ImActorModelNetworkApiApiBroker *outer$) {
  self->this$0_ = outer$;
  (void) NSObject_init(self);
}

ImActorModelNetworkApiApiBroker_$2 *new_ImActorModelNetworkApiApiBroker_$2_initWithImActorModelNetworkApiApiBroker_(ImActorModelNetworkApiApiBroker *outer$) {
  ImActorModelNetworkApiApiBroker_$2 *self = [ImActorModelNetworkApiApiBroker_$2 alloc];
  ImActorModelNetworkApiApiBroker_$2_initWithImActorModelNetworkApiApiBroker_(self, outer$);
  return self;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(ImActorModelNetworkApiApiBroker_$2)

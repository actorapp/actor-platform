//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: /Users/ex3ndr/Develop/actor-model/library/actor-cocoa-base/build/java/im/actor/model/modules/Messages.java
//

#line 1 "/Users/ex3ndr/Develop/actor-model/library/actor-cocoa-base/build/java/im/actor/model/modules/Messages.java"

#include "IOSClass.h"
#include "IOSPrimitiveArray.h"
#include "J2ObjC_source.h"
#include "im/actor/model/StorageProvider.h"
#include "im/actor/model/api/OutPeer.h"
#include "im/actor/model/api/Peer.h"
#include "im/actor/model/api/PeerType.h"
#include "im/actor/model/api/base/SeqUpdate.h"
#include "im/actor/model/api/rpc/RequestClearChat.h"
#include "im/actor/model/api/rpc/RequestDeleteChat.h"
#include "im/actor/model/api/rpc/ResponseSeq.h"
#include "im/actor/model/api/updates/UpdateChatClear.h"
#include "im/actor/model/api/updates/UpdateChatDelete.h"
#include "im/actor/model/concurrency/Command.h"
#include "im/actor/model/concurrency/CommandCallback.h"
#include "im/actor/model/droidkit/actors/ActorRef.h"
#include "im/actor/model/droidkit/actors/ActorSystem.h"
#include "im/actor/model/droidkit/actors/Props.h"
#include "im/actor/model/droidkit/engine/KeyValueEngine.h"
#include "im/actor/model/droidkit/engine/KeyValueStorage.h"
#include "im/actor/model/droidkit/engine/ListEngine.h"
#include "im/actor/model/droidkit/engine/ListStorage.h"
#include "im/actor/model/droidkit/engine/PreferencesStorage.h"
#include "im/actor/model/droidkit/engine/SyncKeyValue.h"
#include "im/actor/model/entity/Group.h"
#include "im/actor/model/entity/Peer.h"
#include "im/actor/model/entity/PeerType.h"
#include "im/actor/model/entity/User.h"
#include "im/actor/model/entity/content/FastThumb.h"
#include "im/actor/model/files/FileSystemReference.h"
#include "im/actor/model/modules/BaseModule.h"
#include "im/actor/model/modules/Messages.h"
#include "im/actor/model/modules/Modules.h"
#include "im/actor/model/modules/Updates.h"
#include "im/actor/model/modules/messages/ConversationActor.h"
#include "im/actor/model/modules/messages/ConversationHistoryActor.h"
#include "im/actor/model/modules/messages/DialogsActor.h"
#include "im/actor/model/modules/messages/DialogsHistoryActor.h"
#include "im/actor/model/modules/messages/MessageDeleteActor.h"
#include "im/actor/model/modules/messages/OwnReadActor.h"
#include "im/actor/model/modules/messages/PlainReaderActor.h"
#include "im/actor/model/modules/messages/PlainReceiverActor.h"
#include "im/actor/model/modules/messages/SenderActor.h"
#include "im/actor/model/network/RpcException.h"
#include "im/actor/model/network/RpcInternalException.h"
#include "java/lang/Boolean.h"
#include "java/lang/Long.h"
#include "java/util/ArrayList.h"
#include "java/util/HashMap.h"

__attribute__((unused)) static void ImActorModelModulesMessages_assumeConvActorWithAMPeer_(ImActorModelModulesMessages *self, AMPeer *peer);

@interface ImActorModelModulesMessages () {
 @public
  id<DKListEngine> dialogs_;
  DKActorRef *dialogsActor_;
  DKActorRef *dialogsHistoryActor_;
  DKActorRef *ownReadActor_;
  DKActorRef *plainReadActor_;
  DKActorRef *plainReceiverActor_;
  DKActorRef *sendMessageActor_;
  DKActorRef *deletionsActor_;
  JavaUtilHashMap *conversationEngines_;
  JavaUtilHashMap *conversationMediaEngines_;
  JavaUtilHashMap *conversationActors_;
  JavaUtilHashMap *conversationHistoryActors_;
  DKSyncKeyValue *conversationPending_;
  DKSyncKeyValue *cursorStorage_;
}

- (void)assumeConvActorWithAMPeer:(AMPeer *)peer;
@end

J2OBJC_FIELD_SETTER(ImActorModelModulesMessages, dialogs_, id<DKListEngine>)
J2OBJC_FIELD_SETTER(ImActorModelModulesMessages, dialogsActor_, DKActorRef *)
J2OBJC_FIELD_SETTER(ImActorModelModulesMessages, dialogsHistoryActor_, DKActorRef *)
J2OBJC_FIELD_SETTER(ImActorModelModulesMessages, ownReadActor_, DKActorRef *)
J2OBJC_FIELD_SETTER(ImActorModelModulesMessages, plainReadActor_, DKActorRef *)
J2OBJC_FIELD_SETTER(ImActorModelModulesMessages, plainReceiverActor_, DKActorRef *)
J2OBJC_FIELD_SETTER(ImActorModelModulesMessages, sendMessageActor_, DKActorRef *)
J2OBJC_FIELD_SETTER(ImActorModelModulesMessages, deletionsActor_, DKActorRef *)
J2OBJC_FIELD_SETTER(ImActorModelModulesMessages, conversationEngines_, JavaUtilHashMap *)
J2OBJC_FIELD_SETTER(ImActorModelModulesMessages, conversationMediaEngines_, JavaUtilHashMap *)
J2OBJC_FIELD_SETTER(ImActorModelModulesMessages, conversationActors_, JavaUtilHashMap *)
J2OBJC_FIELD_SETTER(ImActorModelModulesMessages, conversationHistoryActors_, JavaUtilHashMap *)
J2OBJC_FIELD_SETTER(ImActorModelModulesMessages, conversationPending_, DKSyncKeyValue *)
J2OBJC_FIELD_SETTER(ImActorModelModulesMessages, cursorStorage_, DKSyncKeyValue *)

@interface ImActorModelModulesMessages_ConversationHolder () {
 @public
  DKActorRef *conversationActor_;
  DKActorRef *historyActor_;
}
- (instancetype)initWithImActorModelModulesMessages:(ImActorModelModulesMessages *)outer$
                                     withDKActorRef:(DKActorRef *)conversationActor
                                     withDKActorRef:(DKActorRef *)historyActor;
@end

J2OBJC_FIELD_SETTER(ImActorModelModulesMessages_ConversationHolder, conversationActor_, DKActorRef *)
J2OBJC_FIELD_SETTER(ImActorModelModulesMessages_ConversationHolder, historyActor_, DKActorRef *)

@interface ImActorModelModulesMessages_$1 () {
 @public
  ImActorModelModulesMessages *this$0_;
}
@end

J2OBJC_FIELD_SETTER(ImActorModelModulesMessages_$1, this$0_, ImActorModelModulesMessages *)

@interface ImActorModelModulesMessages_$2 () {
 @public
  ImActorModelModulesMessages *this$0_;
}
@end

J2OBJC_FIELD_SETTER(ImActorModelModulesMessages_$2, this$0_, ImActorModelModulesMessages *)

@interface ImActorModelModulesMessages_$3 () {
 @public
  ImActorModelModulesMessages *this$0_;
}
@end

J2OBJC_FIELD_SETTER(ImActorModelModulesMessages_$3, this$0_, ImActorModelModulesMessages *)

@interface ImActorModelModulesMessages_$4 () {
 @public
  ImActorModelModulesMessages *this$0_;
}
@end

J2OBJC_FIELD_SETTER(ImActorModelModulesMessages_$4, this$0_, ImActorModelModulesMessages *)

@interface ImActorModelModulesMessages_$5 () {
 @public
  ImActorModelModulesMessages *this$0_;
}
@end

J2OBJC_FIELD_SETTER(ImActorModelModulesMessages_$5, this$0_, ImActorModelModulesMessages *)

@interface ImActorModelModulesMessages_$6 () {
 @public
  ImActorModelModulesMessages *this$0_;
}
@end

J2OBJC_FIELD_SETTER(ImActorModelModulesMessages_$6, this$0_, ImActorModelModulesMessages *)

@interface ImActorModelModulesMessages_$7 () {
 @public
  ImActorModelModulesMessages *this$0_;
}
@end

J2OBJC_FIELD_SETTER(ImActorModelModulesMessages_$7, this$0_, ImActorModelModulesMessages *)

@interface ImActorModelModulesMessages_$8 () {
 @public
  ImActorModelModulesMessages *this$0_;
  AMPeer *val$peer_;
}
@end

J2OBJC_FIELD_SETTER(ImActorModelModulesMessages_$8, this$0_, ImActorModelModulesMessages *)
J2OBJC_FIELD_SETTER(ImActorModelModulesMessages_$8, val$peer_, AMPeer *)

@interface ImActorModelModulesMessages_$9 () {
 @public
  ImActorModelModulesMessages *this$0_;
  AMPeer *val$peer_;
}
@end

J2OBJC_FIELD_SETTER(ImActorModelModulesMessages_$9, this$0_, ImActorModelModulesMessages *)
J2OBJC_FIELD_SETTER(ImActorModelModulesMessages_$9, val$peer_, AMPeer *)

@interface ImActorModelModulesMessages_$10 () {
 @public
  ImActorModelModulesMessages *this$0_;
  AMPeer *val$peer_;
}
@end

J2OBJC_FIELD_SETTER(ImActorModelModulesMessages_$10, this$0_, ImActorModelModulesMessages *)
J2OBJC_FIELD_SETTER(ImActorModelModulesMessages_$10, val$peer_, AMPeer *)

@interface ImActorModelModulesMessages_$10_$1 () {
 @public
  id<AMCommandCallback> val$callback_;
}
@end

J2OBJC_FIELD_SETTER(ImActorModelModulesMessages_$10_$1, val$callback_, id<AMCommandCallback>)

@interface ImActorModelModulesMessages_$10_$2 () {
 @public
  id<AMCommandCallback> val$callback_;
}
@end

J2OBJC_FIELD_SETTER(ImActorModelModulesMessages_$10_$2, val$callback_, id<AMCommandCallback>)

@interface ImActorModelModulesMessages_$10_$3 () {
 @public
  id<AMCommandCallback> val$callback_;
}
@end

J2OBJC_FIELD_SETTER(ImActorModelModulesMessages_$10_$3, val$callback_, id<AMCommandCallback>)

@interface ImActorModelModulesMessages_$10_$4 () {
 @public
  ImActorModelModulesMessages_$10 *this$0_;
  ImActorModelApiPeer *val$apiPeer_;
  id<AMCommandCallback> val$callback_;
}
@end

J2OBJC_FIELD_SETTER(ImActorModelModulesMessages_$10_$4, this$0_, ImActorModelModulesMessages_$10 *)
J2OBJC_FIELD_SETTER(ImActorModelModulesMessages_$10_$4, val$apiPeer_, ImActorModelApiPeer *)
J2OBJC_FIELD_SETTER(ImActorModelModulesMessages_$10_$4, val$callback_, id<AMCommandCallback>)

@interface ImActorModelModulesMessages_$10_$4_$1 () {
 @public
  ImActorModelModulesMessages_$10_$4 *this$0_;
}
@end

J2OBJC_FIELD_SETTER(ImActorModelModulesMessages_$10_$4_$1, this$0_, ImActorModelModulesMessages_$10_$4 *)

@interface ImActorModelModulesMessages_$10_$4_$2 () {
 @public
  ImActorModelModulesMessages_$10_$4 *this$0_;
  AMRpcException *val$e_;
}
@end

J2OBJC_FIELD_SETTER(ImActorModelModulesMessages_$10_$4_$2, this$0_, ImActorModelModulesMessages_$10_$4 *)
J2OBJC_FIELD_SETTER(ImActorModelModulesMessages_$10_$4_$2, val$e_, AMRpcException *)

@interface ImActorModelModulesMessages_$11 () {
 @public
  ImActorModelModulesMessages *this$0_;
  AMPeer *val$peer_;
}
@end

J2OBJC_FIELD_SETTER(ImActorModelModulesMessages_$11, this$0_, ImActorModelModulesMessages *)
J2OBJC_FIELD_SETTER(ImActorModelModulesMessages_$11, val$peer_, AMPeer *)

@interface ImActorModelModulesMessages_$11_$1 () {
 @public
  id<AMCommandCallback> val$callback_;
}
@end

J2OBJC_FIELD_SETTER(ImActorModelModulesMessages_$11_$1, val$callback_, id<AMCommandCallback>)

@interface ImActorModelModulesMessages_$11_$2 () {
 @public
  id<AMCommandCallback> val$callback_;
}
@end

J2OBJC_FIELD_SETTER(ImActorModelModulesMessages_$11_$2, val$callback_, id<AMCommandCallback>)

@interface ImActorModelModulesMessages_$11_$3 () {
 @public
  id<AMCommandCallback> val$callback_;
}
@end

J2OBJC_FIELD_SETTER(ImActorModelModulesMessages_$11_$3, val$callback_, id<AMCommandCallback>)

@interface ImActorModelModulesMessages_$11_$4 () {
 @public
  ImActorModelModulesMessages_$11 *this$0_;
  ImActorModelApiPeer *val$apiPeer_;
  id<AMCommandCallback> val$callback_;
}
@end

J2OBJC_FIELD_SETTER(ImActorModelModulesMessages_$11_$4, this$0_, ImActorModelModulesMessages_$11 *)
J2OBJC_FIELD_SETTER(ImActorModelModulesMessages_$11_$4, val$apiPeer_, ImActorModelApiPeer *)
J2OBJC_FIELD_SETTER(ImActorModelModulesMessages_$11_$4, val$callback_, id<AMCommandCallback>)

@interface ImActorModelModulesMessages_$11_$4_$1 () {
 @public
  ImActorModelModulesMessages_$11_$4 *this$0_;
}
@end

J2OBJC_FIELD_SETTER(ImActorModelModulesMessages_$11_$4_$1, this$0_, ImActorModelModulesMessages_$11_$4 *)

@interface ImActorModelModulesMessages_$11_$4_$2 () {
 @public
  ImActorModelModulesMessages_$11_$4 *this$0_;
  AMRpcException *val$e_;
}
@end

J2OBJC_FIELD_SETTER(ImActorModelModulesMessages_$11_$4_$2, this$0_, ImActorModelModulesMessages_$11_$4 *)
J2OBJC_FIELD_SETTER(ImActorModelModulesMessages_$11_$4_$2, val$e_, AMRpcException *)


#line 47
@implementation ImActorModelModulesMessages


#line 66
- (instancetype)initWithImActorModelModulesModules:(ImActorModelModulesModules *)messenger {
  if (self =
#line 67
  [super initWithImActorModelModulesModules:messenger]) {
    conversationEngines_ =
#line 58
    [[JavaUtilHashMap alloc] init];
    conversationMediaEngines_ =
#line 59
    [[JavaUtilHashMap alloc] init];
    conversationActors_ =
#line 60
    [[JavaUtilHashMap alloc] init];
    conversationHistoryActors_ =
#line 61
    [[JavaUtilHashMap alloc] init];
    
#line 69
    self->conversationPending_ = [[DKSyncKeyValue alloc] initWithDKKeyValueStorage:[((id<AMStorageProvider>) nil_chk([self storage])) createKeyValue:ImActorModelModulesBaseModule_get_STORAGE_PENDING_()]];
    
#line 70
    self->cursorStorage_ = [[DKSyncKeyValue alloc] initWithDKKeyValueStorage:[((id<AMStorageProvider>) nil_chk([self storage])) createKeyValue:ImActorModelModulesBaseModule_get_STORAGE_CURSOR_()]];
    
#line 71
    self->dialogs_ = [((id<AMStorageProvider>) nil_chk([self storage])) createDialogsListWithDKListStorage:[((id<AMStorageProvider>) nil_chk([self storage])) createList:ImActorModelModulesBaseModule_get_STORAGE_DIALOGS_()]];
  }
  return self;
}


#line 74
- (void)run {
  
#line 75
  self->dialogsActor_ = [((DKActorSystem *) nil_chk(DKActorSystem_system())) actorOfWithDKProps:DKProps_createWithIOSClass_withDKActorCreator_(ImActorModelModulesMessagesDialogsActor_class_(), [[ImActorModelModulesMessages_$1 alloc] initWithImActorModelModulesMessages:self]) withNSString:
#line 80
  @"actor/dialogs"];
  self->dialogsHistoryActor_ = [((DKActorSystem *) nil_chk(DKActorSystem_system())) actorOfWithDKProps:DKProps_createWithIOSClass_withDKActorCreator_(ImActorModelModulesMessagesDialogsHistoryActor_class_(), [[ImActorModelModulesMessages_$2 alloc] initWithImActorModelModulesMessages:self]) withNSString:
#line 86
  @"actor/dialogs/history"];
  self->ownReadActor_ = [((DKActorSystem *) nil_chk(DKActorSystem_system())) actorOfWithDKProps:DKProps_createWithIOSClass_withDKActorCreator_(ImActorModelModulesMessagesOwnReadActor_class_(), [[ImActorModelModulesMessages_$3 alloc] initWithImActorModelModulesMessages:self]) withNSString:
#line 92
  @"actor/read/own"];
  self->plainReadActor_ = [((DKActorSystem *) nil_chk(DKActorSystem_system())) actorOfWithDKProps:DKProps_createWithIOSClass_withDKActorCreator_(ImActorModelModulesMessagesPlainReaderActor_class_(), [[ImActorModelModulesMessages_$4 alloc] initWithImActorModelModulesMessages:self]) withNSString:
#line 98
  @"actor/plain/read"];
  self->plainReceiverActor_ = [((DKActorSystem *) nil_chk(DKActorSystem_system())) actorOfWithDKProps:DKProps_createWithIOSClass_withDKActorCreator_(ImActorModelModulesMessagesPlainReceiverActor_class_(), [[ImActorModelModulesMessages_$5 alloc] initWithImActorModelModulesMessages:self]) withNSString:
#line 104
  @"actor/plain/receive"];
  self->sendMessageActor_ = [((DKActorSystem *) nil_chk(DKActorSystem_system())) actorOfWithDKProps:DKProps_createWithIOSClass_withDKActorCreator_(ImActorModelModulesMessagesSenderActor_class_(), [[ImActorModelModulesMessages_$6 alloc] initWithImActorModelModulesMessages:self]) withNSString:
#line 110
  @"actor/sender/small"];
  self->deletionsActor_ = [((DKActorSystem *) nil_chk(DKActorSystem_system())) actorOfWithDKProps:DKProps_createWithIOSClass_withDKActorCreator_(ImActorModelModulesMessagesMessageDeleteActor_class_(), [[ImActorModelModulesMessages_$7 alloc] initWithImActorModelModulesMessages:self]) withNSString:
#line 116
  @"actor/deletions"];
}


#line 119
- (DKActorRef *)getSendMessageActor {
  
#line 120
  return sendMessageActor_;
}


#line 123
- (DKActorRef *)getPlainReadActor {
  
#line 124
  return plainReadActor_;
}


#line 127
- (DKActorRef *)getPlainReceiverActor {
  
#line 128
  return plainReceiverActor_;
}


#line 131
- (DKActorRef *)getOwnReadActor {
  
#line 132
  return ownReadActor_;
}


#line 135
- (DKSyncKeyValue *)getConversationPending {
  
#line 136
  return conversationPending_;
}


#line 139
- (DKSyncKeyValue *)getCursorStorage {
  
#line 140
  return cursorStorage_;
}


#line 143
- (void)assumeConvActorWithAMPeer:(AMPeer *)peer {
  ImActorModelModulesMessages_assumeConvActorWithAMPeer_(self, peer);
}


#line 163
- (DKActorRef *)getConversationHistoryActorWithAMPeer:(AMPeer *)peer {
  
#line 164
  ImActorModelModulesMessages_assumeConvActorWithAMPeer_(self, peer);
  @synchronized(conversationActors_) {
    return [((JavaUtilHashMap *) nil_chk(conversationHistoryActors_)) getWithId:peer];
  }
}


#line 170
- (DKActorRef *)getConversationActorWithAMPeer:(AMPeer *)peer {
  
#line 171
  ImActorModelModulesMessages_assumeConvActorWithAMPeer_(self, peer);
  @synchronized(conversationActors_) {
    return [((JavaUtilHashMap *) nil_chk(conversationActors_)) getWithId:peer];
  }
}


#line 177
- (void)onConversationOpenWithAMPeer:(AMPeer *)peer {
  
#line 178
  ImActorModelModulesMessages_assumeConvActorWithAMPeer_(self, peer);
}


#line 181
- (id<DKListEngine>)getConversationEngineWithAMPeer:(AMPeer *)peer {
  
#line 182
  @synchronized(conversationEngines_) {
    if (![((JavaUtilHashMap *) nil_chk(conversationEngines_)) containsKeyWithId:peer]) {
      id<DKListStorage> storage = [((id<AMStorageProvider>) nil_chk([self storage])) createList:JreStrcat("$J", ImActorModelModulesBaseModule_get_STORAGE_CHAT_PREFIX_(), [((AMPeer *) nil_chk(peer)) getUnuqueId])];
      (void) [conversationEngines_ putWithId:peer withId:[((id<AMStorageProvider>) nil_chk([self storage])) createMessagesListWithAMPeer:peer withDKListStorage:storage]];
    }
    return [conversationEngines_ getWithId:peer];
  }
}


#line 191
- (id<DKListEngine>)getMediaEngineWithAMPeer:(AMPeer *)peer {
  
#line 192
  @synchronized(conversationMediaEngines_) {
    if (![((JavaUtilHashMap *) nil_chk(conversationMediaEngines_)) containsKeyWithId:peer]) {
      id<DKListStorage> storage = [((id<AMStorageProvider>) nil_chk([self storage])) createList:JreStrcat("$J", ImActorModelModulesBaseModule_get_STORAGE_CHAT_MEDIA_PREFIX_(), [((AMPeer *) nil_chk(peer)) getUnuqueId])];
      (void) [conversationMediaEngines_ putWithId:peer withId:[((id<AMStorageProvider>) nil_chk([self storage])) createMessagesListWithAMPeer:peer withDKListStorage:storage]];
    }
    return [conversationMediaEngines_ getWithId:peer];
  }
}


#line 201
- (DKActorRef *)getDialogsActor {
  
#line 202
  return dialogsActor_;
}


#line 205
- (DKActorRef *)getDialogsHistoryActor {
  
#line 206
  return dialogsHistoryActor_;
}


#line 209
- (id<DKListEngine>)getDialogsEngine {
  
#line 210
  return dialogs_;
}


#line 213
- (void)deleteMessagesWithAMPeer:(AMPeer *)peer
                   withLongArray:(IOSLongArray *)rids {
  
#line 214
  DKActorRef *conversationActor = [self getConversationActorWithAMPeer:peer];
  JavaUtilArrayList *deleted = [[JavaUtilArrayList alloc] init];
  {
    IOSLongArray *a__ =
#line 216
    rids;
    jlong const *b__ = ((IOSLongArray *) nil_chk(a__))->buffer_;
    jlong const *e__ = b__ + a__->size_;
    while (b__ < e__) {
      jlong rid = *b__++;
      
#line 217
      [deleted addWithId:JavaLangLong_valueOfWithLong_(rid)];
    }
  }
  
#line 219
  [((DKActorRef *) nil_chk(conversationActor)) sendWithId:[[ImActorModelModulesMessagesConversationActor_MessagesDeleted alloc] initWithJavaUtilList:deleted]];
  [((DKActorRef *) nil_chk(deletionsActor_)) sendWithId:[[ImActorModelModulesMessagesMessageDeleteActor_DeleteMessage alloc] initWithAMPeer:peer withLongArray:rids]];
}


#line 223
- (void)loadMoreDialogs {
  
#line 224
  [((DKActorRef *) nil_chk(dialogsHistoryActor_)) sendWithId:[[ImActorModelModulesMessagesDialogsHistoryActor_LoadMore alloc] init]];
}


#line 227
- (void)loadMoreHistoryWithAMPeer:(AMPeer *)peer {
  
#line 228
  [((DKActorRef *) nil_chk([self getConversationHistoryActorWithAMPeer:peer])) sendWithId:[[ImActorModelModulesMessagesConversationHistoryActor_LoadMore alloc] init]];
}


#line 231
- (void)sendMessageWithAMPeer:(AMPeer *)peer
                 withNSString:(NSString *)message {
  
#line 232
  [((DKActorRef *) nil_chk(sendMessageActor_)) sendWithId:[[ImActorModelModulesMessagesSenderActor_SendText alloc] initWithAMPeer:peer withNSString:message]];
}


#line 235
- (void)sendPhotoWithAMPeer:(AMPeer *)peer
               withNSString:(NSString *)fileName
                    withInt:(jint)w
                    withInt:(jint)h
            withAMFastThumb:(AMFastThumb *)fastThumb
  withAMFileSystemReference:(id<AMFileSystemReference>)fileSystemReference {
  
#line 237
  [((DKActorRef *) nil_chk(sendMessageActor_)) sendWithId:[[ImActorModelModulesMessagesSenderActor_SendPhoto alloc] initWithAMPeer:peer withAMFastThumb:fastThumb withNSString:
#line 238
  [((id<AMFileSystemReference>) nil_chk(fileSystemReference)) getDescriptor] withNSString:
#line 239
  fileName withInt:[fileSystemReference getSize] withInt:w withInt:h]];
}


#line 242
- (void)sendVideoWithAMPeer:(AMPeer *)peer
               withNSString:(NSString *)fileName
                    withInt:(jint)w
                    withInt:(jint)h
                    withInt:(jint)duration
            withAMFastThumb:(AMFastThumb *)fastThumb
  withAMFileSystemReference:(id<AMFileSystemReference>)fileSystemReference {
  
#line 244
  [((DKActorRef *) nil_chk(sendMessageActor_)) sendWithId:[[ImActorModelModulesMessagesSenderActor_SendVideo alloc] initWithAMPeer:peer withNSString:fileName withInt:w withInt:h withInt:duration withAMFastThumb:
#line 245
  fastThumb withNSString:[((id<AMFileSystemReference>) nil_chk(fileSystemReference)) getDescriptor] withInt:[fileSystemReference getSize]]];
}


#line 248
- (void)sendDocumentWithAMPeer:(AMPeer *)peer
                  withNSString:(NSString *)fileName
                  withNSString:(NSString *)mimeType
               withAMFastThumb:(AMFastThumb *)fastThumb
     withAMFileSystemReference:(id<AMFileSystemReference>)fileSystemReference {
  
#line 250
  [((DKActorRef *) nil_chk(sendMessageActor_)) sendWithId:[[ImActorModelModulesMessagesSenderActor_SendDocument alloc] initWithAMPeer:peer withNSString:fileName withNSString:mimeType withInt:
#line 251
  [((id<AMFileSystemReference>) nil_chk(fileSystemReference)) getSize] withNSString:[fileSystemReference getDescriptor] withAMFastThumb:fastThumb]];
}


#line 254
- (void)onInMessageShownWithAMPeer:(AMPeer *)peer
                          withLong:(jlong)rid
                          withLong:(jlong)sortDate
                       withBoolean:(jboolean)isEncrypted {
  
#line 255
  [((DKActorRef *) nil_chk(ownReadActor_)) sendWithId:[[ImActorModelModulesMessagesOwnReadActor_MessageRead alloc] initWithAMPeer:peer withLong:rid withLong:sortDate withBoolean:isEncrypted]];
}


#line 258
- (void)saveReadStateWithAMPeer:(AMPeer *)peer
                       withLong:(jlong)lastReadDate {
  
#line 259
  [((id<DKPreferencesStorage>) nil_chk([self preferences])) putLong:JreStrcat("$J", @"read_state_", [((AMPeer *) nil_chk(peer)) getUnuqueId]) withValue:lastReadDate];
}


#line 262
- (jlong)loadReadStateWithAMPeer:(AMPeer *)peer {
  
#line 263
  return [((id<DKPreferencesStorage>) nil_chk([self preferences])) getLong:JreStrcat("$J", @"read_state_", [((AMPeer *) nil_chk(peer)) getUnuqueId]) withDefault:0];
}


#line 266
- (void)saveDraftWithAMPeer:(AMPeer *)peer
               withNSString:(NSString *)draft {
  
#line 267
  [((id<DKPreferencesStorage>) nil_chk([self preferences])) putString:JreStrcat("$J", @"draft_", [((AMPeer *) nil_chk(peer)) getUnuqueId]) withValue:[((NSString *) nil_chk(draft)) trim]];
}


#line 270
- (NSString *)loadDraftWithAMPeer:(AMPeer *)peer {
  
#line 271
  NSString *res = [((id<DKPreferencesStorage>) nil_chk([self preferences])) getString:JreStrcat("$J", @"draft_", [((AMPeer *) nil_chk(peer)) getUnuqueId])];
  if (res == nil) {
    return @"";
  }
  else {
    
#line 275
    return res;
  }
}


#line 279
- (id<AMCommand>)deleteChatWithAMPeer:(AMPeer *)peer {
  
#line 280
  return [[ImActorModelModulesMessages_$10 alloc] initWithImActorModelModulesMessages:self withAMPeer:peer];
}


#line 353
- (id<AMCommand>)clearChatWithAMPeer:(AMPeer *)peer {
  
#line 354
  return [[ImActorModelModulesMessages_$11 alloc] initWithImActorModelModulesMessages:self withAMPeer:peer];
}

- (void)copyAllFieldsTo:(ImActorModelModulesMessages *)other {
  [super copyAllFieldsTo:other];
  other->dialogs_ = dialogs_;
  other->dialogsActor_ = dialogsActor_;
  other->dialogsHistoryActor_ = dialogsHistoryActor_;
  other->ownReadActor_ = ownReadActor_;
  other->plainReadActor_ = plainReadActor_;
  other->plainReceiverActor_ = plainReceiverActor_;
  other->sendMessageActor_ = sendMessageActor_;
  other->deletionsActor_ = deletionsActor_;
  other->conversationEngines_ = conversationEngines_;
  other->conversationMediaEngines_ = conversationMediaEngines_;
  other->conversationActors_ = conversationActors_;
  other->conversationHistoryActors_ = conversationHistoryActors_;
  other->conversationPending_ = conversationPending_;
  other->cursorStorage_ = cursorStorage_;
}

@end

void ImActorModelModulesMessages_assumeConvActorWithAMPeer_(ImActorModelModulesMessages *self, AMPeer *peer) {
  
#line 144
  @synchronized(self->conversationActors_) {
    if (![((JavaUtilHashMap *) nil_chk(self->conversationActors_)) containsKeyWithId:peer]) {
      (void) [self->conversationActors_ putWithId:peer withId:[((DKActorSystem *) nil_chk(DKActorSystem_system())) actorOfWithDKProps:DKProps_createWithIOSClass_withDKActorCreator_(ImActorModelModulesMessagesConversationActor_class_(),
#line 147
      [[ImActorModelModulesMessages_$8 alloc] initWithImActorModelModulesMessages:self withAMPeer:peer]) withNSString:JreStrcat("$@CI", @"actor/conv_",
#line 152
      [((AMPeer *) nil_chk(peer)) getPeerType], '_', [peer getPeerId])]];
      (void) [((JavaUtilHashMap *) nil_chk(self->conversationHistoryActors_)) putWithId:peer withId:[((DKActorSystem *) nil_chk(DKActorSystem_system())) actorOfWithDKProps:DKProps_createWithIOSClass_withDKActorCreator_(ImActorModelModulesMessagesConversationHistoryActor_class_(), [[ImActorModelModulesMessages_$9 alloc] initWithImActorModelModulesMessages:self withAMPeer:peer]) withNSString:JreStrcat("$@CI$", @"actor/conv_",
#line 158
      [peer getPeerType], '_', [peer getPeerId], @"/history")]];
    }
  }
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(ImActorModelModulesMessages)


#line 427
@implementation ImActorModelModulesMessages_ConversationHolder


#line 431
- (instancetype)initWithImActorModelModulesMessages:(ImActorModelModulesMessages *)outer$
                                     withDKActorRef:(DKActorRef *)conversationActor
                                     withDKActorRef:(DKActorRef *)historyActor {
  if (self = [super init]) {
    
#line 432
    self->conversationActor_ = conversationActor;
    
#line 433
    self->historyActor_ = historyActor;
  }
  return self;
}


#line 436
- (DKActorRef *)getConversationActor {
  
#line 437
  return conversationActor_;
}


#line 440
- (DKActorRef *)getHistoryActor {
  
#line 441
  return historyActor_;
}

- (void)copyAllFieldsTo:(ImActorModelModulesMessages_ConversationHolder *)other {
  [super copyAllFieldsTo:other];
  other->conversationActor_ = conversationActor_;
  other->historyActor_ = historyActor_;
}

@end

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(ImActorModelModulesMessages_ConversationHolder)

@implementation ImActorModelModulesMessages_$1


#line 77
- (ImActorModelModulesMessagesDialogsActor *)create {
  
#line 78
  return [[ImActorModelModulesMessagesDialogsActor alloc] initWithImActorModelModulesModules:[this$0_ modules]];
}

- (instancetype)initWithImActorModelModulesMessages:(ImActorModelModulesMessages *)outer$ {
  this$0_ = outer$;
  return [super init];
}

- (void)copyAllFieldsTo:(ImActorModelModulesMessages_$1 *)other {
  [super copyAllFieldsTo:other];
  other->this$0_ = this$0_;
}

@end

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(ImActorModelModulesMessages_$1)

@implementation ImActorModelModulesMessages_$2


#line 83
- (ImActorModelModulesMessagesDialogsHistoryActor *)create {
  
#line 84
  return [[ImActorModelModulesMessagesDialogsHistoryActor alloc] initWithImActorModelModulesModules:[this$0_ modules]];
}

- (instancetype)initWithImActorModelModulesMessages:(ImActorModelModulesMessages *)outer$ {
  this$0_ = outer$;
  return [super init];
}

- (void)copyAllFieldsTo:(ImActorModelModulesMessages_$2 *)other {
  [super copyAllFieldsTo:other];
  other->this$0_ = this$0_;
}

@end

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(ImActorModelModulesMessages_$2)

@implementation ImActorModelModulesMessages_$3


#line 89
- (ImActorModelModulesMessagesOwnReadActor *)create {
  
#line 90
  return [[ImActorModelModulesMessagesOwnReadActor alloc] initWithImActorModelModulesModules:[this$0_ modules]];
}

- (instancetype)initWithImActorModelModulesMessages:(ImActorModelModulesMessages *)outer$ {
  this$0_ = outer$;
  return [super init];
}

- (void)copyAllFieldsTo:(ImActorModelModulesMessages_$3 *)other {
  [super copyAllFieldsTo:other];
  other->this$0_ = this$0_;
}

@end

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(ImActorModelModulesMessages_$3)

@implementation ImActorModelModulesMessages_$4


#line 95
- (ImActorModelModulesMessagesPlainReaderActor *)create {
  
#line 96
  return [[ImActorModelModulesMessagesPlainReaderActor alloc] initWithImActorModelModulesModules:[this$0_ modules]];
}

- (instancetype)initWithImActorModelModulesMessages:(ImActorModelModulesMessages *)outer$ {
  this$0_ = outer$;
  return [super init];
}

- (void)copyAllFieldsTo:(ImActorModelModulesMessages_$4 *)other {
  [super copyAllFieldsTo:other];
  other->this$0_ = this$0_;
}

@end

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(ImActorModelModulesMessages_$4)

@implementation ImActorModelModulesMessages_$5


#line 101
- (ImActorModelModulesMessagesPlainReceiverActor *)create {
  
#line 102
  return [[ImActorModelModulesMessagesPlainReceiverActor alloc] initWithImActorModelModulesModules:[this$0_ modules]];
}

- (instancetype)initWithImActorModelModulesMessages:(ImActorModelModulesMessages *)outer$ {
  this$0_ = outer$;
  return [super init];
}

- (void)copyAllFieldsTo:(ImActorModelModulesMessages_$5 *)other {
  [super copyAllFieldsTo:other];
  other->this$0_ = this$0_;
}

@end

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(ImActorModelModulesMessages_$5)

@implementation ImActorModelModulesMessages_$6


#line 107
- (ImActorModelModulesMessagesSenderActor *)create {
  
#line 108
  return [[ImActorModelModulesMessagesSenderActor alloc] initWithImActorModelModulesModules:[this$0_ modules]];
}

- (instancetype)initWithImActorModelModulesMessages:(ImActorModelModulesMessages *)outer$ {
  this$0_ = outer$;
  return [super init];
}

- (void)copyAllFieldsTo:(ImActorModelModulesMessages_$6 *)other {
  [super copyAllFieldsTo:other];
  other->this$0_ = this$0_;
}

@end

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(ImActorModelModulesMessages_$6)

@implementation ImActorModelModulesMessages_$7


#line 113
- (ImActorModelModulesMessagesMessageDeleteActor *)create {
  
#line 114
  return [[ImActorModelModulesMessagesMessageDeleteActor alloc] initWithImActorModelModulesModules:[this$0_ modules]];
}

- (instancetype)initWithImActorModelModulesMessages:(ImActorModelModulesMessages *)outer$ {
  this$0_ = outer$;
  return [super init];
}

- (void)copyAllFieldsTo:(ImActorModelModulesMessages_$7 *)other {
  [super copyAllFieldsTo:other];
  other->this$0_ = this$0_;
}

@end

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(ImActorModelModulesMessages_$7)

@implementation ImActorModelModulesMessages_$8


#line 149
- (ImActorModelModulesMessagesConversationActor *)create {
  
#line 150
  return [[ImActorModelModulesMessagesConversationActor alloc] initWithAMPeer:val$peer_ withImActorModelModulesModules:[this$0_ modules]];
}

- (instancetype)initWithImActorModelModulesMessages:(ImActorModelModulesMessages *)outer$
                                         withAMPeer:(AMPeer *)capture$0 {
  this$0_ = outer$;
  val$peer_ = capture$0;
  return [super init];
}

- (void)copyAllFieldsTo:(ImActorModelModulesMessages_$8 *)other {
  [super copyAllFieldsTo:other];
  other->this$0_ = this$0_;
  other->val$peer_ = val$peer_;
}

@end

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(ImActorModelModulesMessages_$8)

@implementation ImActorModelModulesMessages_$9


#line 155
- (ImActorModelModulesMessagesConversationHistoryActor *)create {
  
#line 156
  return [[ImActorModelModulesMessagesConversationHistoryActor alloc] initWithAMPeer:val$peer_ withImActorModelModulesModules:[this$0_ modules]];
}

- (instancetype)initWithImActorModelModulesMessages:(ImActorModelModulesMessages *)outer$
                                         withAMPeer:(AMPeer *)capture$0 {
  this$0_ = outer$;
  val$peer_ = capture$0;
  return [super init];
}

- (void)copyAllFieldsTo:(ImActorModelModulesMessages_$9 *)other {
  [super copyAllFieldsTo:other];
  other->this$0_ = this$0_;
  other->val$peer_ = val$peer_;
}

@end

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(ImActorModelModulesMessages_$9)

@implementation ImActorModelModulesMessages_$10


#line 282
- (void)startWithAMCommandCallback:(id<AMCommandCallback>)callback {
  
#line 283
  ImActorModelApiOutPeer *outPeer;
  ImActorModelApiPeer *apiPeer;
  if ([((AMPeer *) nil_chk(val$peer_)) getPeerType] == AMPeerTypeEnum_get_PRIVATE()) {
    AMUser *user = [((id<DKKeyValueEngine>) nil_chk([this$0_ users])) getValueWithLong:[val$peer_ getPeerId]];
    if (user == nil) {
      [this$0_ runOnUiThreadWithJavaLangRunnable:[[ImActorModelModulesMessages_$10_$1 alloc] initWithAMCommandCallback:callback]];
      
#line 294
      return;
    }
    outPeer = [[ImActorModelApiOutPeer alloc] initWithImActorModelApiPeerTypeEnum:ImActorModelApiPeerTypeEnum_get_PRIVATE() withInt:[((AMUser *) nil_chk(user)) getUid] withLong:
#line 297
    [user getAccessHash]];
    apiPeer = [[ImActorModelApiPeer alloc] initWithImActorModelApiPeerTypeEnum:ImActorModelApiPeerTypeEnum_get_PRIVATE() withInt:
#line 299
    [user getUid]];
  }
  else
#line 300
  if ([val$peer_ getPeerType] == AMPeerTypeEnum_get_GROUP()) {
    AMGroup *group = [((id<DKKeyValueEngine>) nil_chk([this$0_ groups])) getValueWithLong:[val$peer_ getPeerId]];
    if (group == nil) {
      [this$0_ runOnUiThreadWithJavaLangRunnable:[[ImActorModelModulesMessages_$10_$2 alloc] initWithAMCommandCallback:callback]];
      
#line 309
      return;
    }
    outPeer = [[ImActorModelApiOutPeer alloc] initWithImActorModelApiPeerTypeEnum:ImActorModelApiPeerTypeEnum_get_GROUP() withInt:[((AMGroup *) nil_chk(group)) getGroupId] withLong:
#line 312
    [group getAccessHash]];
    apiPeer = [[ImActorModelApiPeer alloc] initWithImActorModelApiPeerTypeEnum:ImActorModelApiPeerTypeEnum_get_GROUP() withInt:
#line 314
    [group getGroupId]];
  }
  else {
    
#line 316
    [this$0_ runOnUiThreadWithJavaLangRunnable:[[ImActorModelModulesMessages_$10_$3 alloc] initWithAMCommandCallback:callback]];
    
#line 322
    return;
  }
  [this$0_ requestWithImActorModelNetworkParserRequest:[[ImActorModelApiRpcRequestDeleteChat alloc] initWithImActorModelApiOutPeer:outPeer] withAMRpcCallback:[[ImActorModelModulesMessages_$10_$4 alloc] initWithImActorModelModulesMessages_$10:self withImActorModelApiPeer:apiPeer withAMCommandCallback:callback]];
}

- (instancetype)initWithImActorModelModulesMessages:(ImActorModelModulesMessages *)outer$
                                         withAMPeer:(AMPeer *)capture$0 {
  this$0_ = outer$;
  val$peer_ = capture$0;
  return [super init];
}

- (void)copyAllFieldsTo:(ImActorModelModulesMessages_$10 *)other {
  [super copyAllFieldsTo:other];
  other->this$0_ = this$0_;
  other->val$peer_ = val$peer_;
}

@end

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(ImActorModelModulesMessages_$10)

@implementation ImActorModelModulesMessages_$10_$1


#line 290
- (void)run {
  
#line 291
  [((id<AMCommandCallback>) nil_chk(val$callback_)) onErrorWithJavaLangException:[[AMRpcInternalException alloc] init]];
}

- (instancetype)initWithAMCommandCallback:(id<AMCommandCallback>)capture$0 {
  val$callback_ = capture$0;
  return [super init];
}

- (void)copyAllFieldsTo:(ImActorModelModulesMessages_$10_$1 *)other {
  [super copyAllFieldsTo:other];
  other->val$callback_ = val$callback_;
}

@end

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(ImActorModelModulesMessages_$10_$1)

@implementation ImActorModelModulesMessages_$10_$2


#line 305
- (void)run {
  
#line 306
  [((id<AMCommandCallback>) nil_chk(val$callback_)) onErrorWithJavaLangException:[[AMRpcInternalException alloc] init]];
}

- (instancetype)initWithAMCommandCallback:(id<AMCommandCallback>)capture$0 {
  val$callback_ = capture$0;
  return [super init];
}

- (void)copyAllFieldsTo:(ImActorModelModulesMessages_$10_$2 *)other {
  [super copyAllFieldsTo:other];
  other->val$callback_ = val$callback_;
}

@end

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(ImActorModelModulesMessages_$10_$2)

@implementation ImActorModelModulesMessages_$10_$3


#line 318
- (void)run {
  
#line 319
  [((id<AMCommandCallback>) nil_chk(val$callback_)) onErrorWithJavaLangException:[[AMRpcInternalException alloc] init]];
}

- (instancetype)initWithAMCommandCallback:(id<AMCommandCallback>)capture$0 {
  val$callback_ = capture$0;
  return [super init];
}

- (void)copyAllFieldsTo:(ImActorModelModulesMessages_$10_$3 *)other {
  [super copyAllFieldsTo:other];
  other->val$callback_ = val$callback_;
}

@end

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(ImActorModelModulesMessages_$10_$3)

@implementation ImActorModelModulesMessages_$10_$4


#line 326
- (void)onResultWithImActorModelNetworkParserResponse:(ImActorModelApiRpcResponseSeq *)response {
  
#line 327
  [((ImActorModelModulesUpdates *) nil_chk([this$0_->this$0_ updates])) onUpdateReceivedWithId:[[ImActorModelApiBaseSeqUpdate alloc] initWithInt:[((ImActorModelApiRpcResponseSeq *) nil_chk(response)) getSeq] withByteArray:
#line 328
  [response getState] withInt:
#line 329
  ImActorModelApiUpdatesUpdateChatDelete_HEADER withByteArray:
#line 330
  [((ImActorModelApiUpdatesUpdateChatDelete *) [[ImActorModelApiUpdatesUpdateChatDelete alloc] initWithImActorModelApiPeer:val$apiPeer_]) toByteArray]]];
  [this$0_->this$0_ runOnUiThreadWithJavaLangRunnable:[[ImActorModelModulesMessages_$10_$4_$1 alloc] initWithImActorModelModulesMessages_$10_$4:self]];
}


#line 340
- (void)onErrorWithAMRpcException:(AMRpcException *)e {
  
#line 341
  [this$0_->this$0_ runOnUiThreadWithJavaLangRunnable:[[ImActorModelModulesMessages_$10_$4_$2 alloc] initWithImActorModelModulesMessages_$10_$4:self withAMRpcException:e]];
}

- (instancetype)initWithImActorModelModulesMessages_$10:(ImActorModelModulesMessages_$10 *)outer$
                                withImActorModelApiPeer:(ImActorModelApiPeer *)capture$0
                                  withAMCommandCallback:(id<AMCommandCallback>)capture$1 {
  this$0_ = outer$;
  val$apiPeer_ = capture$0;
  val$callback_ = capture$1;
  return [super init];
}

- (void)copyAllFieldsTo:(ImActorModelModulesMessages_$10_$4 *)other {
  [super copyAllFieldsTo:other];
  other->this$0_ = this$0_;
  other->val$apiPeer_ = val$apiPeer_;
  other->val$callback_ = val$callback_;
}

@end

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(ImActorModelModulesMessages_$10_$4)

@implementation ImActorModelModulesMessages_$10_$4_$1


#line 333
- (void)run {
  
#line 334
  [((id<AMCommandCallback>) nil_chk(this$0_->val$callback_)) onResultWithId:JavaLangBoolean_valueOfWithBoolean_(YES)];
}

- (instancetype)initWithImActorModelModulesMessages_$10_$4:(ImActorModelModulesMessages_$10_$4 *)outer$ {
  this$0_ = outer$;
  return [super init];
}

- (void)copyAllFieldsTo:(ImActorModelModulesMessages_$10_$4_$1 *)other {
  [super copyAllFieldsTo:other];
  other->this$0_ = this$0_;
}

@end

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(ImActorModelModulesMessages_$10_$4_$1)

@implementation ImActorModelModulesMessages_$10_$4_$2


#line 343
- (void)run {
  
#line 344
  [((id<AMCommandCallback>) nil_chk(this$0_->val$callback_)) onErrorWithJavaLangException:val$e_];
}

- (instancetype)initWithImActorModelModulesMessages_$10_$4:(ImActorModelModulesMessages_$10_$4 *)outer$
                                        withAMRpcException:(AMRpcException *)capture$0 {
  this$0_ = outer$;
  val$e_ = capture$0;
  return [super init];
}

- (void)copyAllFieldsTo:(ImActorModelModulesMessages_$10_$4_$2 *)other {
  [super copyAllFieldsTo:other];
  other->this$0_ = this$0_;
  other->val$e_ = val$e_;
}

@end

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(ImActorModelModulesMessages_$10_$4_$2)

@implementation ImActorModelModulesMessages_$11


#line 356
- (void)startWithAMCommandCallback:(id<AMCommandCallback>)callback {
  
#line 357
  ImActorModelApiOutPeer *outPeer;
  ImActorModelApiPeer *apiPeer;
  if ([((AMPeer *) nil_chk(val$peer_)) getPeerType] == AMPeerTypeEnum_get_PRIVATE()) {
    AMUser *user = [((id<DKKeyValueEngine>) nil_chk([this$0_ users])) getValueWithLong:[val$peer_ getPeerId]];
    if (user == nil) {
      [this$0_ runOnUiThreadWithJavaLangRunnable:[[ImActorModelModulesMessages_$11_$1 alloc] initWithAMCommandCallback:callback]];
      
#line 368
      return;
    }
    outPeer = [[ImActorModelApiOutPeer alloc] initWithImActorModelApiPeerTypeEnum:ImActorModelApiPeerTypeEnum_get_PRIVATE() withInt:[((AMUser *) nil_chk(user)) getUid] withLong:
#line 371
    [user getAccessHash]];
    apiPeer = [[ImActorModelApiPeer alloc] initWithImActorModelApiPeerTypeEnum:ImActorModelApiPeerTypeEnum_get_PRIVATE() withInt:
#line 373
    [user getUid]];
  }
  else
#line 374
  if ([val$peer_ getPeerType] == AMPeerTypeEnum_get_GROUP()) {
    AMGroup *group = [((id<DKKeyValueEngine>) nil_chk([this$0_ groups])) getValueWithLong:[val$peer_ getPeerId]];
    if (group == nil) {
      [this$0_ runOnUiThreadWithJavaLangRunnable:[[ImActorModelModulesMessages_$11_$2 alloc] initWithAMCommandCallback:callback]];
      
#line 383
      return;
    }
    outPeer = [[ImActorModelApiOutPeer alloc] initWithImActorModelApiPeerTypeEnum:ImActorModelApiPeerTypeEnum_get_GROUP() withInt:[((AMGroup *) nil_chk(group)) getGroupId] withLong:
#line 386
    [group getAccessHash]];
    apiPeer = [[ImActorModelApiPeer alloc] initWithImActorModelApiPeerTypeEnum:ImActorModelApiPeerTypeEnum_get_GROUP() withInt:
#line 388
    [group getGroupId]];
  }
  else {
    
#line 390
    [this$0_ runOnUiThreadWithJavaLangRunnable:[[ImActorModelModulesMessages_$11_$3 alloc] initWithAMCommandCallback:callback]];
    
#line 396
    return;
  }
  [this$0_ requestWithImActorModelNetworkParserRequest:[[ImActorModelApiRpcRequestClearChat alloc] initWithImActorModelApiOutPeer:outPeer] withAMRpcCallback:[[ImActorModelModulesMessages_$11_$4 alloc] initWithImActorModelModulesMessages_$11:self withImActorModelApiPeer:apiPeer withAMCommandCallback:callback]];
}

- (instancetype)initWithImActorModelModulesMessages:(ImActorModelModulesMessages *)outer$
                                         withAMPeer:(AMPeer *)capture$0 {
  this$0_ = outer$;
  val$peer_ = capture$0;
  return [super init];
}

- (void)copyAllFieldsTo:(ImActorModelModulesMessages_$11 *)other {
  [super copyAllFieldsTo:other];
  other->this$0_ = this$0_;
  other->val$peer_ = val$peer_;
}

@end

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(ImActorModelModulesMessages_$11)

@implementation ImActorModelModulesMessages_$11_$1


#line 364
- (void)run {
  
#line 365
  [((id<AMCommandCallback>) nil_chk(val$callback_)) onErrorWithJavaLangException:[[AMRpcInternalException alloc] init]];
}

- (instancetype)initWithAMCommandCallback:(id<AMCommandCallback>)capture$0 {
  val$callback_ = capture$0;
  return [super init];
}

- (void)copyAllFieldsTo:(ImActorModelModulesMessages_$11_$1 *)other {
  [super copyAllFieldsTo:other];
  other->val$callback_ = val$callback_;
}

@end

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(ImActorModelModulesMessages_$11_$1)

@implementation ImActorModelModulesMessages_$11_$2


#line 379
- (void)run {
  
#line 380
  [((id<AMCommandCallback>) nil_chk(val$callback_)) onErrorWithJavaLangException:[[AMRpcInternalException alloc] init]];
}

- (instancetype)initWithAMCommandCallback:(id<AMCommandCallback>)capture$0 {
  val$callback_ = capture$0;
  return [super init];
}

- (void)copyAllFieldsTo:(ImActorModelModulesMessages_$11_$2 *)other {
  [super copyAllFieldsTo:other];
  other->val$callback_ = val$callback_;
}

@end

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(ImActorModelModulesMessages_$11_$2)

@implementation ImActorModelModulesMessages_$11_$3


#line 392
- (void)run {
  
#line 393
  [((id<AMCommandCallback>) nil_chk(val$callback_)) onErrorWithJavaLangException:[[AMRpcInternalException alloc] init]];
}

- (instancetype)initWithAMCommandCallback:(id<AMCommandCallback>)capture$0 {
  val$callback_ = capture$0;
  return [super init];
}

- (void)copyAllFieldsTo:(ImActorModelModulesMessages_$11_$3 *)other {
  [super copyAllFieldsTo:other];
  other->val$callback_ = val$callback_;
}

@end

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(ImActorModelModulesMessages_$11_$3)

@implementation ImActorModelModulesMessages_$11_$4


#line 400
- (void)onResultWithImActorModelNetworkParserResponse:(ImActorModelApiRpcResponseSeq *)response {
  
#line 401
  [((ImActorModelModulesUpdates *) nil_chk([this$0_->this$0_ updates])) onUpdateReceivedWithId:[[ImActorModelApiBaseSeqUpdate alloc] initWithInt:[((ImActorModelApiRpcResponseSeq *) nil_chk(response)) getSeq] withByteArray:
#line 402
  [response getState] withInt:
#line 403
  ImActorModelApiUpdatesUpdateChatClear_HEADER withByteArray:
#line 404
  [((ImActorModelApiUpdatesUpdateChatClear *) [[ImActorModelApiUpdatesUpdateChatClear alloc] initWithImActorModelApiPeer:val$apiPeer_]) toByteArray]]];
  [this$0_->this$0_ runOnUiThreadWithJavaLangRunnable:[[ImActorModelModulesMessages_$11_$4_$1 alloc] initWithImActorModelModulesMessages_$11_$4:self]];
}


#line 414
- (void)onErrorWithAMRpcException:(AMRpcException *)e {
  
#line 415
  [this$0_->this$0_ runOnUiThreadWithJavaLangRunnable:[[ImActorModelModulesMessages_$11_$4_$2 alloc] initWithImActorModelModulesMessages_$11_$4:self withAMRpcException:e]];
}

- (instancetype)initWithImActorModelModulesMessages_$11:(ImActorModelModulesMessages_$11 *)outer$
                                withImActorModelApiPeer:(ImActorModelApiPeer *)capture$0
                                  withAMCommandCallback:(id<AMCommandCallback>)capture$1 {
  this$0_ = outer$;
  val$apiPeer_ = capture$0;
  val$callback_ = capture$1;
  return [super init];
}

- (void)copyAllFieldsTo:(ImActorModelModulesMessages_$11_$4 *)other {
  [super copyAllFieldsTo:other];
  other->this$0_ = this$0_;
  other->val$apiPeer_ = val$apiPeer_;
  other->val$callback_ = val$callback_;
}

@end

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(ImActorModelModulesMessages_$11_$4)

@implementation ImActorModelModulesMessages_$11_$4_$1


#line 407
- (void)run {
  
#line 408
  [((id<AMCommandCallback>) nil_chk(this$0_->val$callback_)) onResultWithId:JavaLangBoolean_valueOfWithBoolean_(YES)];
}

- (instancetype)initWithImActorModelModulesMessages_$11_$4:(ImActorModelModulesMessages_$11_$4 *)outer$ {
  this$0_ = outer$;
  return [super init];
}

- (void)copyAllFieldsTo:(ImActorModelModulesMessages_$11_$4_$1 *)other {
  [super copyAllFieldsTo:other];
  other->this$0_ = this$0_;
}

@end

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(ImActorModelModulesMessages_$11_$4_$1)

@implementation ImActorModelModulesMessages_$11_$4_$2


#line 417
- (void)run {
  
#line 418
  [((id<AMCommandCallback>) nil_chk(this$0_->val$callback_)) onErrorWithJavaLangException:val$e_];
}

- (instancetype)initWithImActorModelModulesMessages_$11_$4:(ImActorModelModulesMessages_$11_$4 *)outer$
                                        withAMRpcException:(AMRpcException *)capture$0 {
  this$0_ = outer$;
  val$e_ = capture$0;
  return [super init];
}

- (void)copyAllFieldsTo:(ImActorModelModulesMessages_$11_$4_$2 *)other {
  [super copyAllFieldsTo:other];
  other->this$0_ = this$0_;
  other->val$e_ = val$e_;
}

@end

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(ImActorModelModulesMessages_$11_$4_$2)

//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: /Users/ex3ndr/Develop/actor-model/library/actor-cocoa-base/build/java/im/actor/model/modules/typing/OwnTypingActor.java
//


#line 1 "/Users/ex3ndr/Develop/actor-model/library/actor-cocoa-base/build/java/im/actor/model/modules/typing/OwnTypingActor.java"

#include "J2ObjC_source.h"
#include "im/actor/model/api/OutPeer.h"
#include "im/actor/model/api/TypingType.h"
#include "im/actor/model/api/rpc/RequestTyping.h"
#include "im/actor/model/droidkit/actors/Actor.h"
#include "im/actor/model/droidkit/actors/ActorTime.h"
#include "im/actor/model/entity/Peer.h"
#include "im/actor/model/modules/Modules.h"
#include "im/actor/model/modules/typing/OwnTypingActor.h"
#include "im/actor/model/modules/utils/ModuleActor.h"

#define ImActorModelModulesTypingOwnTypingActor_TYPING_DELAY 3000LL

@interface ImActorModelModulesTypingOwnTypingActor () {
 @public
  jlong lastTypingTime_;
}

- (void)onTypingWithAMPeer:(AMPeer *)peer;

@end

J2OBJC_STATIC_FIELD_GETTER(ImActorModelModulesTypingOwnTypingActor, TYPING_DELAY, jlong)

__attribute__((unused)) static void ImActorModelModulesTypingOwnTypingActor_onTypingWithAMPeer_(ImActorModelModulesTypingOwnTypingActor *self, AMPeer *peer);

@interface ImActorModelModulesTypingOwnTypingActor_Typing () {
 @public
  AMPeer *peer_;
}

@end

J2OBJC_FIELD_SETTER(ImActorModelModulesTypingOwnTypingActor_Typing, peer_, AMPeer *)


#line 16
@implementation ImActorModelModulesTypingOwnTypingActor


#line 23
- (instancetype)initWithImActorModelModulesModules:(ImActorModelModulesModules *)messenger {
  ImActorModelModulesTypingOwnTypingActor_initWithImActorModelModulesModules_(self, messenger);
  return self;
}

- (void)onTypingWithAMPeer:(AMPeer *)peer {
  ImActorModelModulesTypingOwnTypingActor_onTypingWithAMPeer_(self, peer);
}


#line 45
- (void)onReceiveWithId:(id)message {
  if ([message isKindOfClass:[ImActorModelModulesTypingOwnTypingActor_Typing class]]) {
    ImActorModelModulesTypingOwnTypingActor_onTypingWithAMPeer_(self, [((ImActorModelModulesTypingOwnTypingActor_Typing *) nil_chk(((ImActorModelModulesTypingOwnTypingActor_Typing *) check_class_cast(message, [ImActorModelModulesTypingOwnTypingActor_Typing class])))) getPeer]);
  }
  else {
    
#line 49
    [self dropWithId:message];
  }
}

@end


#line 23
void ImActorModelModulesTypingOwnTypingActor_initWithImActorModelModulesModules_(ImActorModelModulesTypingOwnTypingActor *self, ImActorModelModulesModules *messenger) {
  (void) ImActorModelModulesUtilsModuleActor_initWithImActorModelModulesModules_(self, messenger);
  self->lastTypingTime_ =
#line 20
  0;
}


#line 23
ImActorModelModulesTypingOwnTypingActor *new_ImActorModelModulesTypingOwnTypingActor_initWithImActorModelModulesModules_(ImActorModelModulesModules *messenger) {
  ImActorModelModulesTypingOwnTypingActor *self = [ImActorModelModulesTypingOwnTypingActor alloc];
  ImActorModelModulesTypingOwnTypingActor_initWithImActorModelModulesModules_(self, messenger);
  return self;
}


#line 28
void ImActorModelModulesTypingOwnTypingActor_onTypingWithAMPeer_(ImActorModelModulesTypingOwnTypingActor *self, AMPeer *peer) {
  if (DKActorTime_currentTime() - self->lastTypingTime_ < ImActorModelModulesTypingOwnTypingActor_TYPING_DELAY) {
    return;
  }
  self->lastTypingTime_ = DKActorTime_currentTime();
  
#line 34
  ImActorModelApiOutPeer *outPeer = [self buidOutPeerWithAMPeer:peer];
  if (outPeer == nil) {
    return;
  }
  
#line 39
  [self requestWithImActorModelNetworkParserRequest:new_ImActorModelApiRpcRequestTyping_initWithImActorModelApiOutPeer_withImActorModelApiTypingTypeEnum_(outPeer, ImActorModelApiTypingTypeEnum_get_TEXT())];
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(ImActorModelModulesTypingOwnTypingActor)


#line 53
@implementation ImActorModelModulesTypingOwnTypingActor_Typing


#line 56
- (instancetype)initWithAMPeer:(AMPeer *)peer {
  ImActorModelModulesTypingOwnTypingActor_Typing_initWithAMPeer_(self, peer);
  return self;
}


#line 60
- (AMPeer *)getPeer {
  return peer_;
}

@end


#line 56
void ImActorModelModulesTypingOwnTypingActor_Typing_initWithAMPeer_(ImActorModelModulesTypingOwnTypingActor_Typing *self, AMPeer *peer) {
  (void) NSObject_init(self);
  
#line 57
  self->peer_ = peer;
}


#line 56
ImActorModelModulesTypingOwnTypingActor_Typing *new_ImActorModelModulesTypingOwnTypingActor_Typing_initWithAMPeer_(AMPeer *peer) {
  ImActorModelModulesTypingOwnTypingActor_Typing *self = [ImActorModelModulesTypingOwnTypingActor_Typing alloc];
  ImActorModelModulesTypingOwnTypingActor_Typing_initWithAMPeer_(self, peer);
  return self;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(ImActorModelModulesTypingOwnTypingActor_Typing)

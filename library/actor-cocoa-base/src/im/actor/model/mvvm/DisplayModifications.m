//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: /Users/ex3ndr/Develop/actor-model/library/actor-cocoa-base/build/java/im/actor/model/mvvm/DisplayModifications.java
//


#include "IOSPrimitiveArray.h"
#include "J2ObjC_source.h"
#include "im/actor/model/droidkit/engine/ListEngineItem.h"
#include "im/actor/model/mvvm/DisplayList.h"
#include "im/actor/model/mvvm/DisplayModifications.h"
#include "java/util/ArrayList.h"
#include "java/util/List.h"

@interface AMDisplayModifications ()

+ (void)replaceWithJavaUtilList:(id<JavaUtilList>)items
          withJavaUtilArrayList:(JavaUtilArrayList *)sourceList
withAMDisplayList_ModificationResult:(AMDisplayList_ModificationResult *)result;

+ (void)addOrUpdateWithDKListEngineItem:(id<DKListEngineItem>)item
                  withJavaUtilArrayList:(JavaUtilArrayList *)sourceList
   withAMDisplayList_ModificationResult:(AMDisplayList_ModificationResult *)result
                            withBoolean:(jboolean)isAddOnly;

@end

__attribute__((unused)) static void AMDisplayModifications_replaceWithJavaUtilList_withJavaUtilArrayList_withAMDisplayList_ModificationResult_(id<JavaUtilList> items, JavaUtilArrayList *sourceList, AMDisplayList_ModificationResult *result);

__attribute__((unused)) static void AMDisplayModifications_addOrUpdateWithDKListEngineItem_withJavaUtilArrayList_withAMDisplayList_ModificationResult_withBoolean_(id<DKListEngineItem> item, JavaUtilArrayList *sourceList, AMDisplayList_ModificationResult *result, jboolean isAddOnly);

@interface AMDisplayModifications_$1 : NSObject < AMDisplayList_Modification > {
 @public
  id<JavaUtilList> val$items_;
}

- (AMDisplayList_ModificationResult *)modifyWithJavaUtilArrayList:(JavaUtilArrayList *)sourceList;

- (instancetype)initWithJavaUtilList:(id<JavaUtilList>)capture$0;

@end

J2OBJC_EMPTY_STATIC_INIT(AMDisplayModifications_$1)

J2OBJC_FIELD_SETTER(AMDisplayModifications_$1, val$items_, id<JavaUtilList>)

__attribute__((unused)) static void AMDisplayModifications_$1_initWithJavaUtilList_(AMDisplayModifications_$1 *self, id<JavaUtilList> capture$0);

__attribute__((unused)) static AMDisplayModifications_$1 *new_AMDisplayModifications_$1_initWithJavaUtilList_(id<JavaUtilList> capture$0) NS_RETURNS_RETAINED;

J2OBJC_TYPE_LITERAL_HEADER(AMDisplayModifications_$1)

@interface AMDisplayModifications_$2 : NSObject < AMDisplayList_Modification > {
 @public
  id<JavaUtilList> val$items_;
}

- (AMDisplayList_ModificationResult *)modifyWithJavaUtilArrayList:(JavaUtilArrayList *)sourceList;

- (instancetype)initWithJavaUtilList:(id<JavaUtilList>)capture$0;

@end

J2OBJC_EMPTY_STATIC_INIT(AMDisplayModifications_$2)

J2OBJC_FIELD_SETTER(AMDisplayModifications_$2, val$items_, id<JavaUtilList>)

__attribute__((unused)) static void AMDisplayModifications_$2_initWithJavaUtilList_(AMDisplayModifications_$2 *self, id<JavaUtilList> capture$0);

__attribute__((unused)) static AMDisplayModifications_$2 *new_AMDisplayModifications_$2_initWithJavaUtilList_(id<JavaUtilList> capture$0) NS_RETURNS_RETAINED;

J2OBJC_TYPE_LITERAL_HEADER(AMDisplayModifications_$2)

@interface AMDisplayModifications_$3 : NSObject < AMDisplayList_Modification > {
 @public
  id<JavaUtilList> val$items_;
}

- (AMDisplayList_ModificationResult *)modifyWithJavaUtilArrayList:(JavaUtilArrayList *)sourceList;

- (instancetype)initWithJavaUtilList:(id<JavaUtilList>)capture$0;

@end

J2OBJC_EMPTY_STATIC_INIT(AMDisplayModifications_$3)

J2OBJC_FIELD_SETTER(AMDisplayModifications_$3, val$items_, id<JavaUtilList>)

__attribute__((unused)) static void AMDisplayModifications_$3_initWithJavaUtilList_(AMDisplayModifications_$3 *self, id<JavaUtilList> capture$0);

__attribute__((unused)) static AMDisplayModifications_$3 *new_AMDisplayModifications_$3_initWithJavaUtilList_(id<JavaUtilList> capture$0) NS_RETURNS_RETAINED;

J2OBJC_TYPE_LITERAL_HEADER(AMDisplayModifications_$3)

@interface AMDisplayModifications_$4 : NSObject < AMDisplayList_Modification > {
 @public
  IOSLongArray *val$dstIds_;
}

- (AMDisplayList_ModificationResult *)modifyWithJavaUtilArrayList:(JavaUtilArrayList *)sourceList;

- (instancetype)initWithLongArray:(IOSLongArray *)capture$0;

@end

J2OBJC_EMPTY_STATIC_INIT(AMDisplayModifications_$4)

J2OBJC_FIELD_SETTER(AMDisplayModifications_$4, val$dstIds_, IOSLongArray *)

__attribute__((unused)) static void AMDisplayModifications_$4_initWithLongArray_(AMDisplayModifications_$4 *self, IOSLongArray *capture$0);

__attribute__((unused)) static AMDisplayModifications_$4 *new_AMDisplayModifications_$4_initWithLongArray_(IOSLongArray *capture$0) NS_RETURNS_RETAINED;

J2OBJC_TYPE_LITERAL_HEADER(AMDisplayModifications_$4)

@interface AMDisplayModifications_$5 : NSObject < AMDisplayList_Modification >

- (AMDisplayList_ModificationResult *)modifyWithJavaUtilArrayList:(JavaUtilArrayList *)sourceList;

- (instancetype)init;

@end

J2OBJC_EMPTY_STATIC_INIT(AMDisplayModifications_$5)

__attribute__((unused)) static void AMDisplayModifications_$5_init(AMDisplayModifications_$5 *self);

__attribute__((unused)) static AMDisplayModifications_$5 *new_AMDisplayModifications_$5_init() NS_RETURNS_RETAINED;

J2OBJC_TYPE_LITERAL_HEADER(AMDisplayModifications_$5)

@implementation AMDisplayModifications

+ (id<AMDisplayList_Modification>)addOrUpdateWithDKListEngineItem:(id<DKListEngineItem>)item {
  return AMDisplayModifications_addOrUpdateWithDKListEngineItem_(item);
}

+ (id<AMDisplayList_Modification>)addOrUpdateWithJavaUtilList:(id<JavaUtilList>)items {
  return AMDisplayModifications_addOrUpdateWithJavaUtilList_(items);
}

+ (id<AMDisplayList_Modification>)addOnlyWithJavaUtilList:(id<JavaUtilList>)items {
  return AMDisplayModifications_addOnlyWithJavaUtilList_(items);
}

+ (id<AMDisplayList_Modification>)replaceWithJavaUtilList:(id<JavaUtilList>)items {
  return AMDisplayModifications_replaceWithJavaUtilList_(items);
}

+ (id<AMDisplayList_Modification>)removeWithLong:(jlong)dstId {
  return AMDisplayModifications_removeWithLong_(dstId);
}

+ (id<AMDisplayList_Modification>)removeWithLongArray:(IOSLongArray *)dstIds {
  return AMDisplayModifications_removeWithLongArray_(dstIds);
}

+ (id<AMDisplayList_Modification>)clear {
  return AMDisplayModifications_clear();
}

+ (void)replaceWithJavaUtilList:(id<JavaUtilList>)items
          withJavaUtilArrayList:(JavaUtilArrayList *)sourceList
withAMDisplayList_ModificationResult:(AMDisplayList_ModificationResult *)result {
  AMDisplayModifications_replaceWithJavaUtilList_withJavaUtilArrayList_withAMDisplayList_ModificationResult_(items, sourceList, result);
}

+ (void)addOrUpdateWithDKListEngineItem:(id<DKListEngineItem>)item
                  withJavaUtilArrayList:(JavaUtilArrayList *)sourceList
   withAMDisplayList_ModificationResult:(AMDisplayList_ModificationResult *)result
                            withBoolean:(jboolean)isAddOnly {
  AMDisplayModifications_addOrUpdateWithDKListEngineItem_withJavaUtilArrayList_withAMDisplayList_ModificationResult_withBoolean_(item, sourceList, result, isAddOnly);
}

- (instancetype)init {
  AMDisplayModifications_init(self);
  return self;
}

@end

id<AMDisplayList_Modification> AMDisplayModifications_addOrUpdateWithDKListEngineItem_(id<DKListEngineItem> item) {
  AMDisplayModifications_initialize();
  JavaUtilArrayList *res = new_JavaUtilArrayList_init();
  [res addWithId:item];
  return AMDisplayModifications_addOrUpdateWithJavaUtilList_(res);
}

id<AMDisplayList_Modification> AMDisplayModifications_addOrUpdateWithJavaUtilList_(id<JavaUtilList> items) {
  AMDisplayModifications_initialize();
  return new_AMDisplayModifications_$1_initWithJavaUtilList_(items);
}

id<AMDisplayList_Modification> AMDisplayModifications_addOnlyWithJavaUtilList_(id<JavaUtilList> items) {
  AMDisplayModifications_initialize();
  return new_AMDisplayModifications_$2_initWithJavaUtilList_(items);
}

id<AMDisplayList_Modification> AMDisplayModifications_replaceWithJavaUtilList_(id<JavaUtilList> items) {
  AMDisplayModifications_initialize();
  return new_AMDisplayModifications_$3_initWithJavaUtilList_(items);
}

id<AMDisplayList_Modification> AMDisplayModifications_removeWithLong_(jlong dstId) {
  AMDisplayModifications_initialize();
  return AMDisplayModifications_removeWithLongArray_([IOSLongArray newArrayWithLongs:(jlong[]){ dstId } count:1]);
}

id<AMDisplayList_Modification> AMDisplayModifications_removeWithLongArray_(IOSLongArray *dstIds) {
  AMDisplayModifications_initialize();
  return new_AMDisplayModifications_$4_initWithLongArray_(dstIds);
}

id<AMDisplayList_Modification> AMDisplayModifications_clear() {
  AMDisplayModifications_initialize();
  return new_AMDisplayModifications_$5_init();
}

void AMDisplayModifications_replaceWithJavaUtilList_withJavaUtilArrayList_withAMDisplayList_ModificationResult_(id<JavaUtilList> items, JavaUtilArrayList *sourceList, AMDisplayList_ModificationResult *result) {
  AMDisplayModifications_initialize();
  for (jint i = 0; i < [((JavaUtilArrayList *) nil_chk(sourceList)) size]; i++) {
    {
      jlong id_ = [((id<DKListEngineItem>) nil_chk([sourceList getWithInt:i])) getEngineId];
      for (id<DKListEngineItem> __strong itm in nil_chk(items)) {
        if ([((id<DKListEngineItem>) nil_chk(itm)) getEngineId] == id_) {
          goto continue_outer;
        }
      }
      [((AMDisplayList_ModificationResult *) nil_chk(result)) appendRemoveWithInt:i withInt:1];
      (void) [sourceList removeWithInt:i];
      i--;
    }
    continue_outer: ;
  }
  for (id<DKListEngineItem> __strong itm in nil_chk(items)) {
    AMDisplayModifications_addOrUpdateWithDKListEngineItem_withJavaUtilArrayList_withAMDisplayList_ModificationResult_withBoolean_(itm, sourceList, result, NO);
  }
}

void AMDisplayModifications_addOrUpdateWithDKListEngineItem_withJavaUtilArrayList_withAMDisplayList_ModificationResult_withBoolean_(id<DKListEngineItem> item, JavaUtilArrayList *sourceList, AMDisplayList_ModificationResult *result, jboolean isAddOnly) {
  AMDisplayModifications_initialize();
  jlong id_ = [((id<DKListEngineItem>) nil_chk(item)) getEngineId];
  jlong sortKey = [item getEngineSort];
  jint removedIndex = -1;
  jint addedIndex = -1;
  for (jint i = 0; i < [((JavaUtilArrayList *) nil_chk(sourceList)) size]; i++) {
    id<DKListEngineItem> srcItem = [sourceList getWithInt:i];
    if ([((id<DKListEngineItem>) nil_chk(srcItem)) getEngineId] == id_) {
      if (isAddOnly) {
        return;
      }
      (void) [sourceList removeWithInt:i];
      if (addedIndex >= 0) {
        removedIndex = i - 1;
      }
      else {
        removedIndex = i;
      }
      i--;
      continue;
    }
    else {
      if ((addedIndex < 0) && sortKey > [srcItem getEngineSort]) {
        addedIndex = i;
        [sourceList addWithInt:i withId:item];
        i++;
      }
    }
    if (addedIndex >= 0 && removedIndex >= 0) {
      break;
    }
  }
  if (addedIndex < 0) {
    addedIndex = [sourceList size];
    [sourceList addWithInt:[sourceList size] withId:item];
  }
  if (addedIndex == removedIndex) {
    [((AMDisplayList_ModificationResult *) nil_chk(result)) appendUpdateWithInt:addedIndex withId:item];
  }
  else if (removedIndex >= 0) {
    [((AMDisplayList_ModificationResult *) nil_chk(result)) appendUpdateWithInt:removedIndex withId:item];
    [result appendMoveWithInt:removedIndex withInt:addedIndex];
  }
  else {
    [((AMDisplayList_ModificationResult *) nil_chk(result)) appendAddWithInt:addedIndex withId:item];
  }
}

void AMDisplayModifications_init(AMDisplayModifications *self) {
  (void) NSObject_init(self);
}

AMDisplayModifications *new_AMDisplayModifications_init() {
  AMDisplayModifications *self = [AMDisplayModifications alloc];
  AMDisplayModifications_init(self);
  return self;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(AMDisplayModifications)

@implementation AMDisplayModifications_$1

- (AMDisplayList_ModificationResult *)modifyWithJavaUtilArrayList:(JavaUtilArrayList *)sourceList {
  AMDisplayList_ModificationResult *res = new_AMDisplayList_ModificationResult_init();
  for (id<DKListEngineItem> __strong toAdd in nil_chk(val$items_)) {
    AMDisplayModifications_addOrUpdateWithDKListEngineItem_withJavaUtilArrayList_withAMDisplayList_ModificationResult_withBoolean_(toAdd, sourceList, res, NO);
  }
  return res;
}

- (instancetype)initWithJavaUtilList:(id<JavaUtilList>)capture$0 {
  AMDisplayModifications_$1_initWithJavaUtilList_(self, capture$0);
  return self;
}

@end

void AMDisplayModifications_$1_initWithJavaUtilList_(AMDisplayModifications_$1 *self, id<JavaUtilList> capture$0) {
  self->val$items_ = capture$0;
  (void) NSObject_init(self);
}

AMDisplayModifications_$1 *new_AMDisplayModifications_$1_initWithJavaUtilList_(id<JavaUtilList> capture$0) {
  AMDisplayModifications_$1 *self = [AMDisplayModifications_$1 alloc];
  AMDisplayModifications_$1_initWithJavaUtilList_(self, capture$0);
  return self;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(AMDisplayModifications_$1)

@implementation AMDisplayModifications_$2

- (AMDisplayList_ModificationResult *)modifyWithJavaUtilArrayList:(JavaUtilArrayList *)sourceList {
  AMDisplayList_ModificationResult *res = new_AMDisplayList_ModificationResult_init();
  for (id<DKListEngineItem> __strong toAdd in nil_chk(val$items_)) {
    AMDisplayModifications_addOrUpdateWithDKListEngineItem_withJavaUtilArrayList_withAMDisplayList_ModificationResult_withBoolean_(toAdd, sourceList, res, YES);
  }
  return res;
}

- (instancetype)initWithJavaUtilList:(id<JavaUtilList>)capture$0 {
  AMDisplayModifications_$2_initWithJavaUtilList_(self, capture$0);
  return self;
}

@end

void AMDisplayModifications_$2_initWithJavaUtilList_(AMDisplayModifications_$2 *self, id<JavaUtilList> capture$0) {
  self->val$items_ = capture$0;
  (void) NSObject_init(self);
}

AMDisplayModifications_$2 *new_AMDisplayModifications_$2_initWithJavaUtilList_(id<JavaUtilList> capture$0) {
  AMDisplayModifications_$2 *self = [AMDisplayModifications_$2 alloc];
  AMDisplayModifications_$2_initWithJavaUtilList_(self, capture$0);
  return self;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(AMDisplayModifications_$2)

@implementation AMDisplayModifications_$3

- (AMDisplayList_ModificationResult *)modifyWithJavaUtilArrayList:(JavaUtilArrayList *)sourceList {
  AMDisplayList_ModificationResult *res = new_AMDisplayList_ModificationResult_init();
  AMDisplayModifications_replaceWithJavaUtilList_withJavaUtilArrayList_withAMDisplayList_ModificationResult_(val$items_, sourceList, res);
  return res;
}

- (instancetype)initWithJavaUtilList:(id<JavaUtilList>)capture$0 {
  AMDisplayModifications_$3_initWithJavaUtilList_(self, capture$0);
  return self;
}

@end

void AMDisplayModifications_$3_initWithJavaUtilList_(AMDisplayModifications_$3 *self, id<JavaUtilList> capture$0) {
  self->val$items_ = capture$0;
  (void) NSObject_init(self);
}

AMDisplayModifications_$3 *new_AMDisplayModifications_$3_initWithJavaUtilList_(id<JavaUtilList> capture$0) {
  AMDisplayModifications_$3 *self = [AMDisplayModifications_$3 alloc];
  AMDisplayModifications_$3_initWithJavaUtilList_(self, capture$0);
  return self;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(AMDisplayModifications_$3)

@implementation AMDisplayModifications_$4

- (AMDisplayList_ModificationResult *)modifyWithJavaUtilArrayList:(JavaUtilArrayList *)sourceList {
  AMDisplayList_ModificationResult *res = new_AMDisplayList_ModificationResult_init();
  for (jint i = 0; i < [((JavaUtilArrayList *) nil_chk(sourceList)) size]; i++) {
    id<DKListEngineItem> src = [sourceList getWithInt:i];
    {
      IOSLongArray *a__ = val$dstIds_;
      jlong const *b__ = ((IOSLongArray *) nil_chk(a__))->buffer_;
      jlong const *e__ = b__ + a__->size_;
      while (b__ < e__) {
        jlong aDstId = *b__++;
        if ([((id<DKListEngineItem>) nil_chk(src)) getEngineId] == aDstId) {
          (void) [sourceList removeWithInt:i];
          [res appendOperationWithAMDisplayList_ModificationResult_Operation:new_AMDisplayList_ModificationResult_Operation_initWithAMDisplayList_ModificationResult_OperationTypeEnum_withInt_(AMDisplayList_ModificationResult_OperationTypeEnum_get_REMOVE(), i)];
          i--;
          break;
        }
      }
    }
  }
  return res;
}

- (instancetype)initWithLongArray:(IOSLongArray *)capture$0 {
  AMDisplayModifications_$4_initWithLongArray_(self, capture$0);
  return self;
}

@end

void AMDisplayModifications_$4_initWithLongArray_(AMDisplayModifications_$4 *self, IOSLongArray *capture$0) {
  self->val$dstIds_ = capture$0;
  (void) NSObject_init(self);
}

AMDisplayModifications_$4 *new_AMDisplayModifications_$4_initWithLongArray_(IOSLongArray *capture$0) {
  AMDisplayModifications_$4 *self = [AMDisplayModifications_$4 alloc];
  AMDisplayModifications_$4_initWithLongArray_(self, capture$0);
  return self;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(AMDisplayModifications_$4)

@implementation AMDisplayModifications_$5

- (AMDisplayList_ModificationResult *)modifyWithJavaUtilArrayList:(JavaUtilArrayList *)sourceList {
  AMDisplayList_ModificationResult *res = new_AMDisplayList_ModificationResult_init();
  if ([((JavaUtilArrayList *) nil_chk(sourceList)) size] != 0) {
    [sourceList clear];
    [res appendRemoveWithInt:0 withInt:[sourceList size]];
  }
  return res;
}

- (instancetype)init {
  AMDisplayModifications_$5_init(self);
  return self;
}

@end

void AMDisplayModifications_$5_init(AMDisplayModifications_$5 *self) {
  (void) NSObject_init(self);
}

AMDisplayModifications_$5 *new_AMDisplayModifications_$5_init() {
  AMDisplayModifications_$5 *self = [AMDisplayModifications_$5 alloc];
  AMDisplayModifications_$5_init(self);
  return self;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(AMDisplayModifications_$5)
